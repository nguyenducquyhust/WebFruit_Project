if (self.CavalryLogger) { CavalryLogger.start_js(["h2HDI"]); }

__d("VideoTipJarTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:VideoTipJarLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoTipJarLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoTipJarLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setGamesOrderID=function(a){this.$1.games_order_id=a;return this};c.setIsCustomAmount=function(a){this.$1.is_custom_amount=a;return this};c.setMatchingQuantity=function(a){this.$1.matching_quantity=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setPaymentID=function(a){this.$1.payment_id=a;return this};c.setProductID=function(a){this.$1.product_id=a;return this};c.setSparkQuantity=function(a){this.$1.spark_quantity=a;return this};c.setSpendID=function(a){this.$1.spend_id=a;return this};c.setSpendingSubtype=function(a){this.$1.spending_subtype=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTipJarEvent=function(a){this.$1.tip_jar_event=a;return this};c.setTipPaymentID=function(a){this.$1.tip_payment_id=a;return this};c.setUsdAmount=function(a){this.$1.usd_amount=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVirtualGiftID=function(a){this.$1.virtual_gift_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={games_order_id:!0,is_custom_amount:!0,matching_quantity:!0,name:!0,payment_id:!0,product_id:!0,spark_quantity:!0,spend_id:!0,spending_subtype:!0,time:!0,tip_jar_event:!0,tip_payment_id:!0,usd_amount:!0,vc:!0,video_id:!0,virtual_gift_id:!0,weight:!0};e.exports=a}),null);
__d("LiveVideoInteractiveAlertSidePaneView.react",["Arbiter","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useState,i=b("lazyLoadComponent")(b("JSResource")("IdentityBadgeEarnedAlertView.react").__setRef("LiveVideoInteractiveAlertSidePaneView.react"));a=function(a){__p&&__p();var c=h(null),d=c[0],e=c[1];g(function(){var a=b("Arbiter").subscribe("LiveVideoInteractiveAlert/sidePaneAlertReceived",function(a,b){return e(b)});return function(){return a&&a.unsubscribe()}});if(d===null)return null;switch(d.type){case"IDENTITY_BADGE_EARNED":return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("span",null)},b("React").createElement(i,{badgeName:"Familiar Face",badgeType:"frequent_watcher",videoID:a.videoID,onDismiss:function(){return e(null)}}));default:return null}};e.exports=a}),null);
__d("VideoChainingToken",["Base64"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";function a(a){this.$1=a}a.encode=function(c){return new a(b("Base64").encode(JSON.stringify(c)))};var c=a.prototype;c.decode=function(){return JSON.parse(b("Base64").decode(this.$1))};return a}();e.exports=a}),null);
__d("TahoeActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SET_MC:null,EXIT:null,SET_UFI_INSTANCE_ID:null});e.exports=a}),null);
__d("TahoeConstants",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";a={MIN_PLAYER_WIDTH:640,MIN_PLAYER_HEIGHT:360,MAX_PLAYER_HEIGHT:1e3,MIN_BOTTOM_PANE_HEIGHT:160,SIDE_PANE_WIDTH:400,BLUE_BAR_HEIGHT:b("CurrentUser").isLoggedIn()?49:0,DEFAULT_BROWSER_TITLE:"Facebook",UP_NEXT_UNIT_ID_PREFIX:"video-up-next-"};e.exports=a}),null);
__d("TahoeCopyrightMessage.react",["ix","cx","fbt","Image.react","React","SubscriptionsHandler","XUICloseButton.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasCopyrightAction:c.props.videoController.isAudioBlocked()},c.$2=function(){c.setState({hasCopyrightAction:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(this.props.videoController.addListener("blockVideo",function(){a.setState({hasCopyrightAction:!1})}),this.props.videoController.addListener("blockAudio",function(){a.setState({hasCopyrightAction:!0})}),this.props.videoController.addListener("unblockAudio",function(){a.setState({hasCopyrightAction:!1})}))};d.componentWillUnmount=function(){this.$1.release()};d.render=function(){return!this.state.hasCopyrightAction?null:b("React").createElement("div",{className:"_6ukn"},b("React").createElement(b("Image.react"),{src:g("519615")}),b("React").createElement("div",{className:"_6uko"},this.props.videoController.isBroadcaster()?i._("Khi b\u1ea1n b\u1eadt b\u00e0i h\u00e1t n\u00e0y, video c\u1ee7a b\u1ea1n c\u00f3 th\u1ec3 b\u1ecb t\u1eaft ti\u1ebfng \u1edf m\u1ed9t s\u1ed1 qu\u1ed1c gia."):i._("Video n\u00e0y b\u1ecb t\u1eaft ti\u1ebfng do ch\u1ee9a nh\u1ea1c kh\u00f4ng \u0111\u01b0\u1ee3c ph\u00e9p ph\u00e1t t\u1ea1i qu\u1ed1c gia b\u1ea1n c\u01b0 tr\u00fa.")),b("React").createElement(b("XUICloseButton.react"),{className:"_6ujz",shade:"light",tooltip:"Close",onClick:this.$2}))};return c}(b("React").Component);e.exports=a}),null);
__d("TahoeDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a({strict:!0})}),null);
__d("TahoeMainPlayerViewportTracking",["csx","StreamViewportTracking"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=25,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getTimetrackingDataToLog=function(a){a=b.prototype.getTimetrackingDataToLog.call(this,a);a.ft.src=h;return a};return a}(b("StreamViewportTracking"));e.exports={setup:function(a,c,d){c=new i(b("StreamViewportTracking").getBehavior(a,c,"._5-yb",d));c.init(a);return c}}}),null);
__d("TahoeUpNextUnitPlaceholder.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_27do"}),b("React").createElement("div",{className:"_27dr"}),b("React").createElement("div",{className:"_27em"}),b("React").createElement("div",{className:"_27en"}))}e.exports=a}),null);
__d("TahoeSidePanePlaceholder.react",["cx","Layout.react","React","TahoeUpNextUnitPlaceholder.react","TahoeV2Config","cxMargin"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("Layout.react").Column,i=b("Layout.react").FillColumn;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("TahoeV2Config").showTahoe2UI?b("React").createElement("div",{className:"_wxj _6j4x"},b("React").createElement("div",{className:"_6j4y"},b("React").createElement("div",{className:"_6j4z _6j4-"}),b("React").createElement("div",{className:"_6j4z _6j4_"}),b("React").createElement("div",{className:"_6j4z _6j50"}),b("React").createElement("div",{className:"_6j4z _6j54"}),b("React").createElement("div",{className:"_6j55"},b("React").createElement(b("Layout.react"),null,b("React").createElement(h,{className:"_3-90"},b("React").createElement("div",{className:"_6j56"})),b("React").createElement(i,null,b("React").createElement("div",{className:"_6j57"})))))):b("React").createElement("div",{className:"_wxj _1-z7"},b("React").createElement("div",{className:"_1kna"}),b("React").createElement("div",{className:"_1knc"}),b("React").createElement("div",{className:"_1knd"}),b("React").createElement("div",{className:"_1kne"}),b("React").createElement("div",{className:"_1knf"}),b("React").createElement("div",{className:"_1kng"}),b("React").createElement(b("TahoeUpNextUnitPlaceholder.react"),null))};return c}(b("React").Component);e.exports=a}),null);
__d("TahoeUpNextViewportTracking",["csx","StreamViewportTracking"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="tahoe_up_next_videos",i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getTimetrackingDataToLog=function(a){a=b.prototype.getTimetrackingDataToLog.call(this,a);a.ft.tracking_source=h;return a};return a}(b("StreamViewportTracking"));e.exports={setup:function(a,c,d){c=new i(b("StreamViewportTracking").getBehavior(a,c,"._bne",d));c.init(a);return c}}}),null);
__d("TahoeWatchLogo.react",["cx","fbt","Image.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){return b("React").createElement("div",{className:"_8dl2"},b("React").createElement("div",{className:"_8dl3"},b("React").createElement(b("Image.react"),{src:"/images/litestand/bookmarks/sidebar/icons/mobile/icon-watch-tv.png"})),b("React").createElement("div",{className:"_8dl4"},h._("Watch")))}e.exports=a}),null);
__d("TahoeUpNextWatchEntryPoint.react",["cx","fbt","DOMDimensions","Event","React","TahoeWatchLogo.react","TetraButton.react","VideoHomeTypedLoggerLite","XVideoHomeFeedController","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").useCallback,j=b("React").useRef,k=b("VideoHomeTypedLoggerLite").log,l=26;function a(a){__p&&__p();a=a.sidepaneElement;var c=j(!1),d=b("React").createRef(),e=i(function(){var a=b("getElementPosition")(d.current),c=b("DOMDimensions").getElementDimensions(d.current);if(a.y<0&&c.height<=0)return!1;a=a.y+c.height+l<b("getViewportDimensions")().height;return a},[d]),f=i(function(){var a=e();a&&!c.current&&k({event:"tahoe_up_next_video_watch_entry_point_impression"});c.current=a},[e]);a!=null&&(b("Event").listen(a,"scroll",f),b("Event").listen(window,"resize",f));a=i(function(){k({event:"click",click_target:"tahoe_up_next_video_watch_entry_point"})},[]);return b("React").createElement("div",{className:"_8c-h",ref:d},b("React").createElement("div",{className:"_8c-i"},h._("Video kh\u00e1c tr\u00ean Watch")),b("React").createElement(b("TahoeWatchLogo.react"),null),b("React").createElement(b("TetraButton.react"),{label:h._("Truy c\u1eadp Watch"),onPress:a,linkProps:{url:b("XVideoHomeFeedController").getURIBuilder().getURI().toString()},size:"medium"}))}e.exports=a}),null);
__d("TahoeVideoStore",["FluxMapStore","TahoeActionTypes","TahoeDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.reduce=function(a,c){switch(c.type){case b("TahoeActionTypes").SET_MC:a=a.set("mediaController",c.mediaController);break;case b("TahoeActionTypes").SET_UFI_INSTANCE_ID:a=a.set("ufiInstanceID",c.ufiInstanceID);break;case b("TahoeActionTypes").EXIT:a=b("immutable").Map();break;default:break}return a};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("TahoeDispatcher"))}),null);
__d("VideoInfoBottomPaneShimmer.react",["cx","ImageBlock.react","InlineBlock.react","LeftRight.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2ve3 _2ve4"},b("React").createElement("div",null,b("React").createElement(b("LeftRight.react"),null,b("React").createElement(h,{width:320}),b("React").createElement("span",null,b("React").createElement(j,null),b("React").createElement(j,null),b("React").createElement(j,null))),b("React").createElement(h,{width:222}),b("React").createElement("div",{className:"_2vev"},b("React").createElement(b("ImageBlock.react"),null,b("React").createElement("span",{className:"_2vew"}),b("React").createElement(b("InlineBlock.react"),{alignv:"middle",height:36,fullWidth:!0},b("React").createElement(k,{width:90,height:16}))))),b("React").createElement("div",{className:"_2vex"},b("React").createElement(i,{width:132}),b("React").createElement(i,{width:780}),b("React").createElement(i,{width:460})))};return c}(b("React").Component);var h=function(a){return b("React").createElement(k,{width:a.width,height:16,className:"_2vey"})},i=function(a){return b("React").createElement(k,{className:"_2vez",height:8,width:a.width})},j=function(){return b("React").createElement(k,{width:60,height:16,display:"inline-block",className:"_2ve-"})},k=function(a){var c=b("joinClasses")(a.className,"_2ve_");return b("React").createElement("div",{className:c,style:{width:a.width,height:a.height,display:a.display}})};k.defaultProps={display:"block"};e.exports=a}),null);
__d("VodPncSeeAllReactionsClickFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("vod_pnc_see_all_reactions_click");e.exports=a}),null);
__d("XTahoeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/async/{id}/",{id:{type:"FBID",required:!0},externallogid:{type:"String"},sponsoreddata:{type:"String"},originalmediaid:{type:"String"},preload:{type:"Bool",defaultValue:!1},playerorigin:{type:"Enum",enumType:1},playersuborigin:{type:"String"},videolistid:{type:"String"},reactionvideochanneltype:{type:"Enum",enumType:1},reactionvideochannelsubtype:{type:"String"},ispermalink:{type:"Bool",defaultValue:!1},feedtracking:{type:"StringVector",defaultValue:[]},storyidentifier:{type:"String"},numcopyrightmatchedvideoplayedconsecutively:{type:"Int"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"},payloadtype:{type:"Enum",enumType:1},tahoeviewhasrendered:{type:"Bool",defaultValue:!1}})}),null);
__d("XTahoeUpNextAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/upnext/async/{media_id}/",{channel_id:{type:"String"},media_id:{type:"FBID",required:!0},viewed_videos:{type:"FBIDSet"},caller:{type:"Enum",enumType:1},chainingindex:{type:"Int"},cursor:{type:"String"},search_keywords:{type:"String"}})}),null);
__d("upNextVideoStateActionTypes",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_TO_BUFFER:"APPEND_TO_BUFFER",REMOVE_BUFFER_HEADS:"REMOVE_BUFFER_HEADS",RETRIEVE_FROM_BUFFER:"RETRIEVE_FROM_BUFFER",SET_CHAINING_CURSOR:"SET_CHAINING_CURSOR"};e.exports=a}),null);
__d("upNextVideoStateReducer",["TahoeConstants","upNextVideoStateActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={upNextVideoBuffer:[],retrievedUnits:[],chainingCursor:null},h=b("TahoeConstants").UP_NEXT_UNIT_ID_PREFIX,i=20;a=function(a,c){__p&&__p();a===void 0&&(a=g);switch(c.type){case b("upNextVideoStateActionTypes").APPEND_TO_BUFFER:var d=c.payload;if(Array.isArray(d))return{upNextVideoBuffer:a.upNextVideoBuffer.concat(d),retrievedUnits:a.retrievedUnits,chainingCursor:a.chainingCursor};else return a;case b("upNextVideoStateActionTypes").REMOVE_BUFFER_HEADS:d=c.payload;if(typeof d==="string"){d=h+d;while(a.upNextVideoBuffer.length>0&&a.upNextVideoBuffer[0].id!==d)a.upNextVideoBuffer.shift();a.upNextVideoBuffer.length>0&&a.upNextVideoBuffer.shift();return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:a.retrievedUnits,chainingCursor:a.chainingCursor}}else return a;case b("upNextVideoStateActionTypes").RETRIEVE_FROM_BUFFER:d=c.payload;if(typeof d==="number"){var e=Math.min(i,a.upNextVideoBuffer.length);d=a.upNextVideoBuffer.slice(d,e);return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:d,chainingCursor:a.chainingCursor}}else return a;case b("upNextVideoStateActionTypes").SET_CHAINING_CURSOR:if(typeof c.payload==="string")return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:a.retrievedUnits,chainingCursor:c.payload};else return a;default:return a}};e.exports=a}),null);
__d("upNextVideoStateStore",["redux","upNextVideoStateReducer"],(function(a,b,c,d,e,f){"use strict";a=b("redux").createStore(b("upNextVideoStateReducer"));e.exports=a}),null);
__d("TahoeVideoView",["csx","cx","ActorURI","Arbiter","AsyncRequest","Bootloader","CSS","CurrentUser","DOM","DOMQuery","Event","EventProfiler","HTML","JSResource","Keys","LiveVideoInteractiveAlertSidePaneView.react","React","ReactDOM","ReactRenderer","SubscriptionsHandler","TabBar","Tahoe","TahoeConstants","TahoeCopyrightMessage.react","TahoeMainPlayerViewportTracking","TahoeSidePanePlaceholder.react","TahoeUpNextViewportTracking","TahoeUpNextWatchEntryPoint.react","TahoeV2Config","TahoeVideoStore","TimeSlice","UFICentralUpdates","UFISharedDispatcher","URI","VideoInfoBottomPaneShimmer.react","VideoPermalinkURI","VideoTipJarTypedLogger","VodPncSeeAllReactionsClickFalcoEvent","XTahoeAsyncController","XTahoeUpNextAsyncController","ge","gkx","lazyLoadComponent","upNextVideoStateStore","uuid"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("GamesVideoModerationRulesNux.react").__setRef("TahoeVideoView")),j=4,k=b("TahoeV2Config").maximizeEndScreenVideoCount?16:9,l=/^[1-9]\d*$/,m=15,n="tahoe-preloaded-video",o=7,p="video-up-next-",q="video-up-next-wp-",r=4,s=97;a=function(){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this.$8=null;this.$21=!1;this.$38=function(){b("CSS").hide(f.$20),f.$7.setFullWidth(!0)};this.$39=function(){b("CSS").show(f.$20),f.$7.setFullWidth(!1)};this.$71=function(){f.$12!=null&&b("CSS").hide(f.$12)};this.$72=function(){b("ReactDOM").unmountComponentAtNode(f.$13);return};this.$7=a;this.$9=!1;this.$16=this.$7.getID();this.$32=c;this.$33=d;this.$31=this.$7.getVideoListID();this.$34=new Set([this.$16]);this.$4=b("uuid")();this.$28=!1;this.$29=[];this.$27=null;this.$7.addEvent(b("Event").listen(document,"keydown",this.$36.bind(this)));this.$24=b("CSS").setClass(b("DOM").create("div"),"_1e8c _2b-0");this.$20=b("CSS").setClass(b("DOM").create("div"),"_5-lm _3aw0 _6j1g _6j1h");this.$6=b("CSS").setClass(b("DOM").create("div"),"_17am");this.$13=b("CSS").setClass(b("DOM").create("div"),"_76-1");this.$17=b("CSS").setClass(b("DOM").create("div"),"hidden_elem");this.$18=b("TahoeConstants").DEFAULT_BROWSER_TITLE;this.$22=b("DOM").create("div");b("ReactDOM").render(b("React").createElement(b("TahoeSidePanePlaceholder.react"),null),this.$20);b("gkx")("732464")&&b("ReactDOM").render(b("React").createElement(b("LiveVideoInteractiveAlertSidePaneView.react"),{videoID:a.getID()}),this.$13);b("TahoeV2Config").showTahoe2UI&&(this.$25=b("CSS").setClass(b("DOM").create("div"),"_437j"),b("CSS").hide(this.$24),b("DOM").appendContent(this.$7.getContent(),this.$25),b("ReactDOM").render([b("React").createElement(b("VideoInfoBottomPaneShimmer.react"),{key:"shimmer"}),b("React").createElement("div",{className:"_3l-q",key:"inner"})],this.$25));this.$24&&b("DOM").appendContent(this.$7.getContent(),this.$24);b("DOM").appendContent(this.$7.getSideContent(),this.$20);b("DOM").appendContent(this.$20,this.$6);b("DOM").appendContent(this.$20,this.$13);b("DOM").appendContent(this.$7.getContent(),this.$17);b("DOM").appendContent(this.$7.getContent(),this.$22);c=this.$7.getChannelID();d=this.$7.getCaller();this.$7.getMediaController()?(this.$37(this.$7.getID(),!1,c,d,null,e),this.setUpEndScreen(),this.setUpUFI(),this.setCopyrightMessage()):this.updateView(this.$7.getID(),c,d,null,e);this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Arbiter").subscribe("UFIAddComment/focus",function(a,c){a=b("TahoeVideoStore").getState().toObject();a=a.ufiInstanceID;a===c.instanceid&&f.selectCommentTab()}),b("Arbiter").subscribe("quiet-mode-on",this.$38),b("Arbiter").subscribe("quiet-mode-off",this.$39),b("Arbiter").subscribe("quick-comments-visible-changed",function(a,b){return f.$40(b)}),b("UFICentralUpdates").subscribe("actor-changed",function(a,c){return f.$41(c.actorID===b("CurrentUser").getAccountID())}));b("UFISharedDispatcher").register(function(a){a.type==="story_show_comments"&&f.selectCommentTab()})}var c=a.prototype;c.$40=function(a){var c=this.$42();if(c==null)return;a?b("CSS").addClass(c,"_4j8y"):b("CSS").removeClass(c,"_4j8y")};c.setUpUFI=function(){var a=this,b=this.$7.getMediaController();b&&(this.$7.addEvent(b.addListener("commercialBreak/hideUFI",function(){return a.$43(!0)})),this.$7.addEvent(b.addListener("commercialBreak/showUFI",function(){return a.$43(!1)})))};c.$43=function(a){b("gkx")("678266")||b("CSS").conditionClass(this.$6,"_17an",a),this.$24&&b("CSS").conditionClass(this.$24,"_3qt9",a)};c.setCopyrightMessage=function(){__p&&__p();if(this.$8)return;var a=this.$7.getMediaController();a=a;if(!a)return;var c=b("DOM").create("div",{className:"_6ukq"});this.$8=c;b("DOM").appendContent(this.$7.getMediaContent(),c);b("ReactDOM").render(b("React").createElement(b("TahoeCopyrightMessage.react"),{videoController:a}),c)};c.$44=function(){this.$8&&(b("ReactDOM").unmountComponentAtNode(this.$8),this.$8=null)};c.setUpEndScreen=function(){__p&&__p();var a=this;this.$21=!1;var b=this.$7.getMediaController();this.$7.addEvent(b.addListener("stateChange",this.$45.bind(this)));if(b.isLiveVideo())return;this.$7.addEvent(b.addListener("toggleFullscreen",this.$45.bind(this)));var c=b;if(!c)return;c.addListener("updateStatus",function(b){__p&&__p();var d=c.getPlaybackDuration();b=d-b.position;if(b>j){a.$27&&a.$46();return}b=c.getState();if(a.$27||b==="paused")return;a.$47(!1,!0,d>m,o)})};c.$47=function(a,c,d,e){__p&&__p();var f=this;if(this.$27)return;var g=this.$7.getMediaController(),h=g;if(!h)return;var i=b("DOM").create("div",{className:"_4n-p"});g=b("upNextVideoStateStore").getState().upNextVideoBuffer;var j=this.$48(g);b("Bootloader").loadModules(["TahoeUpNextOverlayAndEndScreen.react"],function(g){b("ReactRenderer").constructAndRenderComponent(g,{currentVideoID:f.$7.getID(),videoIDs:b("TahoeV2Config").showMoreUpNext?j:f.$29.slice(0,k),shouldShowUpNextOverlay:d&&!f.$21,countdownTimeoutSec:e,vpc:h,logEvent:function(a){f.$7.logEvent(a)},tahoeController:f.$7,hasCustomBackgroundForUpNextOverlay:a,isCurrentVideoReplayable:c,livingRoomID:f.$14,viewportTrackingConfig:f.$35},i,function(){f.$21=!0})},"TahoeVideoView");g=h.getRootNode();g=g&&g.firstChild;g&&(g.appendChild(i),this.$27=i)};c.$45=function(){var a=this.$7.getMediaController();a=a;!a.isLiveVideo()?this.$24&&b("CSS").conditionClass(this.$24,"_65dt",a.isState("finished")):a.isState("finished")&&!a.isGaming()&&this.$47(!0,!1,!0,o)};c.$46=function(){var a=this.$27;a&&(b("ReactDOM").unmountComponentAtNode(a),b("DOM").remove(a),this.$27=null)};c.$49=function(){b("CSS").addClass(this.$7.getContent(),"_29du"),b("CSS").addClass(this.$20,"_4f4w"),this.$25&&b("CSS").addClass(this.$25,"_1udj"),this.$24&&b("DOM").empty(this.$24)};c.$50=function(){__p&&__p();var a=this;b("CSS").removeClass(this.$7.getContent(),"_29du");b("CSS").removeClass(this.$20,"_4f4w");this.$25&&b("CSS").removeClass(this.$25,"_1udj");var c=b("DOMQuery").find(this.$20,"._3dj6");if(b("gkx")("709572")){var d=this.$35;d&&(this.$30=b("TahoeUpNextViewportTracking").setup(d,c,s),this.$26=b("TahoeUpNextViewportTracking").setup(d,c,r))}if(this.$28){c=b("CSS").removeClass(c,"_3dj6");d=b("DOM").find(this.$17,"._3dj7");b("DOM").setContent(c,d);var e=b("DOMQuery").scry(this.$20,"._8fyn");if(e.length>0){e=b("DOM").create("div",{className:"_8fym"});b("ReactDOM").render(b("React").createElement(b("TahoeUpNextWatchEntryPoint.react"),{sidepaneElement:this.$42()}),e);b("DOM").appendContent(c,e)}b("EventProfiler").informManualInteractionTimestamp(["Tahoe"],!0,"click");this.$28=!1;!this.$2&&d.childNodes&&d.childNodes[0]&&this.$51(d.childNodes[0],function(){b("TimeSlice").guard(a.$52.bind(a),"Tahoe preload next video",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()},function(){return a.selectCommentTab()})}b("TahoeV2Config").showTahoe2UI&&this.$7.resizeMedia()};c.$36=function(a){a.keyCode===b("Keys").ESC&&!a.cancelBubble&&!a.defaultPrevented&&!this.$7.getIsPermalink()&&(this.$7.logEvent("exit_with_esc"),this.$7.onExit())};c.$53=function(a,c){b("TahoeV2Config").showTahoe2UI&&(a&&this.$54(),c&&this.$55())};c.$56=function(c,d,e,f){__p&&__p();if(!b("TahoeV2Config").showMoreUpNext){c=this.$57(c,e,f);c&&c.send()}e=b("DOMQuery").scry(this.$7.getContent(),"._1c_u");e[0]&&b("DOM").replace(e[0],b("DOMQuery").scry(d,"._5-yb")[0]);f=b("DOMQuery").scry(d,"._1w6j");c=b("DOMQuery").scry(d,"._3l-q");this.$53(f[0],c[0]);this.$24&&f[0]&&b("DOM").setContent(this.$24,f[0]);this.$25&&c[0]&&b("DOM").setContent(this.$25,c[0]);e=this.$42();e?b("DOM").replace(e,b("DOMQuery").find(d,"._1rgu")):b("DOM").appendContent(this.$20,b("DOMQuery").find(d,"._1rgu"));document.title=this.$18;a.registerPendingController(this.$19);this.$50();f=b("Tahoe").get();f&&f.emit("insertPreloadedElements")};c.$37=function(a,c,d,e,f,g){__p&&__p();var h=this;g===void 0&&(g=null);this.$3=null;f=this.$58(a,c,f);g&&(g.commentID!=="0"&&f.setInt("comment_id",g.commentID),g.replyCommentID!=="0"&&f.setInt("reply_comment_id",g.replyCommentID));g=this.$7.getStoryIdentifier();g&&f.setString("storyidentifier",g);if(!b("gkx")("678924")){f.setEnum("payloadtype",c?"all":"secondary");g=new(b("AsyncRequest"))(this.$59(f)).setHandler(function(a){a=a.getPayload();var d=a.ufiTray,e=a.infoBottomPane,f=a.sidePane,g=a.video,i=a.autoplayAllowed;h.$53(d,e);c&&h.$60(b("HTML").replaceJSONWrapper(g&&g.markup),i);h.$61(b("HTML").replaceJSONWrapper(f&&f.markup),b("HTML").replaceJSONWrapper(e&&e.markup),b("HTML").replaceJSONWrapper(d&&d.markup),c);h.$62(a)});g.send()}else c&&this.$63(this.$59(f.setEnum("payloadtype","primary"))),this.$64(this.$59(f.setEnum("payloadtype","secondary")),c);if(!b("TahoeV2Config").showMoreUpNext){g=this.$57(a,d,e);g&&g.send()}this.$49()};c.$62=function(a){__p&&__p();a.disablePreload&&(this.$10=!0);a.viewportTrackingConfig&&(this.$35=a.viewportTrackingConfig);this.$9=!!a.hasNearlyCompleteLicensedMusicTag;document.title=a.videoTitle||b("TahoeConstants").DEFAULT_BROWSER_TITLE;var c=this.$7.getContent(),d=this.$35;if(c&&d&&a.ftKey){var e=b("DOMQuery").scry(c,"._5-yb")[0];e&&(e.setAttribute("data-ft",a.ftKey),this.$15=b("TahoeMainPlayerViewportTracking").setup(d,c,s))}this.$50();b("EventProfiler").informManualInteractionTimestamp(["Tahoe"],!0,"click")};c.$60=function(a,c){if(!a)return;var d=b("DOMQuery").scry(this.$7.getContent(),"._1c_u");d[0]&&b("DOM").replace(d[0],a);this.$7.setAutoplayAllowed(c)};c.$61=function(a,c,d,e){if(e){d&&b("DOM").setContent(this.$24,d);if(a){e=this.$42();e?b("DOM").replace(e,a):b("DOM").appendContent(this.$20,a)}}else d&&b("DOM").appendContent(this.$24,d),a&&b("DOM").appendContent(this.$20,a);c&&b("DOM").replace(this.$25.lastChild,c)};c.$42=function(){return b("DOMQuery").scry(this.$20,"._1rgu")[0]};c.$58=function(a,c,d){c=c?this.$65(a):[JSON.stringify(this.$7.getFeedTracking())];return b("XTahoeAsyncController").getURIBuilder().setFBID("id",a).setString("originalmediaid",this.$16).setEnum("playerorigin",this.$32).setString("playersuborigin",this.$33).setString("videolistid",this.$31).setString("sponsoreddata",d).setString("externallogid",this.$7.getExternalLogID()).setEnum("reactionvideochanneltype",this.$7.getReactionVideoChannelType()).setString("reactionvideochannelsubtype",this.$7.getReactionVideoChannelSubtype()).setBool("ispermalink",this.$7.getIsPermalink()).setStringVector("feedtracking",c).setInt("numcopyrightmatchedvideoplayedconsecutively",this.$7.getNumCopyrightMatchedVideosPlayedConsecutively())};c.$59=function(a){var c=this.$7.getUserID();if(c)return b("ActorURI").create(a.getURI(),c);else return a.getURI()};c.$54=function(){b("CSS").show(this.$24),b("CSS").hide(this.$25),b("CSS").removeClass(this.$7.getContent(),"_-pb")};c.$55=function(){b("CSS").show(this.$25),b("CSS").hide(this.$24),b("CSS").addClass(this.$7.getContent(),"_-pb")};c.$51=function(a,c,d){a=b("DOMQuery").scry(a,"a")[0];a?(this.$3=a.getAttribute("href"),c&&c()):d&&d()};c.setUpNextChainingInfoFromReactElement=function(a){var c=this;this.$51(a,function(){b("TimeSlice").guard(c.$52.bind(c),"Tahoe preload next video",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()},function(){return c.selectCommentTab()})};c.$57=function(a,c,d){__p&&__p();var e=this,f=b("ge")(p+a);if(f){var g=f.parentNode,h=Array.from(g.children);h.some(function(c){if(c.id!==p+a){b("DOM").remove(c);return!1}else return!0});b("DOM").remove(g.firstChild);b("DOM").appendContent(this.$17,g);if(g.children.length>=10){this.$66(Array.from(g.children));this.$28=!0;return null}}else!f&&a!==this.$16&&(this.$7.resetChannelData(),this.$5=null,c=null,d=null);h=b("XTahoeUpNextAsyncController").getURIBuilder().setFBID("media_id",a).setFBIDSet("viewed_videos",Array.from(this.$34)).setString("channel_id",c).setEnum("caller",d).setString("cursor",this.$5).setString("search_keywords",this.$7.getSearchKeywordsForVideoChaining());g=new(b("AsyncRequest"))(h.getURI()).setHandler(function(a){__p&&__p();a=a.getPayload();e.$5=a.chainingCursor;a.viewportTrackingConfig&&(e.$35=a.viewportTrackingConfig);a=b("HTML").replaceJSONWrapper(a.upNextUnit.markup);e.$28=!0;var c=b("DOMQuery").scry(e.$20,"._3dj6"),d=b("DOMQuery").scry(e.$17,"._3dj7");if(d[0]){b("DOM").appendContent(e.$17,a);d=b("DOMQuery").scry(e.$17,"._3dj7");var f=Array.from(d[1].children);f.forEach(function(a){b("DOM").appendContent(d[0],a)});b("DOM").remove(d[1]);a=d[0];var g={};Array.from(a.children).forEach(function(a){g[a.id]?b("DOM").remove(a):g[a.id]=!0});b("DOM").remove(d[0])}f=null;if(c[0]){c=b("CSS").removeClass(c[0],"_3dj6");b("DOM").setContent(c,a);var h=b("DOMQuery").scry(e.$20,"._8fyn");if(h.length>0){h=b("DOM").create("div",{className:"_8fym"});b("ReactDOM").render(b("React").createElement(b("TahoeUpNextWatchEntryPoint.react"),{sidepaneElement:e.$42()}),h);b("DOM").appendContent(c,h)}e.$28=!1;f=c}else b("DOM").appendContent(e.$17,a),f=e.$17;b("gkx")("695515")&&(f=e.$20);d=b("DOMQuery").scry(f,"._3dj7");d[0]&&e.$66(Array.from(d[0].children));if(!b("gkx")("709572")){h=e.$35;h&&(e.$30=b("TahoeUpNextViewportTracking").setup(h,f,s),e.$26=b("TahoeUpNextViewportTracking").setup(h,f,r))}b("DOMQuery").scry(e.$20,"._3dj7");c=b("DOMQuery").scry(e.$20,"._bne");b("EventProfiler").informManualInteractionTimestamp(["Tahoe"],!0,"click");!e.$2&&c.childNodes&&c.childNodes[0]&&e.$51(c.childNodes[0],function(){b("TimeSlice").guard(e.$52.bind(e),"Tahoe preload next video",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()},function(){return e.selectCommentTab()})});return g};c.$63=function(a){var c=this;new(b("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();var d=a.video;a=a.autoplayAllowed;c.$60(b("HTML").replaceJSONWrapper(d&&d.markup),a)}).send()};c.$64=function(a,c){var d=this;new(b("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();var e=a.ufiTray,f=a.infoBottomPane,g=a.sidePane;d.$53(e,f);d.$61(b("HTML").replaceJSONWrapper(g&&g.markup),b("HTML").replaceJSONWrapper(f&&f.markup),b("HTML").replaceJSONWrapper(e&&e.markup),c);d.$62(a)}).send()};c.$48=function(a){var b=this;return a.map(function(a){return a.id&&a.id.substring(p.length)}).filter(function(a){return b.$67(a)})};c.$68=function(a){a=a.id&&a.id.substring(q.length);return this.$67(a)?a:null};c.$67=function(a){return!a?!1:l.test(a)};c.$66=function(a){this.$29=this.$48(a),this.$29.length<a.length&&(this.$14=this.$68(a[0]),this.$2=!0)};c.getCurrentVideoHasCopyrightMusicMatch=function(){return this.$9};c.setUpNextVideoIDs=function(a){this.$29=this.$48(a)};c.getUpNextVideoIDs=function(){return this.$29};c.$52=function(){__p&&__p();var a=this;if(this.$10)return;var c=new(b("URI"))(this.$3),d=b("VideoPermalinkURI").parse(c);if(d===null)return;var e=d.video_id;if(!e)return;d=c.getQueryData().sp;c=this.$58(e,!0,d).setEnum("payloadtype","all").setBool("preload",!0);d=new(b("AsyncRequest"))(c.getURI()).setHandler(function(c){__p&&__p();c=c.getPayload();var d=b("DOM").create("div",{id:"preload-"+e,"class":n});b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.video.markup));c.ufiTray&&b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.ufiTray.markup));c.infoBottomPane&&b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.infoBottomPane.markup));b("DOM").appendContent(d,b("HTML").replaceJSONWrapper(c.sidePane.markup));b("DOM").appendContent(a.$17,d);d=typeof c.autoplayAllowed==="boolean"?c.autoplayAllowed:!0;a.$18=c.videoTitle||b("TahoeConstants").DEFAULT_BROWSER_TITLE;a.$7.setAutoplayAllowed(d);a.$9=!!c.hasNearlyCompleteLicensedMusicTag});d.send()};c.$65=function(a){var c=null;a=b("ge")(p+a);a&&a.getAttribute("data-ft")&&(c=['{"ft":'+a.getAttribute("data-ft")+"}"]);return c};c.selectAddComment=function(){var a=b("DOMQuery").scry(this.$20,".UFIAddCommentInput");a[0]&&a[0].click();this.selectCommentTab()};c.selectCommentTab=function(){var a=this.$42();a&&(b("CSS").addClass(a,"_7r9y"),b("CSS").removeClass(a,"_601i"),b("CSS").removeClass(a,"_6yny"),b("Arbiter").inform("TahoeView/selectCommentTab"))};c.selectUpNextTab=function(){var a=this.$42();a&&(b("CSS").addClass(a,"_601i"),b("CSS").removeClass(a,"_7r9y"),b("CSS").removeClass(a,"_6yny"))};c.selectFriendPresenceTab=function(){var a=this.$42();a&&(b("CSS").addClass(a,"_6yny"),b("CSS").removeClass(a,"_601i"))};c.setCommentOverlayActive=function(a){var c=this.$42();if(!c)return;a?b("CSS").addClass(c,"_2l-1"):b("CSS").removeClass(c,"_2l-1")};c.updateView=function(a,c,d,e,f){e===void 0&&(e=null);f===void 0&&(f=null);this.$46();this.$34.add(a);var g=b("DOMQuery").scry(this.$17,"#preload-"+a);g[0]&&this.$19?(this.$56(a,g[0],c,d),this.$69()):(this.$69(),this.$30&&this.$30.cleanup(),this.$26&&this.$26.cleanup(),this.$15&&this.$15.cleanup(),this.$37(a,!0,c,d,e,f));this.$43(!1)};c.$69=function(){this.$19=null;var a=b("DOMQuery").scry(this.$17,"."+n);Array.from(a).forEach(function(a){b("DOM").remove(a)})};c.toggleNativeSupportFlyout=function(){var a=b("DOMQuery").scry(this.$20,".UFICommentSupportButton");a.length>0&&(a[0].dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),a[0].dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),a[0].click())};c.loadStickerGallery=function(a){var c=this;b("Bootloader").loadModules(["TahoeStickerGallery"],function(b){b.loadStickerGallery(c.$22,a)},"TahoeVideoView")};c.$70=function(a,c){var d=this;this.$12==null?(this.$12=b("DOM").create("div"),b("DOM").prependContent(this.$20,this.$12),b("Bootloader").loadModules(["TahoeWoodhengeSignupViewRenderer"],function(b){b.render(a,c,d.$12,d.$71)},"TahoeVideoView")):this.$12!=null&&b("CSS").show(this.$12)};c.$41=function(a){var c=this.$23;if(!c)return;a!==b("CSS").shown(c)&&b("CSS").toggle(c)};c.getBottomTrayHeight=function(){return this.isRenderingBottomInfoPane()?this.$25&&this.$25.clientHeight:this.$24.clientHeight};c.isRenderingBottomInfoPane=function(){return!b("CSS").shown(this.$24)};c.showGamingModerationRulesNux=function(a,c){var d=this;c=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("span",null)},b("React").createElement(i,{onDismiss:this.$72,onConfirm:function(){d.$72(),a()},videoID:c}));b("ReactDOM").render(c,this.$13)};c.onExit=function(){this.$1.release(),this.$46(),this.$44()};a.registerCommentLink=function(a){var c=b("Tahoe").get();c&&c.addEvent(b("Event").listen(a,"click",function(){return c.getView().selectAddComment()}))};a.registerBecomeSupporterLink=function(c,d){var e=b("Tahoe").get();if(e==null)return;var f=e.getView();if(!(f instanceof a))return;var g=e.getMediaController().getMediaID();e.addEvent(b("Event").listen(c,"click",function(){f.$70(d,g)}))};a.registerPendingController=function(a){var c=b("Tahoe").get();c&&a&&(c.updateMedia(a),c.emit("TahoeController/mediaControllerRegistered"))};a.registerPreloadController=function(a){var c=b("Tahoe").get();c&&(c.getView().$19=a)};a.registerSidepaneTabbar=function(c){var d=b("Tahoe").get();if(d!=null){var e=d.getView();e instanceof a&&c.subscribe(b("TabBar").TAB_CLICK,function(a,b){switch(b){case"up-next":e.selectUpNextTab();break;case"comments":e.selectCommentTab()}})}};a.registerSupportLink=function(c){var d=b("Tahoe").get();if(d==null)return;var e=d.getView();if(!(e instanceof a))return;e.$23=c;d.addEvent(b("Event").listen(c,"click",function(){e.toggleNativeSupportFlyout(),new(b("VideoTipJarTypedLogger"))().setTipJarEvent("support_button_clicked").setVideoID(d.getMediaController().getMediaID()).log()}))};a.registerShowCommentsTabLink=function(a){var c=b("Tahoe").get(),d=c&&c.getView();c&&d&&c.addEvent(b("Event").listen(a,"click",function(){return d.selectCommentTab()}))};a.registerShowMainTabLink=function(a){var c=b("Tahoe").get(),d=c&&c.getView();c&&d&&c.addEvent(b("Event").listen(a,"click",function(){return d.selectUpNextTab()}))};a.registerShowFriendPresenceTabLink=function(a,c,d,e,f,g){var h=b("Tahoe").get(),i=h&&h.getView(),j=function(){i&&i.selectFriendPresenceTab(),b("VodPncSeeAllReactionsClickFalcoEvent").log(function(){return{video_id:c,number_of_friends:d,friend_presence_type_first:e,friend_presence_type_second:f,friend_presence_type_third:g}})};h&&i&&h.addEvent(b("Event").listen(a,"click",j))};a.registerGamingModerationRulesNux=function(a){var c=b("Tahoe").get(),d=c&&c.getView(),e,f=function(){return e&&e.remove()},g=function(){c&&d&&d.showGamingModerationRulesNux(f,c.getID())};e=b("Event").listen(a,"click",g);c&&c.addEvent(e)};a.loadView=function(b,c,d,e){return new a(b,c,d,e)};return a}();e.exports=a}),null);