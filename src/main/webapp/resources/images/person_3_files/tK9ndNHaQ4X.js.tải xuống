if (self.CavalryLogger) { CavalryLogger.start_js(["hpT9W"]); }

__d("MessengerWebDeltasTypedLoggerBootloader.bs",["Bootload.bs","Bootloader"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["MessengerWebDeltasTypedLogger"],a,"MessengerWebDeltasTypedLoggerBootloader.bs");return 0}c=[a];d=b("Bootload.bs").Create(c);f.BootloadableMessengerWebDeltasTypedLogger=c;f.LoadableMessengerWebDeltasTypedLogger=d}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_array","bs_block","bs_curry","Utils.bs","FBJSON","Arbiter","gkx","bs_js_dict","qex","bs_belt_Map","bs_belt_Set","bs_caml_obj","JSLogger","ThreadId.bs","FBIDCheck","immutable","bs_belt_Array","bs_caml_array","ChatConfig","LogHistory","MercuryIDs","bs_pervasives","bs_belt_Option","AsyncRequest","bs_js_primitive","MessagingTag","TypingStates","MercuryAssert","MercuryViewer","ParticipantId.bs","bs_belt_MapString","bs_caml_primitive","MercuryFilters.bs","ImmutableObject","MercuryLocalIDs","ChannelConstants","MessengerFolders.bs","MessengerMessage.bs","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryMessageIDs.bs","MercuryThreadInfo","MessengerPersonas.bs","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryActionStatus","MessageRequestUtils","MessagingThreadType","MercuryPayloadSource","MessengerEnvironment","MessengerThreadUtils.bs","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","MercuryGlobalActionType","ThreadConnectivityStatus.bs","MercuryMessageClientState","MessengerGroupsSyncStatus","MercuryThreadlistConstants","MessageUnsendabilityStatus","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MessengerDesktopNotifications","ChatReliabilityInstrumentation","RemovedMessageTombstoneContent","MessengerThreadCannotReplyReason.bs","RepliedToMessageStatusForGraphQL","XMercuryThreadLikeIconController","MessengerSharedMediaActionsLoader","MessengerSharedPhotosVideosBaseData.bs","MercuryDisplayTimeFilterMessageRenderer","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c={};b("bs_belt_Map").forEach(a,function(a,b){c[a]=b;return 0});return c}function a(a){return h(a[7])}function c(a,c){return b("bs_js_null_undefined").fromOption(b("bs_belt_Map").get(a[7],c))}function d(a){return a[0]}function e(a){return a[1]}function i(a){return a[2]}function j(a){return a[3]}function k(a){return a[4]}function l(a){return a[5]}function m(a){return a[6]}function n(a){return a[8]}function aa(a){return a[9]}function ba(a){return a[10]}function ca(a){return a[11]}function o(a){return a[12]}function p(a){return a[13]}function q(a){return a[14]}function r(a){return a[15]}function da(a){return a[16]}function ea(a){return a[17]}function fa(a){return a[18]}function s(a){b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid}));return 0}function ga(a,c,d){d=d.reduce(b("bs_belt_Set").remove,c.reduce(b("bs_belt_Set").add,a[3]));if(d===a[3])return a;else return[a[0],a[1],a[2],d,a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}var ha=function(a,b){delete a[b];return 0};function ia(a,c,d){var e=b("bs_belt_MapString").get(a,c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("bs_belt_Map").get(e,d);if(f!==void 0)return b("bs_belt_MapString").set(a,c,b("bs_belt_Map").remove(e,d));else return a}else return a}function ja(a,c){__p&&__p();var d=c.thread_fbid;if(d==null)if(c.type==="typ"||c.type==="page_typing"){c=b("FBID.bs").ofString(c.from.toString());if(c!==void 0)return b("MercuryIDs").getThreadIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null;else{c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}}var ka=b("MercuryFilters.bs").getSupportedFilters(0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups]),la=b("MessengerFolders.bs").getSupportedFolders(0).concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);function ma(){var a={};la.forEach(function(b){var c={};ka.forEach(function(a){c[a]={threadlist:[],reachedEnd:!1,existingIDs:new Set()};return 0});a[b]=c;return 0});return a}function na(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.invalidatedThread(c);return 0}function t(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c);return 0}function oa(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c);return 0}function pa(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e);return 0}function qa(a,c){__p&&__p();var d=new Map();c.forEach(function(a,b){d.set(a,b);return 0});return c.sort(function(c,e){__p&&__p();var f=b("bs_belt_Map").get(a[7],c),g=b("bs_belt_Map").get(a[7],e);if(f!==void 0&&g!==void 0){g=b("bs_js_primitive").valFromOption(g).timestamp-b("bs_js_primitive").valFromOption(f).timestamp;if(g>0)return 1;else if(g<0)return-1;else return 0}else f=1;if(f===1){g=d.get(c);f=d.get(e);return b("bs_belt_Option").getExn(g==null?void 0:b("bs_js_primitive").some(g))-b("bs_belt_Option").getExn(f==null?void 0:b("bs_js_primitive").some(f))|0}})}function ra(a,b,c,d){__p&&__p();a=a[12][c];if(a!==void 0){var e=a[d];if(e!==void 0){b.forEach(function(a){if(e.existingIDs.has(a)){e.existingIDs["delete"](a);a=e.threadlist.indexOf(a);e.threadlist.splice(a,1);return 0}else return 0});return 0}else return 0}else return 0}function u(a,c,d,e){__p&&__p();a=a!==void 0?a:function(){return!0};var f=b("bs_belt_Map").get(c[7],d);if(f!==void 0){f=b("bs_js_primitive").valFromOption(f);if(b("bs_curry")._1(a,f)){a=b("ImmutableObject").set(f,e);f=b("bs_belt_Map").set(c[7],d,a);t(c[0],d);return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],f,c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]]}else return c}else return c}function sa(a,c,d){__p&&__p();var e=new Set(c.participants);Object.assign(c,{participants:Array.from(c.participants)});d.forEach(function(d){if(e.has(d))return 0;else{c.participants.push(d);if(b("bs_caml_obj").caml_equal(d,a)){Object.assign(c,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});return 0}else return 0}});return 0}function ta(a,b,c,d){__p&&__p();la.forEach(function(e){if(e!==c)return ra(a,b,e,d);else return 0});var e=a[12][c];if(e!==void 0){e=e[d];e=e!==void 0?[e.threadlist,e.existingIDs]:[[],new Set()]}else e=[[],new Set()];var f=e[1],g=e[0];b.forEach(function(a){if(f.has(a))return 0;else{f.add(a);g.push(a);return 0}});return[qa(a,g),f]}function ua(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e.add(b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}var va=b("MessengerFolders.bs").getSupportedFolders(0).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED});function wa(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e["delete"](b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}function xa(a,c,d){var e=b("MessengerFolders.bs").getFromMeta(c);if(d!==e){va.includes(e)&&c.unread_count>0&&ua(a,e,b("bs_js_primitive").some(c.thread_id));if(va.includes(d))return wa(a,d,b("bs_js_primitive").some(c.thread_id));else return 0}else return 0}function ya(a,c){__p&&__p();var d=b("MessengerFolders.bs").getFromMeta(c);if(la.includes(d)){ka.forEach(function(e){var f=a[12][d][e],g=f.existingIDs.has(c.thread_id);ta(a,[c.thread_id],d,e);var h=b("bs_caml_obj").caml_equal(b("bs_caml_array").caml_array_get(f.threadlist,f.threadlist.length-1|0),c.thread_id);if(!f.reachedEnd&&!g&&h)return ra(a,[c.thread_id],d,e);else return 0});return 0}else return 0}function za(a,c,d){__p&&__p();var e=b("bs_belt_Map").get(a[7],c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("MessengerFolders.bs").getFromMeta(e);if(f!==d){var g=e.comm_status;g=g==null?b("ImmutableObject").set(e,{folder:d}):d===b("MessagingTag").OTHER?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").SPAM}):d===b("MessagingTag").INBOX?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").TODO}):b("ImmutableObject").set(e,{folder:d});var h=e.other_user_fbid;h=h==null?[]:d===b("MessagingTag").OTHER?[b("MercuryIDs").getParticipantIDFromUserID(h)]:[];var i=e.other_user_fbid;d=i==null?[]:d===b("MessagingTag").OTHER?[]:[b("MercuryIDs").getParticipantIDFromUserID(i)];i=ga(a,h,d);h=b("bs_belt_Map").set(i[7],c,g);xa(i,g,f);ya(i,g);t(i[0],c);return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],h,i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15],i[16],i[17],i[18]]}else{ya(a,e);return a}}else return a}function v(c,a,d){__p&&__p();d=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):d!==void 0?d:a.body;var e=a.raw_attachments;e=!(e==null)&&e.length!==0?b("MercuryAttachment").convertRaw(e):a.attachments;var f=a.removed_timestamp;if(f==null){f=a.log_message_type;d={snippet:d,snippet_attachments:e,snippet_sender:f==null?a.author:null}}else d={snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(a.author),snippet_attachments:null,snippet_sender:null};return Object.assign(c,d)}function Aa(a,c,d){var e=a.event_title,f=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:c.track_rsvp,title:e==null?c.title:e,event_time:f==null?c.event_time:parseInt(f,10),location_name:a==null?c.location_name:a,event_members:d!==void 0?b("bs_js_primitive").valFromOption(d):c.event_members,oid:c.oid,event_type:c.event_type}}function w(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a];return 0});c[a.guest_id]=a.guest_status;return c}var Ba=function(a,b){delete a[b];return 0},Ca=function(a,b){delete a[b];return 0};function Da(a){__p&&__p();var c=[-1],d=[null],e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c[0]<0||c[0]>b)){c[0]=b;d[0]=a;return 0}else return 0});return d[0]}function Ea(a,c,d){d=b("XMercuryThreadLikeIconController").getURIBuilder().setString("emoji",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(d){var e=b("MercuryDispatcher").getForFBID(a);e.handleUpdate({actions:[{action_type:b("MercuryActionType").UPDATE_CUSTOM_LIKE,thread_id:c,custom_like:d.getPayload()}],from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE});return 0}).send();return 0}function Fa(c,d,a,e){__p&&__p();a=a.log_message_data;if(a==null)return 0;else{var f=a.untypedData;if(a.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){var g=d.custom_nickname;if(!(g==null)){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(g));var h=f.nickname;h.trim().length>0?g[f.participant_id]=h:b("bs_curry")._2(Ca,g,f.participant_id);Object.assign(d,{custom_nickname:g})}t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)Ea(c,e,f.thread_icon);else if(a.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("ChatConfig").get("chat_tab_has_gradients")){h=f.theme_color;if(h==null)Object.assign(d,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(h.length>0){g="#"+h.slice(2);Object.assign(d,{solid_color:g,header_color:g,footer_color:g,gradient_colors:[g]})}else Object.assign(d,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});t(c,e)}}else if(f!==void 0)if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var i={},j=f.event_creator_id;d.participants.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{var c=b("bs_caml_obj").caml_equal(a,j);i[a]=c?"GOING":"INVITED";return 0}});h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));g=f.event_time;g={track_rsvp:f.event_track_rsvp,title:f.event_title,event_time:g==null?0:parseInt(g,10),location_name:f.event_location_name,event_members:i,oid:f.event_id,event_type:f.event_type};Object.assign(d,{lightweight_event:g});h[f.event_id]=Object.assign({},g);Object.assign(d,{lightweight_events:h});t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){g=d.lightweight_event;if(!(g==null)){h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));g.oid===f.event_id&&Object.assign(d,{lightweight_event:Aa(f,g,b("bs_js_primitive").some(g.event_members))});g=h[f.event_id];g!==void 0&&(h[f.event_id]=Aa(f,g,void 0),Object.assign(d,{lightweight_events:h}))}t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));h=d.lightweight_event;if(!(h==null)&&h.oid===f.event_id){var k=w(h.event_members,f);Object.assign(d,{lightweight_event:Aa(f,h,b("bs_js_primitive").some(k))})}h=g[f.event_id];if(h!==void 0){k=w(h.event_members,f);g[f.event_id]=Aa(f,h,b("bs_js_primitive").some(k));Object.assign(d,{lightweight_events:g})}t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));b("bs_curry")._2(Ba,h,f.event_id);Object.assign(d,{lightweight_event:Da(h),lightweight_events:h});t(c,e)}return 0}}function Ga(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.updatedMessage(c,d,b("bs_js_null_undefined").fromOption(e));return 0}function x(c,a){c=b("MercuryThreadInformer").getForFBID(c);c.receivedMessage(a);return 0}function Ha(a,c,d){a=b("MercuryThreadInformer").getForFBID(a);a.reorderedMessages(c,d);return 0}var Ia=function(a,b){delete a[b];return 0};function Ja(a,c){var d=a[10].get(c);return b("bs_js_primitive").nullable_to_opt(a[9].get(b("bs_belt_Option").getWithDefault(d==null?void 0:b("bs_js_primitive").some(d),c)))}function Ka(a,c,d){a=a!==void 0?a:!1;d=b("bs_belt_Array").keepMap(d,function(a){return Ja(c,a)});if(a)return d.slice().reverse();else return d}function La(a,c){return b("bs_belt_Array").keepMap(c,function(b){return Ja(a,b)}).sort(function(a,c){return b("MessengerMessage.bs").compare(c,a)}).map(function(a){return a.message_id})}function Ma(a,b){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9].set(b[0],b[1]),a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}function y(b,a){b[10].set(a.message_id,a.message_id);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}var Na=function(a,b){delete a[b];return 0};function z(c,d){__p&&__p();var a=c[15];Object.keys(d).forEach(function(e){__p&&__p();var f=d[e];if(f!==void 0){var g=f[0],h=g[2],i=g[1];g=a.get(g[0]);if(g==null)return 0;else{g=g[1];if(g.length>=(i+h|0)){b("bs_curry")._2(Na,d,e);return b("bs_curry")._1(f[1],Ka(!0,c,g.slice(i,i+h|0)))}else return 0}}else return 0});return 0}function Oa(d,c,e){__p&&__p();var a=e[1],f=e[0];b("MessengerMessage.bs").finalizeRanges(a);var g=a.offline_threading_id;if(!(g==null)&&g!==a.message_id){d[10].set(g,a.message_id);b("MercuryMessageIDs.bs").addServerID(g,a.message_id);g=a.threading_id;g==null||b("MercuryMessageIDs.bs").addServerID(g,a.message_id)}g=d[9].has(f);var h=d[0],i=d[1],j=d[2],k=d[3],l=d[4],m=d[5],n=d[6],aa=d[7],ba=d[8],ca=d[9].set(f,a),o=d[10],p=d[11],q=d[12],r=d[13],da=d[14],ea=d[15],fa=d[16],s=d[17];d=d[18];h=[h,i,j,k,l,m,n,aa,ba,ca,o,p,q,r,da,ea,fa,s,d];if(!g&&e[2]===1){i=b("MercuryIDs").isLocalThread(a.thread_id);j=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(a.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(ea.get(a))}),[i?1:0,[]]);k=a.thread_id;if(!(k==null)){l=La(h,[f].concat(j[1].filter(function(c){return b("bs_caml_obj").caml_notequal(c,a.offline_threading_id)})));ea.set(k,[j[0],l])}z(h,c[3][0])}return h}function Pa(b,c,a){b[11].set(c,a);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}function Qa(a,c){var d=c[1];c=c[0];var e=a[11].get(c);b("bs_belt_Option").isSome(e==null?void 0:b("bs_js_primitive").some(e))||g(0,1777);a[11]["delete"](c);if(e==null)return b("bs_pervasives").failwith("Message must exist to update");else return Object.assign(e,{image_ids:d.image_ids,file_ids:d.file_ids,audio_ids:d.audio_ids,gif_ids:d.gif_ids,video_ids:d.video_ids,client_state:b("MercuryMessageClientState").SEND_TO_SERVER})}function Ra(a,c){__p&&__p();var d=c[0],e=a[15].get(d);if(e==null)return a;else{var f=b("bs_belt_Array").keepMap(c[1],function(b){return Ja(a,b)}).map(function(a){return a.message_id}),g=La(a,e[1].filter(function(a){return f.indexOf(a)===-1}));a[15].set(d,[e[0],g]);Ha(a[0],d,b("bs_js_null_undefined").fromOption(c[2]));return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}}function Sa(c,d){__p&&__p();var e={snippet:"...",snippet_attachments:null,snippet_sender:null};d=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(c[15].get(d)),function(a){return b("bs_belt_Array").get(Ka(void 0,c,a[1]),0)});if(d!==void 0){var a=b("bs_js_primitive").valFromOption(d);a=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):a.body}else a=null;if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var f=d.removed_timestamp;if(f==null)if(a==null)return e;else{f=d.log_message_type;return{snippet:a,snippet_attachments:d.attachments,snippet_sender:f==null?d.author:null}}else return{snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(d.author),snippet_attachments:null,snippet_sender:null}}else return e}function Ta(c,a){__p&&__p();var d=a.attachments;if(d==null)return 0;else{var e=b("bs_belt_Array").keepMap(d,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)&&b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.fbid)}});b("MessengerSharedMediaActionsLoader").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),e);if(c!==void 0)return b("MessengerSharedPhotosVideosBaseData.bs").localRemove(b("bs_js_primitive").valFromOption(c),b("bs_belt_Array").keepMap(d,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.fbid)}}));else return 0}}function Ua(a,c,d){__p&&__p();d=a[15].get(d);if(d==null)return a;else{d=d[1];var e=[!0];return b("bs_belt_Array").reduce(d,a,function(a,d){__p&&__p();if(e[0]){var f=a[10].get(d);f=b("bs_belt_Option").getWithDefault(f==null?void 0:b("bs_js_primitive").some(f),d);if(f===c){e[0]=!1;return a}else{d=Ja(a,f);if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var g=d.replied_to_message,h;if(g==null)h=void 0;else{g=g.message;if(g==null)h=void 0;else{var i=a[10].get(g.message_id);h=b("bs_belt_Option").getWithDefault(i==null?void 0:b("bs_js_primitive").some(i),g.message_id)}}if(h!==void 0&&h===c){i={status:b("RepliedToMessageStatusForGraphQL").DELETED,message:null};g=Object.assign(Object.assign({},d),{replied_to_message:i});return Ma(a,[f,g])}else return a}else return a}}else return a})}}function Va(d,c,e,f){__p&&__p();var g=e.client_message_id,h;if(g==null)h=d;else{var i=Ja(d,g);if(i!==void 0){i=b("bs_js_primitive").valFromOption(i);var j=e.message_id,k=e.status;if(b("bs_caml_obj").caml_equal(i.status,b("MercuryActionStatus").SUCCESS))h=d;else if(d[9].has(j)){var a=Object.assign(Object.assign({},i),e);Ga(d[0],a.thread_id,a.message_id,f);h=Ma(d,[j,a])}else{a=b("bs_caml_obj").caml_equal(e.status,b("MercuryActionStatus").SUCCESS);a=a?e.error_data:null;b("MercuryMessageIDs.bs").addServerID(g,j);d[10].set(g,j);i=Object.assign(Object.assign({},i),{status:k,error_data:a,timestamp:e.timestamp,log_message_data:e.log_message_data,ranges:e.ranges,attachments:e.attachments,is_one_way_sent:e.is_one_way_sent,is_forwarded:e.is_forwarded});b("MessengerMessage.bs").finalizeRanges(i);k=Ma(d,[j,i]);k[9].set(g,{});k[9]["delete"](g);a=i.thread_id;var l=k[15].get(a);if(!(l==null)){var m=La(k,l[1]);k[15].set(a,[l[0],m])}Ga(k[0],i.thread_id,i.message_id,f);a=b("MessengerMessage.bs").isTitanMessage(i);l=c[2].get(i.thread_id);a&&(l==null||c[2].set(i.thread_id,l-1|0));h=[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10].set(g,j),k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]]}}else h=d}m={};f=e.log_message_type;if(f==null)Object.assign(m,{snippet_attachments:e.attachments});else{if(b("bs_caml_obj").caml_equal(f,b("MercuryLogMessageType").THREAD_IMAGE)){a=e.log_message_data;if(a==null)c=null;else{i=a.image;c=i==null?null:i.preview_url}Object.assign(m,{image_src:c});t(h[0],e.thread_id)}b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").UNSUBSCRIBE)&&Object.assign(m,{snippet_attachments:e.attachments})}return u(void 0,h,e.thread_id,m)}function Wa(c,a,d,e){__p&&__p();if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").SEND_MESSAGE))return Va(c,a,d,e);else{var f=d.offline_threading_id;f=b("bs_belt_Option").flatMap(f==null?void 0:b("bs_js_primitive").some(f),function(a){return b("bs_js_primitive").nullable_to_opt(c[10].get(a))});var g=Ja(c,d.message_id);if(f!==void 0)if(g!==void 0){f=b("bs_js_primitive").valFromOption(g);if(b("bs_js_primitive").nullable_to_opt(f.sticker_id)!==void 0){var h=Object.assign(f,{attachments:d.attachments});return Ma(c,[f.message_id,h])}else return c}else return c;else if(g!==void 0)return c;else{f=b("bs_caml_obj").caml_equal(e,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))?y(c,d):c;h=b("bs_caml_obj").caml_equal(d.client_state,b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER);g=d.upload_id;e=h&&!(g==null)?Pa(f,g,d):f;h=b("MessengerMessage.bs").isErrorLogMessage(d);g=d.thread_id;h&&(g==null||(a[6][0][g]=!0));f=d.manual_retry_cnt;h=d.thread_id;f==null||!(h==null)&&f>0&&Ha(e[0],h,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE);g=Oa(e,a,[d.message_id,d,1]);x(g[0],d);return g}}}function Xa(a,c,d,e){__p&&__p();if(c!==void 0){c=b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(c),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE);var f=d.thread_id;if(c&&!(f==null)){c=b("MercuryThreadInformer").getForFBID(a);return b("bs_curry")._3(e,c,f,d)}else return 0}else return 0}function Ya(a,b){var c=a.participants.indexOf(b);if(c>0){Object.assign(a,{participants:[b].concat(a.participants.slice(0,c),a.participants.slice(c+1|0))});return 0}else return 0}function Za(a,c,d,e){__p&&__p();var f=c.thread_id;if(f==null)return a;else{var g=b("bs_belt_Map").get(a[7],f);if(g!==void 0){g=b("bs_js_primitive").valFromOption(g);var h={};!c.skip_bump_thread&&b("bs_caml_obj").caml_notequal(d,b("bs_js_primitive").some(b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))&&(v(h,c,b("bs_js_primitive").nullable_to_opt(c.log_message_body)),c.timestamp>g.timestamp&&(Object.assign(h,{timestamp:c.timestamp}),c.is_unread&&Object.assign(h,{unread_count:g.unread_count+1|0})),Object.assign(h,{message_count:g.message_count+1|0,is_archived:!1}));e!==!0&&(c.timestamp>h.server_timestamp&&Object.assign(h,{server_timestamp:c.timestamp}));if(b("bs_caml_obj").caml_notequal(h,{}))return u(void 0,a,f,h);else return a}else return a}}function $a(a,b,c){var d=new Set(c);Object.assign(b,{participants:b.participants.filter(function(a){return!d.has(a)})});if(d.has(a)){Object.assign(b,{can_reply:!1,is_subscribed:!1});return 0}else return 0}function ab(c,a,d){a=a.specific_to_list;if(a==null){d=b("MercuryIDs").tokenize(d);if(d.type!=="user"||d.value.length===0)return[c];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d.value)),c]}else return a}function bb(c,a,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=a.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(c,g);if(g||f)c=ab(c,a,d);else{var h=a.specific_to_list;c=h==null?[]:h}return new(b("ImmutableObject"))({admins:{},admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:!0,cannot_reply_reason:null,can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],group_approval_queue:null,group_thread_subtype:null,work_associated_group:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_message_id:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,thread_associated_job_applications:null,thread_associated_page_admin:null,thread_connectivity_data:null,thread_fbid:null,thread_type:null,thread_pin_timestamp:null,thread_id:d,participants:c,name:"",snippet:a.body,snippet_attachments:[],snippet_sender:a.author,unread_count:0,message_count:0,image_src:null,timestamp:a.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_canonical:g,is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,object_association_type:null,joinable_link:null,linked_mentorship_programs:null,thread_unsendability_status:null,is_business_page_active:!1,graphql_token:null})}function cb(c,d,a,e){__p&&__p();e=b("MessengerMessage.bs").hasServerTimestamp(a,e);var f=a.thread_id;if(f==null)return void 0;else{b("MercuryAssert").isThreadID(f);d=b("bs_belt_Map").get(d,f);if(d!==void 0)return b("bs_js_primitive").some(b("bs_js_primitive").valFromOption(d));else if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e)return b("bs_js_primitive").some(bb(b("MercuryIDs").getParticipantIDFromUserID(c),a,f));else return void 0}}function db(a,c){__p&&__p();var d=c.other_user_fbid;if(d==null){var e=c.thread_fbid;e=e==null?void 0:b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromThreadFBID(e))}else e=b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(d));d=c.thread_id;e=d==null?e:d==null?void 0:b("bs_js_primitive").some(d);d=c.thread_id;var f;if(d==null)f="";else{d=b("bs_belt_Map").get(a[7],d);f=d!==void 0?b("MessengerFolders.bs").getFromMeta(b("bs_js_primitive").valFromOption(d)):c.folder}va.includes(f)&&((b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE))&&c.is_unread&&ua(a,f,e));return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}var eb=function(a,b){delete a[b];return 0};function fb(a,c){__p&&__p();Object.keys(c).forEach(function(d){__p&&__p();var e=c[d];if(e!==void 0){var f=e[0],g=h(f.reduce(function(d,e){var c=b("bs_belt_Map").get(a,e);if(c!==void 0)return b("bs_belt_Map").set(d,e,b("bs_js_primitive").valFromOption(c));else return d},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(Object.keys(g).length===f.length){b("bs_curry")._2(eb,c,d);return b("bs_curry")._1(e[1],g)}else return 0}else return 0});return 0}function gb(a,c,d,e,f){__p&&__p();d!==0&&pa(a,c.thread_id,f,d);if(c.timestamp===0){b("ChatReliabilityInstrumentation").logERROR("thread timestamp is 0");e.add(c.thread_id);return void 0}else{d=c.unread_count===0;if(d===f)return void 0;else{t(a,c.thread_id);return{unread_count:f?0:1}}}}function A(a){var c=[b("MercuryFilters.bs").all];a.unread_count>0&&c.push(b("MercuryFilters.bs").unread);a.is_canonical||c.push(b("MercuryFilters.bs").groups);return c}function B(a,c){var d;if(c.is_archived)d=b("MessagingTag").ACTION_ARCHIVED;else{var e=c.thread_type;d=!(e==null)&&e===b("MessagingThreadType").MARKETPLACE?b("MessagingTag").MARKETPLACE_FOLDER:c.folder}e=a[12][d];if(e!==void 0)return d}function hb(a,c){__p&&__p();var d={};la.forEach(function(a){var b={};ka.forEach(function(a){b[a]=[];return 0});d[a]=b;return 0});c.forEach(function(c){__p&&__p();var e=b("bs_belt_Map").get(a[7],c.thread_id);if(e!==void 0){var f=b("bs_js_primitive").valFromOption(e);e=B(a,f);if(e!==void 0){var g=e;A(f).forEach(function(a){if(f.timestamp!==0){d[g][a].push(c.thread_id);return 0}else return 0});return 0}else return 0}else return 0});la.forEach(function(b){ka.forEach(function(c){var e=d[b][c];ta(a,e,b,c);return 0});return 0});return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}function ib(a){__p&&__p();b("bs_belt_Map").map(a[7],function(c){__p&&__p();c=b("bs_belt_Map").get(a[7],c.thread_id);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c);if(b("bs_js_primitive").nullable_to_opt(c.thread_type)===b("MessagingThreadType").MARKETPLACE){c=b("ImmutableObject").set(c,{folder:"marketplace_folder"});hb(a,[c]);return 0}else return 0}else return 0});return 0}function jb(c,a,d){__p&&__p();var e=function(a){return a.timestamp>(d?b("bs_caml_primitive").caml_float_max(c[18],a.last_read_timestamp):c[18])},f=function(a){return b("bs_belt_Option").mapWithDefault(b("bs_belt_Option").flatMap(b("bs_belt_Option").map(b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(c[15].get(a.thread_id)),function(a){return b("bs_caml_array").caml_array_get(a[1],0)}),function(a){return b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(c[10].get(a)),a)}),function(a){return b("bs_js_primitive").nullable_to_opt(c[9].get(a))}),!1,function(a){return a.author===b("MercuryIDs").getParticipantIDFromUserID(c[0])})},g=function(a,c){if(e(a)&&!b("MercuryThreadInfo").isMuted(a)&&!f(a))return c+1|0;else return c};return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){__p&&__p();d=d.threadlist;if(d.length!==0)return d.reduce(function(a,d){d=b("bs_belt_Map").get(c[7],d);if(d!==void 0)return g(b("bs_js_primitive").valFromOption(d),a);else return a},0);else if(b("bs_belt_Map").isEmpty(c[7]))return a[7][0];else return b("bs_belt_Map").reduce(c[7],0,function(a,d,e){d=B(c,e);if(d!==void 0&&d===b("MessagingTag").INBOX)return g(e,a);else return a})}),a[7][0])}function C(c,a){__p&&__p();return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){__p&&__p();if(d.threadlist.length===0)if(b("bs_belt_Map").isEmpty(c[7]))return a[7][0];else return b("bs_belt_Map").reduce(c[7],0,function(a,d,e){__p&&__p();var f=B(c,e);if(f!==void 0&&f===b("MessagingTag").INBOX&&e.timestamp>c[18]&&!b("MercuryThreadInfo").isMuted(e)){f=c[16][b("MessagingTag").INBOX];if(f!==void 0){e=f.has(d);if(e)return a+1|0;else return a}else return a}else return a});else return d.threadlist.reduce(function(a,d){__p&&__p();var e=b("bs_belt_Map").get(c[7],d);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.timestamp>c[18]&&!b("MercuryThreadInfo").isMuted(e)){e=c[16][b("MessagingTag").INBOX];if(e!==void 0){e=e.has(d);if(e)return a+1|0;else return a}else return a}else return a}else return a},0)}),a[7][0])}function kb(c,a,d){if(d===b("MessagingTag").PENDING)return[c[0],c[1],c[2],c[3],c[4],0,c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]];else{if(b("gkx")("969964")){d=b("MercuryThreadInformer").getForFBID(c[0]);d.updatedUnseenTimestamp()}return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],a]}}function D(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}function lb(a){return[a,b("bs_belt_MapString").empty,b("bs_belt_MapString").empty,b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),0,b("bs_belt_MapString").empty,b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),new Map(),ma(0),[],{},new Map(),{},{},0]}var mb=[{}],nb=[0],E=new Map(),F=[{}],G=[0],H=new Set(),I=[{}],J=[0],ob=[mb,nb,E,F,G,H,I,J];function pb(a,c){__p&&__p();var d=ob;a=a;c=c;var e=[];c=b("bs_array").fold_left(function(g,j){__p&&__p();switch(j.tag|0){case 0:e.push(j[0].tag|0);break;case 1:case 2:break}switch(j.tag|0){case 0:var k=j[0];if(typeof k==="number"){var l=g,n=d;n[0][0]={};n[1][0]=n[1][0];n[6][0]={};n[2].clear();b("bs_belt_Map").keysToArray(l[7]).forEach(function(a){return na(l[0],a)});return[l[0],l[1],b("bs_belt_MapString").empty,l[3],l[4],l[5],l[6],b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),l[11],ma(0),l[13],l[14],new Map(),l[16],l[17],l[18]]}else switch(k.tag|0){case 0:n=g;var aa=k[0],ba=[!1],ca=[n[1]];Object.keys(aa).forEach(function(a){var c=aa[a],d=b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(ca[0],a),0);if(c>d){ba[0]=!0;ca[0]=b("bs_belt_MapString").set(ca[0],a,c);return 0}else return 0});if(ba[0])return[n[0],ca[0],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]];else return n;case 1:return ga(g,k[0],[]);case 2:n=g;var o=k[0],p=k[1];p=p.reduce(b("bs_belt_Set").remove,o.reduce(b("bs_belt_Set").add,n[4]));if(p===n[4])return n;else return[n[0],n[1],n[2],n[3],p,n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]];case 3:o=g;p=k[0];n=p.reduce(function(c,d){var a=d.is_messenger_ignored;if(a==null)return c;else if(a)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid))},o[3]);if(n===o[3])return o;else return[o[0],o[1],o[2],n,o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];case 4:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("SetInitialPendingFolderUnseenCount");p=g;n=k[0];return[p[0],p[1],p[2],p[3],p[4],n,p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];case 5:o=g;n=k[0];p=ja(o[0],n);if(p==null)return o;else{var q=b("FBID.bs").ofString(n.from.toString());if(q!==void 0){b("MessengerPersonas.bs").addPersona(n.persona);var r=n.persona;q=r==null?b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(q)):b("MercuryIDs").getParticipantIDFromUserID(r.id);if(n.st===b("TypingStates").TYPING){r=b("bs_belt_MapString").get(o[6],p);if(r!==void 0)return[o[0],o[1],o[2],o[3],o[4],o[5],b("bs_belt_MapString").set(o[6],p,b("bs_belt_Map").set(b("bs_js_primitive").valFromOption(r),q,Date.now())),o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];else{r=b("bs_belt_Map").set(b("bs_belt_Map").make([b("ParticipantId.bs").cmp]),q,Date.now());return[o[0],o[1],o[2],o[3],o[4],o[5],b("bs_belt_MapString").set(o[6],p,r),o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}}else if(n.st===b("TypingStates").INACTIVE){r=ia(o[6],p,q);if(r!==o[6])return[o[0],o[1],o[2],o[3],o[4],o[5],r,o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];else return o}else return o}else return o}case 6:n=g;var da=k[0],ea=[!1],a=[n[2]];Object.keys(da).forEach(function(d){__p&&__p();Object.keys(da[d]).forEach(function(e){__p&&__p();var c=b("bs_belt_MapString").get(a[0],d);c=c!==void 0?b("bs_js_primitive").valFromOption(c):b("immutable").OrderedMap();var f=c.get(e),g=da[d][e];if(f==null||g.watermark>f.watermark)f=1;else return 0;if(f===1){ea[0]=!0;a[0]=b("bs_belt_MapString").set(a[0],d,c.set(e,g));return 0}});var c=b("bs_belt_MapString").get(a[0],d);if(c!==void 0){ea[0]=!0;a[0]=b("bs_belt_MapString").set(a[0],d,b("bs_js_primitive").valFromOption(c).sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)}));return 0}else return 0});if(ea[0])return[n[0],n[1],a[0],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]];else return n;case 7:var s=g;p=d;q=k[0];if(q.length!==0){r=s[7];o=q.reduce(function(a,c){return b("bs_belt_Map").set(a,c.thread_id,new(b("ImmutableObject"))(c))},r);fb(o,p[0][0]);q.forEach(function(a){return t(s[0],a.thread_id)});return[s[0],s[1],s[2],s[3],s[4],s[5],s[6],o,s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15],s[16],s[17],s[18]]}else return s;case 8:n=g;r=k[0];if(r.length!==0){var pa=n[8],qa=b("MercuryServerRequests").getForFBID(n[0]);r.forEach(function(a){__p&&__p();var b=a.thread_id;if(pa.has(b)){pa["delete"](b);if(a.unread_count>0){qa.changeThreadReadStatus(b,!0,null,null,null,null);return 0}else return 0}else return 0});return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],pa,n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}else return n;case 9:var v=g,Aa=k[0];b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom&&ib(v);la.forEach(function(a){__p&&__p();ka.forEach(function(d){__p&&__p();var c=v,e=Aa,f=a,g=d,h=[];d=e.filter(function(c){var a=c.filter;a=a==null?b("MercuryFilters.bs").all:a;c=c.folder;c=c==null?f===b("MessagingTag").INBOX:c===f;if(c)return a===g;else return!1});var i=[!1];d.forEach(function(a){a.thread_ids.forEach(function(a){h.push(a);return 0});var b=a.limit;if(a.thread_ids.length<b){i[0]=!0;return 0}else return 0});e=ta(c,h,f,g);d=c[12][f];c=d[g];c=c!==void 0?c.reachedEnd:!1;d[g]={reachedEnd:i[0]?i[0]:c,threadlist:e[0],existingIDs:e[1]};return 0});return 0});return[v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15],v[16],v[17],v[18]];case 10:return hb(g,k[0]);case 11:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdatePinnedThreads");var w=g,Ba=d;p=k[0];if(p.length!==0){p.forEach(function(a){if(Ba[5].has(a))return 0;else{w[13].push(a);Ba[5].add(a);return 0}});q=b("MercuryThreadInformer").getForFBID(w[0]);q.updatedThreadlist();return[w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15],w[16],w[17],w[18]]}else return w;case 12:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnSubscribeStatusUpdate");o=g;r=k[0];var Ca=k[1];return u(function(a){return a.page_unsubscribe_status!==Ca},o,r,{page_unsubscribe_status:Ca});case 13:n=g;p=k[0];q=k[1];o=k[2];return u(void 0,n,p,{can_reply:q,cannot_reply_reason:o});case 14:r=g;n=k[0];p=k[1];q=b("bs_belt_Map").get(r[7],n);if(q!==void 0){o=Object.assign({},b("bs_js_primitive").valFromOption(q));sa(b("MercuryIDs").getParticipantIDFromUserID(r[0]),o,p);return u(void 0,r,n,o)}else return r;case 15:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFlag");q=g;p=k[0];n=k[1];o=b("bs_belt_Map").get(q[7],p);if(o!==void 0){r=b("bs_js_primitive").valFromOption(o);o=r.page_thread_info;r=b("ImmutableObject").set(r,{page_thread_info:Object.assign(o==null?{}:o,{flagged:n})});o=b("bs_belt_Map").set(q[7],p,r);t(q[0],p);return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],o,q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15],q[16],q[17],q[18]]}else return q;case 16:n=g;r=k[0];return u(function(a){return b("MessageRequestUtils").isMessageRequest(a)},n,r,{folder:b("MessagingTag").INBOX});case 17:p=g;o=k[0];q=k[1];return u(void 0,p,o,{custom_like_icon:q});case 18:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("PromoteGroupAdmins");n=g;r=k[0];p=k[1];o=b("bs_belt_Map").get(n[7],r);if(o!==void 0){q=b("bs_js_primitive").valFromOption(o);o=b("bs_js_dict").fromArray(b("bs_js_dict").entries(q.admins));q=b("ImmutableObject").set(q,{admins:b("bs_array").fold_left(function(a,b){a[b.admin_fbid]=b.admin_type;return a},o,p)});o=b("bs_belt_Map").set(n[7],r,q);t(n[0],r);return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],o,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}else return n;case 19:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("RemoveGroupAdmins");p=g;q=k[0];r=k[1];o=b("bs_belt_Map").get(p[7],q);if(o!==void 0){n=b("bs_js_primitive").valFromOption(o);o=b("bs_js_dict").fromArray(b("bs_js_dict").entries(n.admins));n=b("ImmutableObject").set(n,{admins:b("bs_array").fold_left(function(d,c){var a=d[c];a!==void 0&&b("bs_curry")._2(ha,d,c);return d},o,r)});o=b("bs_belt_Map").set(p[7],q,n);t(p[0],q);return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],o,p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}else return p;case 20:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("JoinableMode");r=g;n=k[0];q=k[1];return u(void 0,r,n,{joinable_mode:q});case 21:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalMode");o=g;p=k[0];r=k[1];return u(void 0,o,p,{approval_mode:r});case 22:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalQueue");n=g;q=k[0];o=k[1];p=k[2];var Da=k[3],Ea=k[4];r=b("bs_belt_Map").get(n[7],q);if(r!==void 0){r=b("bs_js_primitive").valFromOption(r);var x=r.group_approval_queue;r={approval_queue_ids:r.approval_queue_ids.slice(),group_approval_queue:x==null?null:x.slice()};o==null||r.approval_queue_ids.indexOf(o)===-1&&Object.assign(r,{approval_queue_ids:r.approval_queue_ids.concat([o])});if(!(p==null)){x=r.group_approval_queue;x==null?Object.assign(r,{group_approval_queue:[p]}):x.map(function(a){return a.requester.id}).indexOf(p.requester.id)===-1&&Object.assign(r,{group_approval_queue:x.concat([p])})}Da==null||Object.assign(r,{approval_queue_ids:r.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,Da)})});if(!(Ea==null)){o=r.group_approval_queue;Object.assign(r,{group_approval_queue:(o==null?[]:o).filter(function(a){return a.requester.id!==Ea})})}return u(void 0,n,q,r)}else return n;case 23:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("IsPinProtected");x=g;p=k[0];o=k[1];return u(void 0,x,p,{is_pin_protected:o});case 24:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateRtcCallData");q=g;r=k[0];n=k[1];x=k[2];p=k[3];o=b("bs_belt_Map").get(q[7],r);if(o!==void 0){if(n==null){o=b("bs_js_primitive").valFromOption(o).rtc_call_data;o=o==null?void 0:n}else o=n;return u(void 0,q,r,{rtc_call_data:new(b("ImmutableObject"))({call_state:x,server_info_data:p,initiator_fbid:o})})}else return q;case 25:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommStatus");n=g;r=k[0];x=k[1];return u(void 0,n,r,{comm_status:x});case 26:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommItemOwner");p=g;o=k[0];q=k[1];n=k[2];r=k[3];x=q==null?{nodes:[]}:{nodes:[{admin:{id:q,name:n,profile_picture:{uri:r}}}]};return u(void 0,p,o,{comm_item_owners:x});case 27:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("EventRsvpChanged");q=g;n=k[0];var Ka=k[1];r=k[2];p=b("bs_belt_Map").get(q[7],n);if(p!==void 0){o=b("bs_js_primitive").valFromOption(p).participants_event_status;x=(o==null?[]:o).filter(function(a){return b("bs_caml_obj").caml_notequal(a.participant_id,Ka)});x.push({participant_id:Ka,event_status:r});return u(void 0,q,n,{participants_event_status:x})}else return q;case 28:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncStatusChanged");p=g;o=k[0];r=k[1];n=k[2];if(n==null||!b("bs_caml_obj").caml_equal(n,b("MessengerGroupsSyncStatus").OPT_IN))x=1;else return u(void 0,p,o,{groups_sync_status:r});if(x===1)return u(void 0,p,o,{groups_sync_status:r,work_associated_group:null});case 29:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncMetadataUpdate");q=g;n=k[0];x=k[1];p=k[2];if(x==null)return u(void 0,q,n,{work_associated_group:null});else if(b("bs_caml_obj").caml_equal(x,b("MessengerGroupsSyncStatus").OPT_IN)){o=new(b("URI"))(document.URL);r=o.getDomain();x=b("XGroupsController").getURIBuilder().setString("idorvanity",p).getURI().setDomain(r==null?"":r.replace("messenger.com","facebook.com")).setPort(o.getPort()).setProtocol("https");return u(void 0,q,n,{work_associated_group:{id:p,url:x.toString(),group_saves:{count:0},group_events:{count:0}}})}else return u(void 0,q,n,{work_associated_group:null});case 30:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DescriptionChanged");r=g;o=k[0];p=k[1];return u(void 0,r,o,{description:p});case 31:x=g;q=k[0];n=k[1];return u(void 0,x,q,{solid_color:n.solid_color,header_color:n.header_color,footer_color:n.footer_color,gradient_colors:n.gradient_colors,theme_id:n.theme_id});case 32:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateJoinableLink");r=g;o=k[0];p=k[1];return u(void 0,r,o,{joinable_link:p});case 33:var y=g,Na=k[0];x=b("bs_belt_Map").toArray(y[7]).reduce(function(c,a){var d=a[1];a=a[0];if(d.folder===Na){t(y[0],a);return b("bs_belt_Map").set(c,a,b("ImmutableObject").set(d,{unread_count:0}))}else return c},y[7]);y[16][Na]=new Set();q=b("MercuryThreadInformer").getForFBID(y[0]);q.updatedUnreadState();return[y[0],y[1],y[2],y[3],y[4],y[5],y[6],x,y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15],y[16],y[17],y[18]];case 34:var z=g,Pa=k[0];n=b("bs_belt_Map").remove(z[7],Pa);z[15]["delete"](Pa);z[9].forEach(function(a,c,d){__p&&__p();if(b("bs_caml_obj").caml_equal(a.thread_id,Pa)){z[9]["delete"](a.message_id);c=a.offline_threading_id;if(!(c==null)){d=z[10].get(c);d==null||(z[9]["delete"](d),z[10]["delete"](c))}z[10]["delete"](a.message_id);return 0}else return 0});na(z[0],Pa);return[z[0],z[1],z[2],z[3],z[4],z[5],z[6],n,z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15],z[16],z[17],z[18]];case 35:r=k[0];return Oa(g,d,[r.message_id,r,k[1]]);case 36:o=g;p=[k[0],k[1],k[2]];q=p[2];x=p[1];var ab=p[0];if(x.length!==0){n=Ra(o,[ab,x,q]);r=0;q!==void 0?b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(q),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||(r=1):r=1;r===1&&b("MercuryServerRequests").getForFBID(n[0]).deleteMessages(ab,x);return b("bs_belt_Array").reduce(x,n,function(a,d){__p&&__p();d=Ja(a,d);var c=b("bs_belt_Map").get(a[7],ab);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c);c=b("ImmutableObject").set(b("ImmutableObject").set(c,Sa(a,ab)),{message_count:c.message_count-1|0});c=b("bs_belt_Map").set(a[7],ab,c);t(a[0],ab);c=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],c,a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}else c=a;d!==void 0&&Ta(b("bs_js_primitive").some(ab),b("bs_js_primitive").valFromOption(d));return c})}else return o;case 37:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFolder");return za(g,k[0],k[1]);case 38:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeMuteSettings");p=g;q=k[0];r=k[1];x=b("bs_belt_Map").get(p[7],q);if(x!==void 0){n=b("bs_js_primitive").valFromOption(x);var bb;switch(r.tag|0){case 0:bb=b("ImmutableObject").set(n,{reactions_mute_mode:r[0]?1:0});break;case 1:bb=b("ImmutableObject").set(n,{mentions_mute_mode:r[0]?1:0});break;case 2:o=r[0];x=o===0;bb=b("ImmutableObject").set(n,{mute_until:x?void 0:o});break}r=b("bs_belt_Map").set(p[7],q,bb);t(p[0],q);return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],r,p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}else return p;case 39:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeArchivedStatus");n=g;x=k[0];o=k[1];q=b("bs_belt_Map").get(n[7],x);if(q!==void 0){r=b("bs_js_primitive").valFromOption(q);if(r.is_archived!==o){p=b("MessengerFolders.bs").getFromMeta(r);q=r.comm_status;q=q==null?b("ImmutableObject").set(r,{is_archived:o}):b("ImmutableObject").set(r,{is_archived:o,comm_status:o?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO});r=b("bs_belt_Map").set(n[7],x,q);xa(n,q,p);ya(n,q);t(n[0],x);return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],r,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}else return n}else return n;case 40:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePageFollowUpStatus");o=g;p=k[0];q=k[1];x=b("bs_belt_Map").get(o[7],p);if(x!==void 0){r=b("bs_js_primitive").valFromOption(x);if(r.is_page_follow_up!==q){n=b("ImmutableObject").set(r,{is_page_follow_up:q});x=b("bs_belt_Map").set(o[7],p,n);t(o[0],p);return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],x,o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}else return o}else return o;case 41:r=g;q=k[0];n=k[1];p=k[2];x=k[3];o=k[4];var A=b("bs_belt_Map").get(r[7],q);if(A!==void 0){A=b("bs_js_primitive").valFromOption(A);p=gb(r[0],A,p,r[8],n);p=p!==void 0&&A.last_message_timestamp>A.last_read_timestamp?b("bs_js_primitive").some(Object.assign(b("bs_js_primitive").valFromOption(p),{last_read_timestamp:A.last_message_timestamp})):p;if(p!==void 0){p=b("ImmutableObject").set(A,b("bs_js_primitive").valFromOption(p));var B=b("bs_belt_Map").set(r[7],q,p);if(x){x=!A.read_only&&A.folder===b("MessagingTag").INBOX;var C=b("MercuryServerRequests").getForFBID(r[0]);C.changeThreadReadStatus(p.thread_id,n,o,p.last_read_timestamp,x,p.last_message_type)}C=B}else C=r[7];o=b("MessengerFolders.bs").getFromMeta(A);n?(ra(r,[q],o,b("MercuryFilters.bs").unread),wa(r,o,b("bs_js_primitive").some(q))):(ta(r,[q],o,b("MercuryFilters.bs").unread),ua(r,o,b("bs_js_primitive").some(q)));return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],C,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15],r[16],r[17],r[18]]}else return r;case 42:var D=g,lb=k[0];x=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(D[15].get(lb)),function(a){return[a[0],[]]}),[0,[]]);D[15].set(lb,x);p=b("bs_belt_Option").map(b("bs_belt_Map").get(D[7],lb),function(a){return b("ImmutableObject").set(a,{message_count:0})});if(p!==void 0){var mb=b("bs_js_primitive").valFromOption(p);B=b("bs_belt_Map").set(D[7],lb,mb);ka.forEach(function(a){return ra(D,[lb],b("MessengerFolders.bs").getFromMeta(mb),a)});A=B}else A=D[7];va.forEach(function(a){a=D[16][a];if(a!==void 0){a["delete"](lb);return 0}else return 0});oa(D[0],lb);return[D[0],D[1],D[2],D[3],D[4],D[5],D[6],A,D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15],D[16],D[17],D[18]];case 43:n=g;o=d;q=[k[0],k[1],k[2]];C=Qa(n,[q[0],q[1]]);r=C.thread_id;x=Ra(n,[r,[C.message_id],q[2]]);p=o[2].get(r);p==null||o[2].set(r,Math.max(0,p-1|0));return x;case 44:B=g;A=[k[0],k[1]];n=Qa(B,[A[0],A[1]]);b("MercuryServerRequests").getForFBID(B[0]).sendNewMessage(Object.assign(n,{preview_attachments:void 0}));return B;case 45:C=g;q=[k[0],k[1],k[2],k[3]];o=q[2];r=q[1];p=q[0];x=Ja(C,p);if(x!==void 0){A=b("bs_js_primitive").valFromOption(x);n=b("bs_js_dict").map(function(a){return a},b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(A.reactions),{}));r!==void 0?n[o]=r:b("bs_curry")._2(Ia,n,o);B=Object.assign(Object.assign({},A),{reactions:n});x=A.thread_id;x==null||Ga(C[0],x,p,q[3]);return Ma(C,[p,B])}else return C;case 46:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontageDirectExpire");r=g;o=k[0];if(b("gkx")("676919")){n=Ja(r,o);if(n!==void 0){A=b("bs_js_primitive").valFromOption(n);x=A.attachments;if(x==null||x.length===0)return r;else{q=b("bs_caml_array").caml_array_get(x,0);p=q.share;if(p==null)return r;else{B=p.target;if(B==null)return r;else{C=B.message_state;if(C==null)return r;else{n=Object.assign(Object.assign({},A),{attachments:b("bs_caml_array").caml_array_set(b("bs_array").copy(x),0,Object.assign(Object.assign({},q),{share:Object.assign(Object.assign({},p),{target:Object.assign(Object.assign({},B),{message_state:"EXPIRED"})})}))});return Ma(r,[o,n])}}}}}else return r}else return r;case 47:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("LiveLocationUpdate");C=g;A=[k[0],k[1],k[2]];x=A[0];q=Ja(C,x);if(q!==void 0){p=b("bs_js_primitive").valFromOption(q);B=p.attachments;if(B==null||B.length===0)return C;else{o=b("bs_caml_array").caml_array_get(B,0);n=o.share;if(n==null)return C;else{r=n.target;if(r==null)return C;else{q=b("bs_array").copy(B);b("bs_caml_array").caml_array_set(q,0,Object.assign(Object.assign({},o),{share:Object.assign(Object.assign({},n),{target:Object.assign(Object.assign({},A[1]),{live_location_id:r.live_location_id})})}));B=Object.assign(Object.assign({},p),{attachments:q});o=p.thread_id;o==null||Ga(C[0],o,x,A[2]);return Ma(C,[x,B])}}}}else return C;case 48:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ReplaceMessage");n=g;r=k[0];q=k[1];var nb=r.replaced_message_id;if(nb==null)return n;else{p=Ja(n,nb);if(p!==void 0){o=r.message_id;A={timestamp:r.timestamp};x=b("bs_js_primitive").nullable_to_opt(r.status);x!==void 0&&(A.status=b("bs_js_primitive").valFromOption(x));B=b("bs_js_primitive").nullable_to_opt(r.log_message_data);B!==void 0&&(A.log_message_data=b("bs_js_primitive").valFromOption(B));C=b("bs_js_primitive").nullable_to_opt(r.meta_ranges);C!==void 0&&(A.meta_ranges=b("bs_js_primitive").valFromOption(C));x=b("bs_js_primitive").nullable_to_opt(r.ranges);x!==void 0&&(A.ranges=b("bs_js_primitive").valFromOption(x));B=b("bs_js_primitive").nullable_to_opt(r.raw_attachments);B!==void 0&&(A.raw_attachments=b("bs_js_primitive").valFromOption(B));C=b("bs_js_primitive").nullable_to_opt(r.attachments);C!==void 0&&(A.attachments=b("bs_js_primitive").valFromOption(C));x=b("bs_js_primitive").nullable_to_opt(r.body);x!==void 0&&(A.body=b("bs_js_primitive").valFromOption(x));B=b("bs_js_primitive").nullable_to_opt(r.platform_xmd);B!==void 0&&(A.platform_xmd=b("bs_js_primitive").valFromOption(B));C=b("bs_js_primitive").nullable_to_opt(r.profile_ranges);C!==void 0&&(A.profile_ranges=b("bs_js_primitive").valFromOption(C));x=A;B=Object.assign(Object.assign({},b("bs_js_primitive").valFromOption(p)),x);b("MercuryMessageIDs.bs").addServerID(o,o);var E=Ma(n,[o,B]);if(o!==nb){E[9]["delete"](nb);E[10].set(nb,o);C=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(r.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(E[15].get(a))});A=r.thread_id;if(C!==void 0&&!(A==null)){p=C;x=La(E,[o].concat(p[1].filter(function(a){return a!==nb})));E[15].set(A,[p[0],x])}}B=r.message_id;C=r.thread_id;C==null||(Ga(E[0],C,nb,q),Ga(E[0],C,B,q));return[E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15],E[16],E[17],E[18]]}else return n}case 49:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateLocalTitanMessagesCount");o=g;A=d;p=[k[0],k[1]];x=p[0];r=Ja(o,p[1]);if(r!==void 0&&b("MessengerMessage.bs").isTitanMessage(b("bs_js_primitive").valFromOption(r))){C=A[2].get(x);C==null?A[2].set(x,1):A[2].set(x,1+C|0)}return o;case 50:return Va(g,d,k[0],k[1]);case 51:B=g;q=d;n=k[0];p=k[1];r=k[2];A=Za(B,n,p,r==null?void 0:b("bs_js_primitive").some(r));Xa(A[0],p,n,function(a,b,c){a.informNewMessage(b,c);return 0});x=A[0];C=b("MercuryIDs").getParticipantIDFromUserID(x);if(n.folder===b("MessagingTag").PENDING&&b("bs_caml_obj").caml_equal(p,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)))o=[A[0],A[1],A[2],A[3],A[4],A[5]+1|0,A[6],A[7],A[8],A[9],A[10],A[11],A[12],A[13],A[14],A[15],A[16],A[17],A[18]];else if(n.folder===b("MessagingTag").INBOX){B=n.thread_id;o=B==null?A:za(A,B,n.folder)}else{B=n.thread_id;if(B==null)o=A;else{r=cb(A[0],A[7],n,r);if(r!==void 0){r=b("bs_js_primitive").valFromOption(r);var F=A[0],G=A[1],H=A[2],I=A[3],J=A[4],ob=A[5],pb=A[6],K=b("bs_belt_Map").set(A[7],r.thread_id,r),L=A[8],M=A[9],N=A[10],O=A[11],P=A[12],Q=A[13],R=A[14],qb=A[15],S=A[16],T=A[17],U=A[18];F=[F,G,H,I,J,ob,pb,K,L,M,N,O,P,Q,R,qb,S,T,U];if(b("bs_caml_obj").caml_equal(p,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE))){G=n.offline_threading_id;G==null?Object.assign(n,{folder:r.folder}):b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(N.get(G)),G)?Object.assign(n,{client_message_id:n.offline_threading_id,status:b("MercuryActionStatus").SUCCESS,action_type:b("MercuryActionType").SEND_MESSAGE}):Object.assign(n,{folder:r.folder})}ya(F,r);H=Object.assign({},r);H.unread_count===0&&b("bs_caml_obj").caml_equal(n.author,C)&&n.timestamp>=H.last_read_timestamp&&!b("gkx")("702170")&&Object.assign(H,{last_read_timestamp:n.timestamp});I=n.offline_threading_id;if(!(I==null)&&I!==n.message_id){Object.assign(H,{last_message_timestamp:n.timestamp});J=n.comm_status;J==null||Object.assign(H,{last_message_id:n.message_id})}ob=n.comm_status;pb=H.comm_status;ob==null||!(pb==null)&&b("bs_caml_obj").caml_notequal(pb,b("PageCommItemStatus").FOLLOW_UP)&&Object.assign(H,{comm_status:ob});K=n.creator_info;K==null||b("bs_caml_obj").caml_equal(K.pageID,x)&&Object.assign(H,{folder:n.folder});Ya(H,n.author);o=u(void 0,F,B,H)}else o=A}}L=Wa(o,q,n,p);M=db(L,n);O=M;P=n;Q=b("bs_caml_obj").caml_notequal(P.author,b("MercuryViewer").getID());R=P.thread_id;if(Q&&!(R==null)){qb=ia(O[6],R,P.author);if(qb!==O[6])return[O[0],O[1],O[2],O[3],O[4],O[5],qb,O[7],O[8],O[9],O[10],O[11],O[12],O[13],O[14],O[15],O[16],O[17],O[18]];else return O}else return O;case 52:S=g;T=d;U=k[0];N=k[1];G=k[2];r=b("bs_caml_obj").caml_notequal(G==null?void 0:b("bs_js_primitive").some(G),!1);C=b("bs_caml_obj").caml_equal(G==null?void 0:b("bs_js_primitive").some(G),!0);I=S[0];J=b("MercuryIDs").getParticipantIDFromUserID(I);pb=Wa(S,T,U,N);Xa(pb[0],N,U,function(a,b,c){a.informNewLogMessage(b,c);return 0});ob=Za(pb,U,N,G==null?void 0:b("bs_js_primitive").some(G));K=U.thread_id;if(K==null)x=ob;else{F=b("bs_belt_Map").get(ob[7],K);if(F!==void 0){B=Object.assign({},b("bs_js_primitive").valFromOption(F));ya(ob,B);B.last_message_timestamp<U.timestamp&&Object.assign(B,{last_message_timestamp:U.timestamp});H=U.log_message_type;if(!(H==null))if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").SUBSCRIBE)&&!C){A=U.log_message_data;if(A==null)o=[];else{q=A.added_participants;o=q==null?[]:q}sa(J,B,o);t(I,K)}else if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").UNSUBSCRIBE)&&!C){p=U.log_message_data;if(p==null)L=[];else{M=p.removed_participants;L=M==null?[]:M}$a(J,B,L);t(I,K)}else if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").THREAD_IMAGE)){if(!r){n=U.log_message_data;if(n==null)Q=null;else{R=n.image;Q=R==null?null:R.preview_url}Object.assign(B,{image_src:Q})}}else if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").THREAD_NAME)){P=U.log_message_data;if(!(P==null)){qb=P.name;!(qb==null)&&B.name===qb||t(I,K);Object.assign(B,{name:P.name})}}else b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)&&Fa(I,B,U,K);x=u(void 0,ob,K,B)}else x=ob}return db(x,U);case 53:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePinnedStatus");O=g;S=d;T=k[0];pb=k[1];N=k[2];G=b("bs_belt_Map").get(O[7],T);F=!1;if(pb&&!S[5].has(T))O[13].push(T),S[5].add(T),F=!0;else if(!pb&&S[5].has(T)){A=O[13].indexOf(T);A>-1&&O[13].splice(A,1);S[5]["delete"](T);F=!0}if(G!==void 0){q=b("bs_js_primitive").valFromOption(G);if(q.is_pinned!==pb){o=b("ImmutableObject").set(q,{is_pinned:pb,thread_pin_timestamp:N});C=b("bs_belt_Map").set(O[7],T,o);t(O[0],T);F=!0;p=C}else p=O[7]}else p=O[7];if(F)return[O[0],O[1],O[2],O[3],O[4],O[5],O[6],p,O[8],O[9],O[10],O[11],O[12],O[13],O[14],O[15],O[16],O[17],O[18]];else return O;case 54:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InvalidateMontageState");M=g;J=k[0];L=b("bs_js_dict").fromArray(b("bs_js_dict").entries(M[14]));L[J]=[];return[M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],M[8],M[9],M[10],M[11],M[12],M[13],L,M[15],M[16],M[17],M[18]];case 55:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("NewMontageMessage");r=g;n=k[0];R=b("bs_js_dict").fromArray(b("bs_js_dict").entries(r[14]));Q=n.actor.id;qb=R[Q];qb!==void 0?(qb.push(n),R[Q]=qb):R[Q]=[n];return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],R,r[15],r[16],r[17],r[18]];case 56:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InstantiateMontageThread");P=g;H=k[0];I=b("bs_js_dict").fromArray(b("bs_js_dict").entries(P[14]));K=I[H];K===void 0&&(I[H]=[]);return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8],P[9],P[10],P[11],P[12],P[13],I,P[15],P[16],P[17],P[18]];case 57:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeleteMontageMessage");B=g;var rb=k[0],sb=b("bs_js_dict").fromArray(b("bs_js_dict").entries(B[14]));ob=Object.keys(sb);ob.forEach(function(b){var a=sb[b];if(a!==void 0){a=a.filter(function(a){return a.id!==rb.messageFBID});sb[b]=a;return 0}else return 0});return[B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],B[8],B[9],B[10],B[11],B[12],B[13],sb,B[15],B[16],B[17],B[18]];case 58:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("AddFetchedAllHistoryMarkers");var V=g;x=[k[0],k[1]];var tb=x[1];x[0].forEach(function(b){var a=V[15].get(b);a==null?V[15].set(b,[1,[]]):V[15].set(b,[1,a[1]]);return Ha(V[0],b,tb)});return[V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],V[8],V[9],V[10],V[11],V[12],V[13],V[14],V[15],V[16],V[17],V[18]];case 59:var W=g;U=k[0];U.forEach(function(c){__p&&__p();var a=c.folder;if(va.includes(a)){c=c.thread_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromThreadFBID(a)}).concat(c.other_user_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromUserID(a)}));W[16][a]=new Set(c);a=b("MercuryThreadInformer").getForFBID(W[0]);a.updatedUnreadState();return 0}else return 0});return[W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15],W[16],W[17],W[18]];case 60:var X=g,ub=d;A=k[0];var f=[X[18]];A.forEach(function(a){X[17][a.folder]=a.unread_count;a.unread_count===0&&(X[16][a.folder]=new Set());a.folder===b("MessagingTag").INBOX&&(f[0]=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.seen_timestamp),f[0]),ub[7][0]=a.unseen_count);a=b("MercuryThreadInformer").getForFBID(X[0]);a.updatedUnreadState();a.updatedUnseenState();return 0});return[X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15],X[16],X[17],f[0]];case 61:var Y=g,vb=k[0];va.forEach(function(c){__p&&__p();var a=Y[16][c];if(a!==void 0){b("bs_js_dict").entries(vb).forEach(function(b){var c=b[0];if(a.has(c)){a.add(b[1]);a["delete"](c);return 0}else return 0});return 0}else return 0});return[Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8],Y[9],Y[10],Y[11],Y[12],Y[13],Y[14],Y[15],Y[16],Y[17],Y[18]];case 62:S=g;G=k[0];q=k[1];pb=k[2];N=k[3];o=Ja(S,G);if(o!==void 0){T=b("bs_js_primitive").valFromOption(o);C=T.thread_id;Ta(C==null?void 0:b("bs_js_primitive").some(C),T);F=b("MessengerMessage.bs").makeFakeMessage(T.message_id,T.thread_id,T.author,T.action_type,T.timestamp,{removed_timestamp:pb,message_unsendability_status:b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE,unsender:{id:q}});p=Ma(S,[G,F]);O=T.thread_id;if(O==null)return p;else{J=Ua(p,G,O);Ga(J[0],O,G,N);L=b("bs_belt_Map").get(J[7],O);if(L!==void 0){M=b("ImmutableObject").set(b("bs_js_primitive").valFromOption(L),Sa(J,O));qb=b("bs_belt_Map").set(J[7],O,M);t(J[0],O);return[J[0],J[1],J[2],J[3],J[4],J[5],J[6],qb,J[8],J[9],J[10],J[11],J[12],J[13],J[14],J[15],J[16],J[17],J[18]]}else return J}}else return S;case 63:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateConnectivityStatus");Q=g;n=k[0];R=k[1];r=b("ThreadConnectivityStatus.bs").toGraphQLValue(R);K=b("bs_belt_Map").get(Q[7],n);if(K!==void 0){H=b("bs_js_primitive").valFromOption(K);I=H.thread_connectivity_data;P=I==null?b("ImmutableObject").set(H,{thread_connectivity_data:{connectivity_status:r,first_sender_id:null}}):b("ImmutableObject").set(H,{thread_connectivity_data:{connectivity_status:r,first_sender_id:I.first_sender_id}});return[Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],b("bs_belt_Map").set(Q[7],n,P),Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],Q[14],Q[15],Q[16],Q[17],Q[18]]}else return Q;case 64:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeltaMarkFolderSeen");ob=g;var wb=k[0];return b("bs_belt_Array").reduceU(wb.folders,ob,function(c,a){a=b("MessagingTag").IRIS_MAPPING[a];if(a!==void 0)return kb(c,Number(wb.timestamp),a);else return c});case 65:B=g;x=[k[0],k[1],k[2],k[3]];var xb=x[2];U=x[0];A=Ja(B,U);if(A!==void 0){o=b("bs_js_primitive").valFromOption(A);C=x[1].concat(o.tags).filter(function(a){return xb.indexOf(a)===-1});pb=Object.assign(Object.assign({},o),{tags:C});q=o.thread_id;q==null||Ga(B[0],q,U,x[3]);return Ma(B,[U,pb])}else return B;case 66:F=g;T=[k[0],k[1],k[2],k[3],k[4]];p=T[0];G=Ja(F,p);if(G!==void 0){N=b("bs_js_primitive").valFromOption(G);L=N.attachments;if(L==null||L.length!==1)return F;else{M=L[0];O=!b("gkx")("871037")||T[2]?[Object.assign(Object.assign({},M),{blurred_image_uri:void 0})]:[Object.assign(Object.assign({},M),{blurred_image_uri:T[3]})];qb=Object.assign(Object.assign({},N),{attachments:O});J=N.thread_id;J==null||Ga(F[0],J,p,T[4]);return Ma(F,[p,qb])}}else return F}case 1:S=j[0];if(typeof S==="number")if(S===0){R=g;var yb=[];b("bs_belt_MapString").forEach(R[6],function(a,c){return b("bs_belt_Map").forEach(c,function(b,c){if(c<Date.now()-3e4){yb.push([a,b]);return 0}else return 0})});if(yb.length!==0){var c=[R[6]];yb.forEach(function(a){c[0]=ia(c[0],a[0],a[1]);return 0});return[R[0],R[1],R[2],R[3],R[4],R[5],c[0],R[7],R[8],R[9],R[10],R[11],R[12],R[13],R[14],R[15],R[16],R[17],R[18]]}else return R}else{K=g;H=d;if(jb(K,H,!1)>0){r=b("MercuryServerRequests").getForFBID(K[0]);r.markSeen();return kb(K,r.getLastActionTimestamp(),b("MessagingTag").INBOX)}else return K}else switch(S.tag|0){case 0:var Z=g,zb=d;I=S[0];n=S[1];P=S[2];Q=S[3];var Ab=Z[7],Bb=[];ob=h(I.reduce(function(c,d){var a=b("bs_belt_Map").get(Ab,d);if(a!==void 0)return b("bs_belt_Map").set(c,d,b("bs_js_primitive").valFromOption(a));else{Bb.push(d);return c}},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(Bb.length!==0){A=zb[1];C=A[0].toString();zb[1][0]=A[0]+1|0;zb[0][0][C]=[I,P];o=b("MercuryServerRequests").getForFBID(Z[0]);q=Bb.reduce(function(c,d){__p&&__p();var e=b("MercuryIDs").tokenize(d),f=e.type;e=e.value;if(f==="user"){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(e));e=b("MercuryIDs").getParticipantIDFromUserID(Z[0]);var a=b("bs_caml_obj").caml_equal(f,e);a=b("MessengerThreadUtils.bs").createNewLocalThread(e,d,a?[e]:[e,f],null);e=b("bs_belt_Map").set(c,d,a);b("gkx")("1074761")||fb(e,zb[0][0]);return e}else return c},Z[7]);o.fetchThreadData(Bb,Q);b("bs_curry")._1(n,C);if(q===Z[7])return Z;else return[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],q,Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15],Z[16],Z[17],Z[18]]}else{b("bs_curry")._1(P,ob);return Z}case 1:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnsubscribeThread");x=d[0][0];b("bs_curry")._2(eb,x,S[0]);d[0][0]=x;return g;case 2:var $=g;U=S[0];pb=b("bs_belt_Array").keepMap(U,function(a){a=Ja($,a);if(a!==void 0)return b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(a).offline_threading_id)});pb.forEach(function(a){$[10]["delete"](a);return 0});return[$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8],$[9],$[10],$[11],$[12],$[13],$[14],$[15],$[16],$[17],$[18]];case 3:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontagePollStickerVoted");B=g;var Cb=S[0];k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(B[14]));G=Cb.montageActorID;L=k[G];if(L!==void 0){M=L.map(function(a){__p&&__p();var c=b("bs_caml_obj").caml_equal(Cb.montageMessageID,a.id);if(c){c=a;var d=Cb,e=c.montage_overlays.map(function(a){__p&&__p();if(b("bs_caml_obj").caml_equal(a.poll.id,d.pollID)){var c=a.poll.poll_options.map(function(a,c){c=c===d.optionVotedIndex;if(c)return new(b("ImmutableObject"))({text:a.text,vote_count:a.vote_count+1|0});else return a});c=new(b("ImmutableObject"))({can_viewer_vote:a.poll.can_viewer_vote,id:a.poll.id,poll_options:c,viewer_vote_index:d.optionVotedIndex});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{poll:c})}else return a});return b("ImmutableObject").set(new(b("ImmutableObject"))(c),{montage_overlays:e})}else return a});k[G]=M}return[B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],B[8],B[9],B[10],B[11],B[12],B[13],k,B[15],B[16],B[17],B[18]];case 4:O=b("bs_belt_Map").set(g[7],S[0],S[1]);return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],O,g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15],g[16],g[17],g[18]];case 5:b("MercuryServerRequests").getForFBID(g[0]).updateLastActionTimestamp(S[0]);return g}case 2:N=j[0];switch(N.tag|0){case 0:b("bs_curry")._1(N[0],{blocked_ids:g[4]});break;case 1:b("bs_curry")._1(N[1],b("bs_belt_Map").get(g[7],N[0]));break;case 2:b("bs_curry")._1(N[0],g[13].concat([]));break;case 3:b("bs_curry")._2(N[0],g,d);break}return g}},c,a);e.length>0&&b("LogHistory").getInstance("messenger_state").debug("actions",b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(JSON.stringify(e)),""));return c}function K(c,a){__p&&__p();var d=function(c){b("bs_curry")._1(a,[b("bs_block").__(0,[b("bs_block").__(5,[c])])]);b("setTimeoutAcrossTransitions")(function(){return b("bs_curry")._1(a,[b("bs_block").__(1,[0])])},3e4);return 0};b("Arbiter").subscribe(D(c),function(a,b){a=b.obj;b=a.to;if(!(b==null)&&b.toString()!==c)return 0;else{d(a);return 0}});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(d,e){__p&&__p();d=function(d,a){__p&&__p();var f={};b("bs_belt_MapString").toArray(d[2]).forEach(function(a){var b={};a[1].forEach(function(c,d,a){b[d]=c.watermark;return 0});f[a[0]]=b;return 0});a="read_receipts:"+c;e[a]=f;return 0};return b("bs_curry")._1(a,[b("bs_block").__(2,[b("bs_block").__(3,[d])])])});return 0}mb=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make([lb,pb,K,"MessengerStateProvider"]);var L=mb[1];function M(a,c){return b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(0,[c])])])}function N(a,c){b("MercuryAssert").isThreadID(c);var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);return b("bs_js_null_undefined").fromOption(d[0])}function O(a,c,d,e){__p&&__p();if(c.length!==0){b("MercuryAssert").allThreadID(c);var f=[null],g=function(a){f[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(0,[c,g,d,e])])]);return f[0]}else{b("bs_curry")._1(d,{});return null}}function P(a,c,d,e){return O(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function Q(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function R(a){var c=b("MercuryLocalIDs").generateThreadID(null);Q(a,c,[],null);return c}function qb(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function S(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);qb(a,e,c,d);return e}function T(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function U(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isNewEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function rb(c){var a=[[]],d=function(b){a[0]=b;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(2,[d])])]);return a[0]}function sb(a,c){return b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(1,[c])])])}function V(a){__p&&__p();var c=a.payload_source;if(c==null)return!1;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_THREAD_SYNC)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS))return!0;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INITIAL_DATA)){c=a.ordered_threadlists;return!(c==null)}else return!1}function tb(a,c){c=b("bs_block").__(1,[b("bs_block").__(3,[c])]);return b("bs_curry")._2(L,b("bs_js_primitive").some(a),[c])}function W(a,c){return b("bs_curry")._2(L,a==null?void 0:b("bs_js_primitive").some(a),c)}function X(a){__p&&__p();var c=[],d=!1;if(!(a==null)){var e=a.payload_source;e==null||b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&(d=!0);e=a.newlyAddedClientIDs;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(61,[e])]));e=a.delivery_receipts;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(0,[e])]));e=a.message_ignored_ids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(1,[e])]));e=a.threads;if(!(e==null)){var f=a.payload_source;f==null||(b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push(b("bs_block").__(0,[b("bs_block").__(8,[e])])),b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)&&(e.length>0&&c.unshift(b("bs_block").__(0,[b("bs_block").__(34,[b("bs_caml_array").caml_array_get(e,0).thread_id])]))));c.push(b("bs_block").__(0,[b("bs_block").__(7,[e])]))}f=a.participants;if(!(f==null)){c.push(b("bs_block").__(0,[b("bs_block").__(3,[f])]));var g=[],h=[];f.forEach(function(a){if(a.is_messenger_blocked||a.is_facebook_blocked){g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}else{h.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}});e=0;g.length!==0?e=1:h.length!==0&&(e=1);e===1&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[g,h])]))}f=a.message_blocked_ids;f==null||f.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[f,[]])]));e=a.message_unblocked_ids;e==null||e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[[],e])]));f=a.pending_folder_unseen_count;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(4,[f])]));e=a.global_actions;e==null||e.forEach(function(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)){c.push(b("bs_block").__(0,[b("bs_block").__(33,[a.folder])]));return 0}else return 0});if(V(a)){f=a.ordered_threadlists;e=0;!(f==null)&&f.length!==0?c.push(b("bs_block").__(0,[b("bs_block").__(9,[f])])):e=1;if(e===1){f=a.threads;e=a.payload_source;f==null||!(e==null)&&f.length>0&&e!==b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS&&c.push(b("bs_block").__(0,[b("bs_block").__(10,[f])]))}}e=a.pinned_thread_ids;e==null||e.length>0&&V(a)&&c.push(b("bs_block").__(0,[b("bs_block").__(11,[e])]));f=a.roger;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(6,[f])]));e=a.montage_delete_message_delta;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(57,[e])]));f=a.montage_new_message_delta;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(55,[f])]));e=a.montage_poll_sticker_vote;e==null||e.forEach(function(a){c.push(b("bs_block").__(1,[b("bs_block").__(3,[a])]));return 0});f=a.current_montage_thread;if(!(f==null)){e=f.user;if(!(e==null)){f=e.messenger_montage_thread;f==null||(c.push(b("bs_block").__(0,[b("bs_block").__(56,[e.id])])),f.montage_messages.edges.forEach(function(a){c.push(b("bs_block").__(0,[b("bs_block").__(55,[a.node])]));return 0}))}}e=a.unread_thread_fbids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(59,[e])]));f=a.message_counts;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(60,[f])]));e=a.actions;if(!(e==null)){var i=a.payload_source,j=i==null?void 0:b("bs_js_primitive").some(i);e.forEach(function(d){__p&&__p();var e=d.action_type,f=0;i==null?f=1:i.startsWith("server")||(f=1);f===1&&c.push(b("bs_block").__(1,[b("bs_block").__(5,[d.timestamp])]));if(b("bs_caml_obj").caml_equal(j,b("bs_js_primitive").some(b("MercuryPayloadSource").SERVER_SEARCH))){c.push(b("bs_block").__(0,[b("bs_block").__(35,[d,0])]));return 0}else if(b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(d.client_state),b("bs_js_primitive").some(b("MercuryMessageClientState").SEND_TO_SERVER))){c.push(b("bs_block").__(0,[b("bs_block").__(35,[d,0])]));return 0}else{f=d.thread_id;var g=d.upload_id,h=d.upload_data,k=d.message_ids;s(d);if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_MESSAGES))if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(36,[f,k,j])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FOLDER)){k=d.new_folder;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(37,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(39,[f,d.archived])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){k=d.reactions_mute_mode;var l=d.mentions_mute_mode,m=d.mute_until;l=k==null?l==null?m==null?void 0:b("bs_block").__(2,[m]):m==null?b("bs_block").__(1,[l===1]):void 0:!(l==null)||!(m==null)?void 0:b("bs_block").__(0,[k===1]);if(!(f==null)&&l!==void 0){c.push(b("bs_block").__(0,[b("bs_block").__(38,[f,l])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_READ_STATUS))if(f==null)return 0;else{m=a.from_client;c.push(b("bs_block").__(0,[b("bs_block").__(41,[f,d.mark_as_read,d.timestamp,m==null?!1:m,d.source])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(40,[f,d.is_page_follow_up])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED))if(f==null)return 0;else{k=d.canViewerReply;l=k?null:b("MessengerThreadCannotReplyReason.bs").fromMessageThreadCannotReplyReason(d.reason);c.push(b("bs_block").__(0,[b("bs_block").__(13,[f,d.canViewerReply,l])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_THREAD))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(42,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REACTION_UPDATE)){m=d.messageId;k=d.userId;if(!(m==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(45,[m,b("bs_js_primitive").nullable_to_opt(d.reaction),k,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MONTAGE_DIRECT_EXPIRE)){l=d.messageId;if(l==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(46,[l,j])]));return 0}}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LIVE_LOCATION_UPDATE)){m=d.messageId;k=d.liveLocation;if(!(m==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(47,[m,k,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REPLACE_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(48,[d,j])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(44,[g,h])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(43,[g,h,j])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SEND_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(50,[d,j])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(51,[d,j,a.from_client])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LOG_MESSAGE))if(b("MessengerMessage.bs").isLocalMessage(d))return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(52,[d,j,a.from_client])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PINNED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(53,[f,d.is_pinned,d.thread_pin_timestamp])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_MESSAGE)){l=d.messageId;m=d.removed_timestamp;if(!(l==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(62,[l,d.author,m,j])]));b("MessengerDesktopNotifications").removeNotification(l);return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(12,[f,d.page_unsubscribe_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLURRED_IMAGE_STATUS)){k=d.image_message_id;g=d.image_id;h=d.should_show;m=d.blurred_image_uri;if(!(k==null)&&!(g==null)&&!(h==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(66,[k,g,h,m,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADD_PARTICIPANTS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(14,[f,d.participants])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FLAG))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(15,[f,d.mark_as_flag])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MOVE_PENDING_TO_INBOX))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(16,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CUSTOM_LIKE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(17,[f,d.custom_like])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PROMOTE_GROUP_ADMINS)){l=d.promoted_admins;if(!(f==null)&&!(l==null)){c.push(b("bs_block").__(0,[b("bs_block").__(18,[f,l])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_GROUP_ADMINS)){k=d.removed_admin_ids;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(19,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").JOINABLE_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(20,[f,d.joinable_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(21,[f,d.approval_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_QUEUE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(22,[f,d.added_id,d.added_group_id,d.removed_id,d.removed_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").IS_PIN_PROTECTED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(23,[f,d.is_pin_protected])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_RTC_CALL_DATA))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(24,[f,d.initiator_fbid,d.call_state,d.server_info_data])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(25,[f,d.comm_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(26,[f,d.id,d.name,d.profile_pic_uri])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").EVENT_RSVP_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(27,[f,d.actor_fbid,d.rsvp_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS)){g=d.thread_connectivity_status;if(!(f==null)&&!(g==null)){c.push(b("bs_block").__(0,[b("bs_block").__(63,[f,g])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(28,[f,d.groups_sync_action,d.groups_sync_status_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(29,[f,d.groups_sync_action,d.fb_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DESCRIPTION_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(30,[f,d.group_thread_description_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_THREAD_THEME))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(31,[f,{solid_color:d.solid_color,header_color:d.header_color,footer_color:d.footer_color,gradient_colors:d.gradient_colors,theme_id:d.theme_id}])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_JOINABLE_LINK))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(32,[f,d.joinable_link])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MUTATE_TAGS)){h=d.tags_to_add;m=h==null?[]:h;l=d.tags_to_delete;k=l==null?[]:l;g=d.messageId;if(g==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(65,[g,m,k,j])]));return 0}}else return 0}});b("Utils.bs").isTruthy(a.from_client)&&e.forEach(function(d){var a=d.thread_id;if(a==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(49,[a,d.message_id])]));return 0}})}f=a.end_of_history;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(58,[f,a.payload_source])]))}d&&c.unshift(b("bs_block").__(0,[0]));return c}function ub(c,d){var a=[[]],e=function(b,c){c=b[15].get(d);if(c==null)return 0;else{a[0]=Ka(!0,b,c[1]);return 0}};b("bs_curry")._2(L,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function Y(c,d){var a=[d],e=function(b,c){c=b[10].get(d);if(c==null)return 0;else{a[0]=c;return 0}};b("bs_curry")._2(L,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function vb(a,c){var d=[void 0],e=function(a,b){d[0]=a;return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);a=d[0];if(a!==void 0)return Ka(!1,a,c);else return[]}function wb(a,c,d){__p&&__p();var e=[!1],f=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];b=b[1].length;if(a){e[0]=!0;return 0}else{e[0]=b>=d;return 0}}};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[f])])]);return e[0]}function xb(a,c){__p&&__p();var d=[!1],e=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];if(a){d[0]=!0;return 0}else{d[0]=!1;return 0}}};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return d[0]}function yb(a,c){return b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(2,[c])])])}function Z(a,c,d,e){__p&&__p();var f=[],g=function(g,h){__p&&__p();h=g[15].get(c);if(h==null)return 0;else{h=h[1];for(var i=d,j=d+e|0;i<=j;++i){var a=b("bs_belt_Option").flatMap(b("bs_belt_Array").get(h,i),function(a){return Ja(g,a)});a!==void 0&&f.push(b("bs_js_primitive").valFromOption(a))}return 0}};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[g])])]);return f}var zb=[void 0];function Ab(a,c,d,e,f,g,h){__p&&__p();var i=function(j,i){__p&&__p();zb[0]=[c,d,e];var k=j[15].get(c);k=k==null?[[],void 0]:[k[1],k[0]];var l=k[0];if(b("bs_js_primitive").undefined_to_opt(i[6][0][c])!==!0){var m=i[2];m=l.length-b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(m.get(c)),0)|0;m>0&&b("ChatReliabilityInstrumentation").logERROR("fetch made with message in flight");var n=m-d|0;n=e-n|0;if(n>0&&b("bs_caml_obj").caml_notequal(k[1],1)){k=b("MercuryServerRequests").getForFBID(a);var aa=b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_belt_Array").get(l,m-1|0),function(a){return Ja(j,a)}),function(a){return a.timestamp})),ba=i[4][0];i[4][0]=ba+1|0;i[3][0][String(ba)]=[[c,d,e],f];if(b("bs_caml_obj").caml_equal([c,d,e],zb[0])){k.fetchThreadMessages(c,m,n,aa,g,h);return 0}else return 0}else return b("bs_curry")._1(f,b("bs_belt_Array").keepMap(l,function(a){return Ja(j,a)}).slice(d,e))}else{zb[0]=void 0;i[6][0][c]=!1;return 0}};return b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[i])])])}function Bb(a,b,c,d,e,f,g){if(xb(a,b))return 0;else return Ab(a,b,c,d,e,f,g)}function $(a){var c=[0],d=function(d,a){c[0]=b("bs_caml_primitive").caml_int_min(C(d,a),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function Cb(a){var c=[0],d=function(b,a){c[0]=C(b,a);return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function Db(a){var c=[0],d=function(d,a){c[0]=b("bs_caml_primitive").caml_int_min(jb(d,a,!0),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function Eb(a){return b("bs_curry")._2(L,b("bs_js_primitive").some(a),[b("bs_block").__(1,[1])])}nb=mb[0];E=[mb[0]];f.fbid=d;f.deliveryReceipts=e;f.readReceiptsPerThread=i;f.ignoredIds=j;f.blockedIds=k;f.pendingFolderUnseenCount=l;f.typing=m;f.pendingReadStatusThreads=n;f.messages=aa;f.localIDsMap=ba;f.messagesWithUploadsInFlight=ca;f.threadlistOrderMap=o;f.pinnedThreads=p;f.montage=q;f.orderedMessageLists=r;f.unreadCounts=da;f.initialUnreadCounts=ea;f.unseenTimestamp=fa;f.threads=a;f.thread=c;f.send=L;f.compute=M;f.getThreadMetaNow=N;f.getMultiThreadMeta=O;f.getThreadMeta=P;f.createNewLocalThread=Q;f.createNewLocalThreadGenerateID=R;f.createNewLocalGroupGeneralThreadGenerateID=S;f.isEmptyLocalThread=T;f.isNewEmptyLocalThread=U;f.getPinnedThreadlist=rb;f.unsubscribeThread=sb;f.sendJS=W;f.invalidateSearchedMessages=yb;f.hasLoadedNMessages=wb;f.hasLoadedAllMessages=xb;f.getCurrentlyLoadedMessages=ub;f.getServerMessageID=Y;f.getMessagesFromIDs=vb;f.getThreadMessagesRange=Ab;f.getThreadMessagesRangeNow=Z;f.fetchMoreMessages=Bb;f.processPollStickerVoted=tb;f.getUnseenUnreadCount=$;f.getUnseenUnreadCountRaw=Cb;f.getUnseenCount=Db;f.markAsSeen=Eb;f.processJSActions=X;f.Provider=E;f.jsComponent=nb}),null);
__d("MessengerState.re",["bs_curry","MessengerState.bs"],(function(a,b,c,d,e,f){__p&&__p();a=b("MessengerState.bs").fbid;f.fbid=a;c=b("MessengerState.bs").deliveryReceipts;f.deliveryReceipts=c;d=b("MessengerState.bs").readReceiptsPerThread;f.readReceiptsPerThread=d;e=b("MessengerState.bs").ignoredIds;f.ignoredIds=e;a=b("MessengerState.bs").blockedIds;f.blockedIds=a;c=b("MessengerState.bs").pendingFolderUnseenCount;f.pendingFolderUnseenCount=c;d=b("MessengerState.bs").typing;f.typing=d;e=b("MessengerState.bs").pendingReadStatusThreads;f.pendingReadStatusThreads=e;a=b("MessengerState.bs").messages;f.messages=a;c=b("MessengerState.bs").localIDsMap;f.localIDsMap=c;d=b("MessengerState.bs").messagesWithUploadsInFlight;f.messagesWithUploadsInFlight=d;e=b("MessengerState.bs").threadlistOrderMap;f.threadlistOrderMap=e;a=b("MessengerState.bs").pinnedThreads;f.pinnedThreads=a;c=b("MessengerState.bs").montage;f.montage=c;d=b("MessengerState.bs").orderedMessageLists;f.orderedMessageLists=d;e=b("MessengerState.bs").unreadCounts;f.unreadCounts=e;a=b("MessengerState.bs").initialUnreadCounts;f.initialUnreadCounts=a;c=b("MessengerState.bs").unseenTimestamp;f.unseenTimestamp=c;d=b("MessengerState.bs").threads;f.threads=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").thread,a,c);return a};f.thread=e;a=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").compute,a,c);return a};f.compute=a;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getThreadMetaNow,a,c);return a};f.getThreadMetaNow=c;d=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getThreadMeta,a,c,d,e);return a};f.getThreadMeta=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").isEmptyLocalThread,a,c);return a};f.isEmptyLocalThread=e;a=b("MessengerState.bs").getPinnedThreadlist;f.getPinnedThreadlist=a;c=function(a,c,d){a=b("bs_curry")._3(b("MessengerState.bs").hasLoadedNMessages,a,c,d);return a};f.hasLoadedNMessages=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getServerMessageID,a,c);return a};f.getServerMessageID=d;e=function(a,c,d,e,f,g,h){a=b("bs_curry")._7(b("MessengerState.bs").getThreadMessagesRange,a,c,d,e,f,g,h);return a};f.getThreadMessagesRange=e;a=b("MessengerState.bs").getUnseenUnreadCount;f.getUnseenUnreadCount=a;c=b("MessengerState.bs").getUnseenCount;f.getUnseenCount=c;(function(a){return null});d=b("MessengerState.bs").jsComponent;f.jsComponent=d}),null);
__d("M4Icon.bs",["cssVar","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=[];function a(a){__p&&__p();var c=b("CurrentUser").isWorkUser();if(c)if(typeof a==="number")switch(a){case 0:return"#FFFFFF";case 1:return"#BEC3C9";case 2:return"#8D949E"}else return"#373e4c";else if(typeof a==="number")switch(a){case 0:return"#FFFFFF";case 1:return"#bec2c9";case 2:return"#8D949E"}else return a[0]}d=0;e=1;f.Style=c;f.white=d;f.light=e;f.getColor=a}),null);
__d("M4IconSVG.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.size;c=c!==void 0?c:"16px";a=a.children;a=b("React").Children.toArray(a);return b("React").createElement("svg",{key:"svg",className:"svgIcon",height:c,width:c,version:"1.1",viewBox:"0 0 16 16",x:"0px",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",y:"0px"},a)}c=a;f.make=c}),null);
__d("M4IconSettings.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconSettings");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue",h={fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=!e;return b("React").createElement(b("M4IconSVG.bs").make,{children:a?b("React").createElement("g",{key:"filled"},b("React").createElement("path",{key:"outer",style:h,d:"M15.5,8.9V7.1l-2.2-0.5c-0.1-0.5-0.3-0.9-0.6-1.3l1.2-1.9l-1.2-1.2l-1.9,1.2C10.3,3,9.9,2.8,9.4,2.7L8.9,0.5\n          \t\t\tH7.1L6.6,2.7C6.1,2.8,5.7,3,5.2,3.2L3.3,2.1L2.1,3.3l1.2,1.9C3,5.7,2.8,6.1,2.7,6.6L0.5,7.1v1.7l2.2,0.5c0.1,0.5,0.3,0.9,0.6,1.3\n          \t\t\tl-1.2,1.9l1.2,1.2l1.9-1.2c0.4,0.2,0.9,0.4,1.3,0.6l0.5,2.2h1.7l0.5-2.2c0.5-0.1,0.9-0.3,1.3-0.6l1.9,1.2l1.2-1.2l-1.2-1.9\n          \t\t\tc0.2-0.4,0.4-0.9,0.6-1.3L15.5,8.9z"}),b("React").createElement("circle",{key:"inner",style:h,cx:"8",cy:"8",r:"2.5"})):b("React").createElement("path",{key:"all",d:"M15.5,8.9V7.1l-2.2-0.5c-0.1-0.5-0.3-0.9-0.6-1.3l1.2-1.9l-1.2-1.2l-1.9,1.2C10.3,3,9.9,2.8,9.4,2.7L8.9,0.5 H7.1L6.6,2.7C6.1,2.8,5.7,3,5.2,3.2L3.3,2.1L2.1,3.3l1.2,1.9C3,5.7,2.8,6.1,2.7,6.6L0.5,7.1v1.7l2.2,0.5c0.1,0.5,0.3,0.9,0.6,1.3 l-1.2,1.9l1.2,1.2l1.9-1.2c0.4,0.2,0.9,0.4,1.3,0.6l0.5,2.2h1.7l0.5-2.2c0.5-0.1,0.9-0.3,1.3-0.6l1.9,1.2l1.2-1.2l-1.2-1.9 c0.2-0.4,0.4-0.9,0.6-1.3L15.5,8.9z M8,11c-1.7,0-3-1.3-3-3c0-1.7,1.3-3,3-3c1.7,0,3,1.3,3,3C11,9.7,9.7,11,8,11z",fill:f,stroke:f})})},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatTabMenuIcon.bs",["M4Icon.bs","ReasonReact.bs","M4IconSettings.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("ChatTabMenuIcon");function h(a){return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var c=b("M4Icon.bs").getColor(a);return b("ReasonReact.bs").element(void 0,void 0,b("M4IconSettings.bs").make(!0,c,[]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.iconStyle)});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("M4IconCamcorder.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconCamcorder");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue",h={fill:e?f:"none",stroke:f};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement(b("M4IconSVG.bs").make,{children:null},b("React").createElement("path",{key:"body",style:h,d:"M9.5,13.5h-7c-1.1,0-2-0.9-2-2v-7c0-1.1,0.9-2,2-2h7c1.1,0,2,0.9,2,2v7C11.5,12.6,10.6,13.5,9.5,13.5z"}),b("React").createElement("line",{key:"focus-ring",stroke:e?"none":f,x1:"13.5",x2:"13.5",y1:"5",y2:"11"}),b("React").createElement("path",{key:"lens",style:h,d:"M15,3.6l-3.5,3V8v1.4l3.5,3c0.2,0.2,0.5,0,0.5-0.3V8V3.9C15.5,3.6,15.2,3.4,15,3.6z"}))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("M4IconPhone.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconPhone");function h(a,c,d){d=a!==void 0?a:!0;a=c!==void 0?c:"blue";var e={fill:d?a:"none",stroke:a};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement(b("M4IconSVG.bs").make,{children:b("React").createElement("path",{key:"all",style:e,d:"M8.8,11.6c0.1,0,0.1,0.1,0.2,0.1c0.4,0.2,0.8,0.1,1-0.3c0.1-0.2,0.2-0.4,0.3-0.6c0.2-0.2,0.5-0.6,0.8-0.7 C11.5,10,11.8,10,12,10c0.4,0,0.9,0.4,1.6,0.8c0.7,0.4,1.2,0.8,1.5,1c0.2,0.2,0.3,0.4,0.3,0.6c0,0.4,0,1.2-0.7,1.9 c-1,1.1-2.5,1.6-4.3,1c-1.8-0.6-4.1-1.7-6-3.7s-3.1-4.2-3.7-6s-0.2-3.3,1-4.3c0.7-0.6,1.4-0.7,1.9-0.7c0.2,0,0.5,0.1,0.6,0.3 c0.2,0.3,0.6,0.8,1,1.5C5.7,3.1,6,3.6,6,4c0,0.3,0,0.6-0.1,0.8C5.8,5.1,5.5,5.4,5.2,5.6C5,5.8,4.8,5.9,4.7,6C4.3,6.1,4.1,6.6,4.3,7 c0,0.1,0.1,0.1,0.1,0.2C5.5,9,7,10.5,8.8,11.6z"})})},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatVideoCallIcon.bs",["M4Icon.bs","M4IconPhone.bs","ReasonReact.bs","M4IconCamcorder.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("ChatVideoCallIcon");function h(a,c,d){return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var d=b("M4Icon.bs").getColor(c);if(a)return b("ReasonReact.bs").element(void 0,void 0,b("M4IconPhone.bs").make(!0,d,[]));else return b("ReasonReact.bs").element(void 0,void 0,b("M4IconCamcorder.bs").make(!0,d,[]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.isAudio,a.iconStyle,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("M4IconClose.bs",["React","M4IconSVG.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.color;a=a!==void 0?a:"blue";return b("React").createElement(b("M4IconSVG.bs").make,{children:b("React").createElement("g",{key:"close",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{key:"iconName",transform:"translate(-712.000000, -1096.000000)"},b("React").createElement("g",{key:"group",stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",transform:"translate(709.000000, 320.000000)"},b("React").createElement("path",{key:"stroke1",d:"M5.833,778.833 L16.167,789.167"}),b("React").createElement("path",{key:"stroke2",d:"M16.167,778.833 L5.833,789.167"}))))})}c=a;f.make=c}),null);
__d("M4IconPhoto.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconPhoto");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue",h={fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement(b("M4IconSVG.bs").make,{children:null},e?b("React").createElement("g",{key:"filled"},b("React").createElement("path",{key:"bg",d:"M1.3,13.1L2,1.7c0-0.1,0-0.2,0-0.4L1.2,1.4C0.5,1.5,0,2.4,0,3.4l0.6,10.9c0,0.5,0.2,0.9,0.4,1.3C1.4,15.8,1.7,16,1.9,16 c0,0,0.1,0,0.1,0l0.3,0C1.7,15.4,1.2,14.3,1.3,13.1z",fill:f}),b("React").createElement("path",{key:"hills",d:"M13,6.2c-0.2-0.2-0.6-0.3-0.8-0.1L9.4,8.5c-0.2,0.1-0.2,0.4,0,0.6L10,9.8c0.2,0.2,0.2,0.6-0.1,0.8c-0.1,0.1-0.2,0.1-0.4,0.1 c-0.2,0-0.3-0.1-0.4-0.2L7.3,8.3C7.1,8.1,6.7,8,6.5,8.2l-2.6,2l-0.4,3.1c0,0.5,0.2,1.6,0.7,1.7l8.8,0.6c0.2,0,0.5,0,0.7-0.2 c0.2-0.2,0.5-0.7,0.6-0.9l0.6-5.9L13,6.2z",fill:f}),b("React").createElement("path",{key:"frame",style:h,d:"M12.9,15.5l-8.2-0.7C4,14.7,3.4,14,3.4,13.2l1-11.4C4.5,1,5.2,0.5,6,0.5l8.2,0.7C15,1.3,15.5,2,15.5,2.8 l-1,11.4C14.4,15,13.7,15.6,12.9,15.5z"})):b("React").createElement("g",{key:"outline"},b("React").createElement("path",{key:"bg",d:"M2.1,14.7c-0.1-0.1-0.2-0.3-0.2-0.5l0-0.1c-0.1-0.3-0.1-0.7-0.1-1.1l0-0.1L1,3.3c0-0.5,0.3-0.9,0.8-0.9l1-0.1l0.1-0.7\n              c0-0.1,0-0.2,0.1-0.4L1.7,1.4c-1,0.1-1.8,1-1.7,2l0.9,10.9c0,0.5,0.3,0.9,0.7,1.3C1.9,15.8,2.3,16,2.8,16c0.1,0,0.1,0,0.2,0l0.5,0\n              C2.8,15.7,2.4,15.2,2.1,14.7z",fill:f}),b("React").createElement("path",{key:"frame",style:h,d:"M12.9,15.5l-8.3-0.7c-0.8-0.1-1.4-0.8-1.3-1.6l1-11.4C4.3,1,5.1,0.4,5.8,0.5l8.3,0.7C15,1.3,15.5,2,15.5,2.8 l-1,11.4C14.4,15,13.7,15.6,12.9,15.5z"}),b("React").createElement("polyline",{key:"left-hill",style:h,points:"3.5,11 6.9,8.6 9.2,11.3 "}),b("React").createElement("polyline",{key:"right-hill",style:h,points:"14.6,9 12.5,6.5 8.3,10 "})),b("React").createElement("circle",{key:"sun",cx:"7.5",cy:"4.5",fill:f,r:"1.5"}))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("M4IconSend.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconSend");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue";return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement(b("M4IconSVG.bs").make,{children:e?b("React").createElement("path",{key:"filled",d:"M11,8.3L2.6,8.8C2.4,8.8,2.3,8.9,2.3,9l-1.2,4.1c-0.2,0.5,0,1.1,0.4,1.5C1.7,14.9,2,15,2.4,15c0.2,0,0.4,0,0.6-0.1l11.2-5.6 C14.8,9,15.1,8.4,15,7.8c-0.1-0.4-0.4-0.8-0.8-1L3,1.1C2.5,0.9,1.9,1,1.5,1.3C1,1.7,0.9,2.3,1.1,2.9L2.3,7c0,0.1,0.2,0.2,0.3,0.2 L11,7.7c0,0,0.3,0,0.3,0.3S11,8.3,11,8.3z",fill:f}):b("React").createElement("g",{key:"outline"},b("React").createElement("path",{key:"perimeter",d:"M2.4,1.6l12,6c0.7,0.4,0.7,1.4,0,1.8l-12,6C1.7,15.8,0.8,15,1,14.2l1.7-5.4c0.1-0.2,0.1-0.4,0-0.6L1,2.8 C0.8,2,1.7,1.2,2.4,1.6z",fill:"none",stroke:f,strokeMiterlimit:"10"}),b("React").createElement("line",{key:"center-line",fill:"none",stroke:f,strokeMiterlimit:"10",x1:"2.8",x2:"14.8",y1:"8.5",y2:"8.5"}))})},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("LazyWorkMultiCompanyChatTooltipReact.bs",["ReasonReact.bs","LazyWorkMultiCompanyChatTooltip.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("LazyWorkMultiCompanyChatTooltip.react"),{},a)}f.make=a}),null);
__d("WorkChatRedesignedMessageListCheck.bs",["gkx","CurrentUser","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("895574")&&b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;f.enabled=a}),null);
__d("WorkChatRedesignedMessageListCheck.re",["WorkChatRedesignedMessageListCheck.bs"],(function(a,b,c,d,e,f){a=b("WorkChatRedesignedMessageListCheck.bs").enabled;f.enabled=a}),null);
__d("messengerCustomColorUtils",["ChatConfig"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=c||{};b("ChatConfig").getBool("chat_tab_has_gradients")||(c.backgroundColor=a);return c}e.exports={customBubbleStyle:a}}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new(b("Cache"))(),this.$2=new(b("Cache"))()}var c=a.prototype;c.getMenuItems=function(a,c,d){__p&&__p();var e=this;if(this.$1.has(a)){c(this.$1.get(a));return}var f=b("XMessengerBotsMenuController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(f).setHandler(function(b){b=b.payload.menu;e.$1.set(a,b);c(b)}).setErrorHandler(function(a){d()}).send()};c.getHasPageSetting=function(a,c,d,e){__p&&__p();var f=this;if(!this.$2.has(a)){var g=b("MessengerBotComposerWebGraphQLQuery").getURI({node_id:a});new(b("AsyncRequest"))().setURI(g).setHandler(function(b){b=b.payload.data.node;b=b&&b.commerce_page_settings||[];f.$2.set(a,b);c(b.indexOf(e)!==-1)}).setErrorHandler(function(b){f.$2.set(a,[]),d()}).setAllowCrossPageTransition(!0).send()}g=this.$2.get(a)||[];c(g.indexOf(e)!==-1);return g.indexOf(e)!==-1};return a}();e.exports=new a()}),null);
__d("MessengerTabsThreadSearchLoader",["Promise","Bootloader","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_store:null,_actions:null,_promise:null,getStoreEnforce:function(){b("nullthrows")(this._store,"Tab thread search store is not loaded");return this._store},getActionsEnforce:function(){b("nullthrows")(this._actions,"Tab thread search actions are not loaded");return this._actions},isLoaded:function(){return this._store&&this._actions},load:function(){var a=this;this._promise||(this._promise=new(b("Promise"))(function(c){b("Bootloader").loadModules(["MessengerThreadSearchActions","MessengerTabsThreadSearchStore"],function(b,d){a._store=d.get(),a._actions=b,c({store:d,actions:b})},"MessengerTabsThreadSearchLoader")}));return this._promise}};e.exports=a}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.autoFocus&&b("ReactDOM").findDOMNode(this).focus()};return c}(b("Link.react"));e.exports=a}),null);