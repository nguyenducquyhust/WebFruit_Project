if (self.CavalryLogger) { CavalryLogger.start_js(["jvsCt"]); }

__d("DelegatedVideoPriorityAdjuster",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=function(){},this.$2=0}var b=a.prototype;b.setOnPriorityChanged=function(a){this.$1=a};b.getPriorityAdjustment=function(){return this.$2};b.notifyAdjustment=function(a){if(this.$2===a)return;this.$2=a;this.$1(this.$2)};b.cleanup=function(){this.$1=function(){}};return a}();e.exports=a}),null);
__d("VideoControllerPlayingStateEmitter",["EventEmitter","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$VideoControllerPlayingStateEmitter2=null;c.$VideoControllerPlayingStateEmitter3=b;return c}var d=c.prototype;d.enable=function(){var a=this;this.$VideoControllerPlayingStateEmitter4().addSubscriptions(this.$VideoControllerPlayingStateEmitter3.addListener("stateChange",function(){var b=a.$VideoControllerPlayingStateEmitter2;a.$VideoControllerPlayingStateEmitter2=a.$VideoControllerPlayingStateEmitter3.getState();if(a.$VideoControllerPlayingStateEmitter2===b)return;a.$VideoControllerPlayingStateEmitter5(a.$VideoControllerPlayingStateEmitter2)}));this.$VideoControllerPlayingStateEmitter2=this.$VideoControllerPlayingStateEmitter3.getState();this.$VideoControllerPlayingStateEmitter5(this.$VideoControllerPlayingStateEmitter2)};d.setOnPlaying=function(a){this.$VideoControllerPlayingStateEmitter4().addSubscriptions(this.addListener("play",a))};d.setOnPaused=function(a){this.$VideoControllerPlayingStateEmitter4().addSubscriptions(this.addListener("pause",a))};d.disable=function(){this.$VideoControllerPlayingStateEmitter2=null,this.$VideoControllerPlayingStateEmitter1&&(this.$VideoControllerPlayingStateEmitter1.release(),this.$VideoControllerPlayingStateEmitter1=null)};d.$VideoControllerPlayingStateEmitter4=function(){this.$VideoControllerPlayingStateEmitter1||(this.$VideoControllerPlayingStateEmitter1=new(b("SubscriptionsHandler"))());return this.$VideoControllerPlayingStateEmitter1};d.$VideoControllerPlayingStateEmitter5=function(a){a==="playing"?this.emit("play"):a==="paused"&&this.emit("pause")};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoLiveTrace",["LiveTraceWwwVideoPlayerFalcoEvent","VideosInfraLoapTypedLogger","gkx","guid","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g="x-fb-video-livetrace-ids",h="x-fb-video-livetrace-parentsource",i="x-fb-video-livetrace-streamtype",j="x-fb-origin-hit",k="x-fb-edge-hit",l="PLY:WWW:",m=l+"DL:",n=l+"DIS:",o=1e3,p=/[\r\n]+/;a=function(){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.$6=[];this.$1=a;this.$2=null;a=d+":"+c.substring(0,5);this.$3=l+a;this.$4=m+a;this.$5=n+a;this.$7=b("throttle")(function(a){return e.$8(a)},o)}var c=a.prototype;c.setStreamType=function(a){this.$2=a};c.$9=function(a,c,d,e,f,g){__p&&__p();var h=Date.now();if(b("gkx")("953176")){var i=Number(this.$1),j=Number(this.$2||0);b("LiveTraceWwwVideoPlayerFalcoEvent").log(function(){return{stream_id:i,stream_type:j,event_name:c,event_severity:f,event_creation_time:h,source:a,trace_id:d,parent_source:e,metadata:g}})}else{var k=b("guid")();k=new(b("VideosInfraLoapTypedLogger"))().setStreamID(this.$1).setEventID(k).setStreamType(this.$2||0).setEventName(c).setEventSeverity(f).setEventCreationTime(h).setSource(a).setTraceID(d).setParentSource(e).setMetadata(g);k.log()}};c.onUpdateStatus=function(a){this.$7(a)};c.$8=function(a){a=a.position*1e3;var b=this.$6;while(b.length&&b[b.length-1].presentationTimestamp<=a){var c=b.pop();this.$9(this.$5,"FRAME",c.traceId,this.$4,"SUCCESS",null)}};c.handleHeadersString=function(a,b){a=a.trim().split(p);this.$10(a.map(function(a){a=a.split(": ");return[a.shift().toLowerCase(),a.shift()]}),b)};c.handleHeaders=function(a,b){__p&&__p();var c=[];for(var a=a.entries(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;c.push(f)}this.$10(c,b)};c.$10=function(a,c){__p&&__p();var d=this;if(!b("gkx")("678910"))return;var e="null",f=[],l=[],m="";a.forEach(function(a){__p&&__p();var b=a[0].toLowerCase();a=a[1];if(b===g&&a){var c=a.split(",");c.forEach(function(a){a=a.split(":");var b=+a[0];a=+a[1];f.push(b);l.unshift({traceId:b,presentationTimestamp:a})})}b===h&&(m=a);d.$2===null&&b===i&&(d.$2=parseInt(a,10));(b===j||b===k)&&parseInt(a,10)&&(e=b===j?"origin":"edge")});var n=c||{};n.hit=e;l.length&&m!==""&&(this.$6=l.concat(this.$6));if(f.length&&m!==""){var o=m;f.forEach(function(a){return d.$9(d.$4,"SEGMENT",a,o,"SUCCESS",n)})}};c.handleXHR=function(a,b){this.handleHeadersString(a.getAllResponseHeaders(),b)};c.getLiveTraceContext=function(){return{streamId:this.$1,streamType:this.$2||0,sourceId:this.$3}};return a}();e.exports=a}),null);
__d("VideoMimeTypes",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c){return a+'; codecs="'+b+", "+c+'"'}f="mp4a.40.2";function b(a){return"avc1.42E0"+a.toString(16).toUpperCase()}function c(a){return"avc1.4D40"+a.toString(16).toUpperCase()}function d(a){return"avc1.6400"+a.toString(16).toUpperCase()}var g="video/mp4";b={h264baseline:a(g,b(30),f),h264main30avc:a(g,c(30),f),h264main31avc:a(g,c(31),f),h264high50avc:a(g,d(50),f),h264high51avc:a(g,d(51),f)};e.exports=b}),null);
__d("VideoPlayerABRQualityTracker",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=null}var b=a.prototype;b.setLastQualitySwitchReason=function(a){this.$2=a};b.getABREvaluation=function(){__p&&__p();var a=[];this.$1&&(a=this.$1.flushABREvaluationSet());var b=0,c=0,d=0,e=0,f=this.$2;for(var g=0;g<a.length;g++)switch(a[g]){case"ideal":b++;break;case"conservative":c++;break;case"aggressive":d++;break;case"conservative_resolution_constrained":e++;break}return{idealSamples:b,conservativeSamples:c,aggressiveSamples:d,conservativeResolutionConstrainedSamples:e,lastQualitySwitchReason:f}};return a}();e.exports=a}),null);
__d("VideoPlayerReasonTransitionHelper",["VideoPlayerReasonTransitionExperiment"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.getReason=function(){return!b("VideoPlayerReasonTransitionExperiment").provideReason?null:this.$1};return a}();e.exports=a}),null);
__d("VideoPlayerUIComponentDrawer",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$VideoPlayerUIComponentDrawer1=b;d.$VideoPlayerUIComponentDrawer2=c;d.$VideoPlayerUIComponentDrawer4=!1;return d}var c=b.prototype;c.reserve=function(){if(this.$VideoPlayerUIComponentDrawer4)return;this.$VideoPlayerUIComponentDrawer4=!0;this.emit("reserve")};c.release=function(){if(!this.$VideoPlayerUIComponentDrawer4)return;this.$VideoPlayerUIComponentDrawer4=!1;this.emit("release")};c.getPriority=function(){return this.$VideoPlayerUIComponentDrawer1};c.getHeight=function(){return this.$VideoPlayerUIComponentDrawer2};c.setHeight=function(a){this.$VideoPlayerUIComponentDrawer2=a,this.emit("heightChange")};c.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b==="reposition"&&(this.$VideoPlayerUIComponentDrawer3=e[0]);(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};c.reposition=function(){this.emit("reposition",this.$VideoPlayerUIComponentDrawer3)};c.isReserved=function(){return this.$VideoPlayerUIComponentDrawer4};return b}(b("EventEmitter"));a.priorities={EmbeddedControls:0,AdBreakStartingIndicator:1,ClickForMore:2,PollCard:5,GameshowCard:6,Subtitles:3,SphericalMouseAnimation:4};e.exports=a}),null);
__d("VideoPlayerUIComponentDrawerController",["VideoPlayerUIComponentDrawer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return a.getPriority()-b.getPriority()};a=function(){__p&&__p();function a(){this.$1=[]}var c=a.prototype;c.register=function(a,c){__p&&__p();var d=this;c=new(b("VideoPlayerUIComponentDrawer"))(a,c);c.addListener("reserve",function(){return d.$2(a)});c.addListener("release",function(){return d.$2(a)});c.addListener("heightChange",function(){return d.$2(a)});this.$1.push(c);this.$1.sort(g);return c};c.$2=function(a){var b=0;this.$1.forEach(function(c){c.getPriority()>a&&c.emit("reposition",b),c.isReserved()&&(b+=c.getHeight())})};return a}();e.exports=a}),null);
__d("VideoPlayerVolumeSettings",["WebStorage"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=1,this.$2=1}var c=a.prototype;c.getVolume=function(){var a=b("WebStorage").getLocalStorage();if(a){a=a.getItem("videoPlayerControllerVolume");return a===null||isNaN(+a)?1:+a}return this.$1};c.getSessionVolume=function(){return this.$1};c.setSessionVolume=function(a){this.$1=a};c.saveVolume=function(a){var c=b("WebStorage").getLocalStorage();c&&c.setItem("videoPlayerControllerVolume",a);this.$1=a};c.getLastVolumeBeforeMute=function(){var a=b("WebStorage").getLocalStorage();if(a){a=a.getItem("videoPlayerControllerLastVolumeBeforeMute");return a===null||isNaN(+a)?1:+a}return this.$2};c.saveLastVolumeBeforeMute=function(a){var c=b("WebStorage").getLocalStorage();c&&c.setItem("videoPlayerControllerLastVolumeBeforeMute",a);this.$2=a};return a}();c=new a();e.exports=c}),null);
__d("canVideoPlayType",["DOM"],(function(a,b,c,d,e,f){var g=null;function a(a){g=g||b("DOM").create("video");return!("canPlayType"in g)?"":g.canPlayType(a)}e.exports=a}),null);
__d("logVideosClickTracking",["clickRefAction"],(function(a,b,c,d,e,f){function a(a){b("clickRefAction")("click",a,null,"FORCE")}e.exports=a}),null);
__d("VideoPlayerController",["csx","cx","invariant","Promise","Arbiter","Banzai","Bootloader","CSS","CurrentUser","DelegatedVideoPriorityAdjuster","DOM","DOMDimensions","DOMQuery","ErrorUtils","EventEmitter","FBLogger","FullScreen","JSLogger","JSResource","LiveVideoCopyrightActionQueryWebGraphQLQuery","LiveVideoCopyrightActionSubscription","MediaController","Parent","Run","ScriptPath","SparkMD5","SphericalVideoPlayerEvents","SubscriptionsHandler","TahoeVariables","URI","VideoAsyncLoggerHelper","VideoChannelViewChainLengthManager","VideoControllerPlayingStateEmitter","VideoLiveTrace","VideoMimeTypes","VideoPermalinkURI","VideoPlaybackQuality","VideoPlayerABRQualityTracker","VideoPlayerApiEvents","VideoPlayerConnectionQuality","VideoPlayerExperiments","VideoPlayerFormatsMap","VideoPlayerHTML5Experiments","VideoPlayerLogger","VideoPlayerLoggerErrorStates","VideoPlayerLoggerFallbackReasons","VideoPlayerReasonTransitionHelper","VideoPlayerResizeSettings","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaConfig","VideoPlayerStateBasedLoggingEvents","VideoPlayerUIComponentDrawer","VideoPlayerUIComponentDrawerController","VideoPlayerVolumeSettings","VideosRenderingInstrumentation","VideoViewabilityKeyEvents","VideoViewabilityLogging","VideoVisibilityObserver","ViewportTrackingHelper","Visibility","WebGraphQL","XVideoDataController","canVideoPlayType","clearInterval","clearTimeout","collectDataAttributes","enumerate","forwardEvent","getContextualParent","getElementPosition","getFullScreenElement","getVideoComponentName","getViewportDimensions","gkx","guid","ifRequired","logVideosClickTracking","mapObject","performanceAbsoluteNow","promiseDone","requireWeak","setInterval","setTimeout","uniqueID"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=b("VideoAsyncLoggerHelper").operateAsync,k=b("VideoPlaybackQuality").getDroppedFrames,l=b("VideoPlaybackQuality").getTotalFrames,m=null;b("requireWeak")("LiveVideoPlayerStore",function(a){return m=a});var n=5,o=1;function p(){return b("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?b("performanceAbsoluteNow")():Date.now()}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e,f=c.video_id,g=c.video_ids,h=c.video_url,i=c.video_urls,j=c.chaining_token,m=c.video_channel_id,n=c.video_list_id,o=c.reaction_video_channel_type,q=c.reaction_video_channel_subtype,r=c.source,s=c.ad_client_token,t=c.should_autoplay,u=c.immediateplay_reason,v=c.player_version,w=c.autoplay_setting,x=c.apiModule,y=c.apiConfig,z=c.useInlineFallback,A=c.accessToken,B=c.projection,C=c.playerOrigin,D=c.playerSuborigin,E=c.isBroadcast,F=c.isInstreamAd,G=c.components,H=c.trackingCodes,I=c.alwaysShowCaptions;c.disableLogging;var J=c.subtitleBackgroundColor,K=c.subtitleBackgroundOpacity,L=c.subtitleTextColor,M=c.subtitleTextSize,N=c.video_path,O=c.customLoggingProps,P=c.broadcasterOrigin,Q=c.allowCrossPageTransition,R=c.isReactPlayer,S=c.offsettype,T=c.offsetvalue,U=c.upstreamPlayerSource,V=c.shouldLogVideoViewability,W=c.livingRoomSessionID,X=c.broadcastId,Y=c.isAdsPreview,Z=c.isInjectedAds,$=c.isBroadcaster,aa=c.keepPlayingOnDialog,ba=c.isChainedLivingRoom,ca=c.liveLinearChannelId,da=c.isReplayLivingRoom;c=c.device_id;var ea=d.root_element,fa=d.container_element;d=d.video_element;e=a.call(this)||this;e.$VideoPlayerController20=!1;e.$VideoPlayerController38=!1;e.$VideoPlayerController76=new Set(b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);e.$VideoPlayerController77=0;e.$VideoPlayerController109=[];e.$VideoPlayerController115=null;e.$VideoPlayerController116=null;e.$VideoPlayerController117=new(b("EventEmitter"))();e.$VideoPlayerController122=null;e.emitHeartbeat=function(){if(!e.isState("playing")||!e.getVideoNode()){e.stopHeartbeat();return}if(b("VideoPlayerHTML5Experiments").heartbeatSkipOnBuffering&&e.isBuffering())return;e.getVideoAPI().logHeartbeat()};e.$VideoPlayerController166=function(){if(!b("VideoPlayerExperiments").allowBufferingErrorForHiddenTab&&b("Visibility").isHidden()){e.$VideoPlayerController165();e.$VideoPlayerController98=b("setTimeout")(e.$VideoPlayerController166,e.$VideoPlayerController104);return}var a=e.getVideoAPI().isPaused()!==void 0?!e.getVideoAPI().isPaused():e.getState()==="playing";a&&(e.logError({error:"BUFFERING_TIMEOUT",message:"video has been in buffering state for over "+e.$VideoPlayerController104+"ms.",isPlayback:e.isPlayRequestPending()}),e.$VideoPlayerController165(),e.emit("error",b("VideoPlayerLoggerFallbackReasons").TIMEOUT))};e.$VideoPlayerController113=b("guid")();e.$VideoPlayerController46=0;e.$VideoPlayerController24=0;e.$VideoPlayerController23=new Map();e.$VideoPlayerController79={};O&&e.setLogEntryPropertyGetters(O);if(t===void 0)throw new Error("Must pass should_autoplay to "+e.constructor.name+"!");e.$VideoPlayerController22=new(b("VideoPlayerUIComponentDrawerController"))();e.$VideoPlayerController13=new Map();e.$VideoPlayerController57=B;e.$VideoPlayerController1=A;e.$VideoPlayerController67=!!t;e.$VideoPlayerController68=u;e.$VideoPlayerController8=w;e.$VideoPlayerController2=s;e.$VideoPlayerController53=!1;e.$VideoPlayerController89=d;e.$VideoPlayerController66=ea;e.$VideoPlayerController15=fa;e.$VideoPlayerController33=!1;e.$VideoPlayerController34=!1;e.$VideoPlayerController56=v;e.$VideoPlayerController88=f||g&&g[0]||"";e.$VideoPlayerController91=h||i&&i[0];e.$VideoPlayerController90=N;e.$VideoPlayerController11=j;e.$VideoPlayerController85=m;e.$VideoPlayerController86=n;e.$VideoPlayerController54=C;e.$VideoPlayerController55=D||r;e.$VideoPlayerController31=E;e.$VideoPlayerController39=F;e.$VideoPlayerController81=H;e.$VideoPlayerController3=I;e.$VideoPlayerController71=J||"";e.$VideoPlayerController72=K==void 0?0:K;e.$VideoPlayerController73=L||"";e.$VideoPlayerController74=M==void 0?0:M;e.$VideoPlayerController29=b("uniqueID")();e.$VideoPlayerController63=o;e.$VideoPlayerController64=q;e.$VideoPlayerController116=X;e.$VideoPlayerController118=Y;e.$VideoPlayerController119=Z;e.$VideoPlayerController120=aa;e.$VideoPlayerController5=x;e.$VideoPlayerController4=y;e.$VideoPlayerController75=e.$VideoPlayerController5.getStartMutedFromConfig(e.$VideoPlayerController4);e.$VideoPlayerController43=e.$VideoPlayerController5.getStreamTypeFromConfig(e.$VideoPlayerController4);e.$VideoPlayerController42=e.$VideoPlayerController5.getIsServableViaFbmsFromConfig(e.$VideoPlayerController4);e.$VideoPlayerController40=e.$VideoPlayerController5.getIsPlayingLiveFromConfig(e.$VideoPlayerController4);e.$VideoPlayerController41=e.$VideoPlayerController5.getIsGamingFromConfig(e.$VideoPlayerController4);e.isLiveVideo()&&e.$VideoPlayerController5.getIsLiveTraceEnabledOnPlayer(e.$VideoPlayerController4)&&e.$VideoPlayerController116&&(e.$VideoPlayerController115=new(b("VideoLiveTrace"))(e.$VideoPlayerController116,e.$VideoPlayerController113,b("CurrentUser").getAccountID()));e.$VideoPlayerController111=!!V;e.$VideoPlayerController36=e.$VideoPlayerController5.getIsSpherical(e.$VideoPlayerController4);O={is_ad:e.isAd(),is_live:e.$VideoPlayerController40,player_format:e.$VideoPlayerController124(e.isFullscreen(),r)||"unknown",connection_quality:b("VideoPlayerConnectionQuality").evaluate(b("VideoPlayerShakaBandwidthEstimator").getBandwidth),is_spherical:e.$VideoPlayerController36,content_category:"general",latency_level:"normal",servable_via_fbms:void 0,servable_via_fmbs:void 0};b("gkx")("967666")?O.servable_via_fmbs=!1:O.servable_via_fbms=!1;e.$VideoPlayerController14=new(b("VideoPlayerShakaConfig"))(O);e.$VideoPlayerController112=W;e.$VideoPlayerController121=ba;e.$VideoPlayerController123=da;e.$VideoPlayerController122=ca;e.$VideoPlayerController43==="progressive"?e.$VideoPlayerController104=b("VideoPlayerExperiments").progressiveBufferingErrorTimeout:e.isLiveVideo()?e.$VideoPlayerController104=b("VideoPlayerExperiments").liveBufferingErrorTimeout:e.$VideoPlayerController104=b("VideoPlayerExperiments").bufferingErrorTimeout;b("VideoPlayerExperiments").createVideoVisibilityObserver&&e.$VideoPlayerController125();e.$VideoPlayerController35=e.$VideoPlayerController5.getIsFacecastAudioFromConfig(e.$VideoPlayerController4);e.$VideoPlayerController83=!!z;e.$VideoPlayerController96=new Set();e.$VideoPlayerController97=P;e.$VideoPlayerController98=null;e.$VideoPlayerController99=!!Q;e.$VideoPlayerController100=!!R;e.$VideoPlayerController101=e.getContainerNode().style.paddingBottom;e.$VideoPlayerController102=S;e.$VideoPlayerController103=T;e.$VideoPlayerController105=!1;e.$VideoPlayerController106=!1;e.$VideoPlayerController82=U;e.$VideoPlayerController21=b("Arbiter").subscribe("DOM/destroy",function(a,c){if(!b("Parent").bySelector(e.getVideoNode(),c))return;e.pause("unloaded");e.destroy()});e.$VideoPlayerController18=0;B=b("URI").getRequestURI();A=b("VideoPermalinkURI").parse(B);t=parseFloat(B.getQueryData().t);u=A?A.video_id==e.$VideoPlayerController88:!1;t&&u&&e.$VideoPlayerController4&&(e.$VideoPlayerController4.startTimestamp=t);b("VideoPlayerHTML5Experiments").useVpcPlayingStateForPrioritization&&e.$VideoPlayerController4&&(e.$VideoPlayerController4.vpcPlayingStateEmitter=new(b("VideoControllerPlayingStateEmitter"))(babelHelpers.assertThisInitialized(e)));e.$VideoPlayerController14.getBool("oz_www_safely_log_player_seeks",!1)&&e.$VideoPlayerController4&&(e.$VideoPlayerController4.seekHandler=function(a){e.isState("playing")?(e.pause(),e.seek(a),e.play("seek_initiated")):e.seek(a)});e.$VideoPlayerController110=new(b("DelegatedVideoPriorityAdjuster"))();b("VideoPlayerExperiments").adjustPriorityBasedOnAutoplayIndex&&e.$VideoPlayerController4&&(e.$VideoPlayerController4.streamPriorityAdjuster=e.$VideoPlayerController110);e.$VideoPlayerController17=null;e.$VideoPlayerController51=null;e.$VideoPlayerController69=r;e.$VideoPlayerController48=c?new(b("VideoPlayerLogger"))(r,{device_id:c}):new(b("VideoPlayerLogger"))(r);e.$VideoPlayerController69==="tahoe"&&e.focusOnContainerNode();e.collectFeedTrackingData();e.$VideoPlayerController48.setScriptPath(b("ScriptPath").getScriptPath());e.$VideoPlayerController48.setFrameCountGetters(function(){return e.$VideoPlayerController89!=null?k(e.$VideoPlayerController89):null},function(){return e.$VideoPlayerController89!=null?l(e.$VideoPlayerController89):null});e.$VideoPlayerController59=b("VideosRenderingInstrumentation").retrieveRenderTime(e.getRootNode());e.$VideoPlayerController58=p()-e.$VideoPlayerController59;y&&(y.subtitleDrawer=e.registerDrawer(b("VideoPlayerUIComponentDrawer").priorities.Subtitles,0));e.$VideoPlayerController70="loading";e.$VideoPlayerController126(!1);if(e.$VideoPlayerController5.isImplementationUnavailable(e.$VideoPlayerController83))if(e.$VideoPlayerController83)e.$VideoPlayerController127();else{e.$VideoPlayerController128();return babelHelpers.assertThisInitialized(e)}else e.$VideoPlayerController129();b("Banzai").subscribe(b("Banzai").SHUTDOWN,function(){e.pause("unloaded"),e.destroy()});e.$VideoPlayerController7=new(b("SubscriptionsHandler"))();e.$VideoPlayerController67&&(b("VideoPlayerExperiments").delayAutoplayUntilAfterLoad?e.$VideoPlayerController7.addSubscriptions(b("Run").onAfterLoad(function(){return e.$VideoPlayerController130()})):e.$VideoPlayerController130());e.$VideoPlayerController19=0;e.$VideoPlayerController65=!1;e.$VideoPlayerController25=e.$VideoPlayerController131();e.$VideoPlayerController7.addSubscriptions(b("Banzai").subscribe(b("Banzai").SHUTDOWN,function(){e.pause("unloaded"),e.destroy()}));e.$VideoPlayerController132()||e.$VideoPlayerController7.addSubscriptions(b("Arbiter").subscribe("layer_shown",function(a,c){if(c.type==="DialogX"||c.type==="PhotoSnowlift"||c.type==="Spotlight"){c.type!=="Spotlight"&&b("Bootloader").loadModules(["VideoAutoplayControllerX"],function(a){a.setShouldAutoplay(!1)},"VideoPlayerController");this.$VideoPlayerController19=this.$VideoPlayerController19+1;if(b("VideoPlayerExperiments").ignoreDialogCounter||this.$VideoPlayerController19>0){a=this.$VideoPlayerController69==="tahoe"&&this.isLiveVideo();this.isState("playing")&&!(a&&b("TahoeVariables").neverAutoPauseLive)&&!this.$VideoPlayerController120&&(this.pause("page_visibility_initiated"),this.$VideoPlayerController65=!0)}}}.bind(babelHelpers.assertThisInitialized(e))),b("Arbiter").subscribe("layer_hidden",function(a,c){(c.type==="DialogX"||c.type==="PhotoSnowlift"||c.type==="Spotlight")&&(b("VideoPlayerExperiments").addViewabilityFixEnabled?this.$VideoPlayerController19=Math.max(0,this.$VideoPlayerController19-1):this.$VideoPlayerController19=this.$VideoPlayerController19-1,this.$VideoPlayerController19===0&&(c.type!=="Spotlight"&&b("Bootloader").loadModules(["VideoAutoplayControllerX"],function(a){a.setShouldAutoplay(!0)},"VideoPlayerController"),this.$VideoPlayerController65&&(this.play("page_visibility_initiated"),this.$VideoPlayerController65=!1)))}.bind(babelHelpers.assertThisInitialized(e))));e.$VideoPlayerController7.addSubscriptions(b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){return e.$VideoPlayerController133(a,b)}));b("Run").onLeave(function(){if(e.$VideoPlayerController99||b("VideoPlayerExperiments").persistentWNSEnabled&&e.$VideoPlayerController69==="watch_scroll")return;e.cleanOnLeave()});e.$VideoPlayerController12=G||[];e.$VideoPlayerController12.forEach(function(a){var c=b("getVideoComponentName")(a)||"<MalformedComponent>";a&&typeof a.enable==="function"?b("VideoPlayerExperiments").enableComponentGuards?b("ErrorUtils").applyWithGuard(a.enable,a,[babelHelpers.assertThisInitialized(e)],null,"VideoPlayerController Component Enable Guard: "+c):a.enable(babelHelpers.assertThisInitialized(e)):b("FBLogger")("video").warn("no_enable_method_on_component: %s",c)});e.$VideoPlayerController50=1;e.$VideoPlayerController92=!1;e.$VideoPlayerController89&&(e.shouldCalculateViewability()?(e.$VideoPlayerController92=b("VideoPlayerExperiments").enableViewabilityLogging||b("VideoPlayerExperiments").enableVideoSampledViewabilityLogging&&!!e.$VideoPlayerController111,e.isInstreamAd()&&(e.$VideoPlayerController92=e.$VideoPlayerController92&&(b("VideoPlayerExperiments").enableInstreamAdViewabilityLogging||b("VideoPlayerExperiments").enableVideoSampledViewabilityLogging&&!!e.$VideoPlayerController111))):e.$VideoPlayerController92=b("VideoPlayerExperiments").enableViewabilityLoggingForOrganic);e.$VideoPlayerController92&&e.$VideoPlayerController89&&(e.$VideoPlayerController93=new(b("VideoViewabilityLogging"))(babelHelpers.assertThisInitialized(e),e.$VideoPlayerController89,e.$VideoPlayerController66,e.$VideoPlayerController15));e.$VideoPlayerController30=!1;e.$VideoPlayerController32=$;e.isLiveVideo()&&(e.$VideoPlayerController16=b("LiveVideoCopyrightActionSubscription").subscribe(e.getVideoID(),function(a){__p&&__p();var b=a.live_video_copyright_action_subscribe.action.toLowerCase();switch(b){case"block":if(e.$VideoPlayerController32)break;e.emit("blockVideo");e.destroy();break;case"mute":e.emit("blockAudio",e.$VideoPlayerController32);e.$VideoPlayerController30=!0;e.$VideoPlayerController32||e.mute();break;case"unmute":e.emit("unblockAudio",e.$VideoPlayerController32);e.$VideoPlayerController30=!1;e.$VideoPlayerController32||e.unmute();break}e.$VideoPlayerController134(a.live_video_copyright_action_subscribe.action,a.live_video_copyright_action_subscribe.timestamp)}));return e}var d=c.prototype;d.setVideoPriorityAdjustment=function(a){this.$VideoPlayerController110.notifyAdjustment(a)};d.addListener=function(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=(b=a.prototype.addListener).call.apply(b,[this].concat(d));d[0]==="visibilityChanged"&&this.$VideoPlayerController125();return f};d.$VideoPlayerController125=function(){var a=this;if(this.$VideoPlayerController107)return;this.$VideoPlayerController89||i(0,3694);this.$VideoPlayerController107=new(b("VideoVisibilityObserver"))(this.$VideoPlayerController89);this.$VideoPlayerController107.addListener("visibilityChanged",function(b){return a.emit("visibilityChanged",b)})};d.setAutoScrollIntoView=function(a){this.$VideoPlayerController20=!a};d.setDetectionID=function(a){this.$VideoPlayerController114=a};d.destroy=function(a){__p&&__p();a=a||{};if(this.isState("destroyed")||this.$VideoPlayerController34)return;this.$VideoPlayerController34=!0;this.$VideoPlayerController107&&(this.$VideoPlayerController107.destroy(),this.$VideoPlayerController107=null);var c=this.$VideoPlayerController12||[];for(var d=c.length-1;d>=0;d--){var e=c[d],f=b("getVideoComponentName")(e)||"<MalformedComponent>";e&&typeof e.disable==="function"?b("VideoPlayerExperiments").enableComponentGuards?b("ErrorUtils").applyWithGuard(e.disable,e,[this],null,"VideoPlayerController Component Disable Guard: "+f):e.disable(this):b("FBLogger")("video").warn("no_disable_method_on_component: %s",f)}b("gkx")("678893")?this.$VideoPlayerController84&&this.getVideoAPI().destroy(a):this.getVideoAPI().destroy(a);this.setState("destroyed");this.$VideoPlayerController7.release();a.skipRemoveAllListeners||this.removeAllListeners();this.$VideoPlayerController21&&(this.$VideoPlayerController21.unsubscribe(),this.$VideoPlayerController21=null);this.stopHeartbeat();this.$VideoPlayerController16&&(this.$VideoPlayerController16.unsubscribe(),this.$VideoPlayerController16=null)};d.$VideoPlayerController135=function(){var a=b("DOMQuery").scry(this.getVideoNode(),'[data-fallback-markup="1"]');if(!a.length)return b("Promise").reject();b("DOM").replace(this.getVideoNode(),a[0]);this.$VideoPlayerController89=a[0];return b("JSResource")("VideoPlayerFlashApi").__setRef("VideoPlayerController").load()};d.$VideoPlayerController127=function(){var a=this;this.logEvent("switched_implementation",{error_user_info:this.getDebugInfo()});b("promiseDone")(this.$VideoPlayerController135().then(function(a){if(a.isImplementationUnavailable())return b("Promise").reject();else return b("Promise").resolve(a)}),function(b){a.$VideoPlayerController5=b,a.$VideoPlayerController129()},function(b){return a.$VideoPlayerController128()})};d.collectFeedTrackingData=function(){__p&&__p();if(this.$VideoPlayerController81){var a={tn:"","tn-debug":","},c={};for(var d=0;d<this.$VideoPlayerController81.length;d++){var e=JSON.parse(this.$VideoPlayerController81[d]);if(!Array.isArray(e))for(var f in e)a[f]!==void 0?(c[f]===void 0&&(c[f]=[]),c[f].push(e[f])):c[f]===void 0&&(c[f]=e[f])}for(var g in a)c[g]!==void 0&&(c[g]=c[g].join(a[g]));e={ft:c}}else{d=!1;a=this.getRootNode();while(a){if(a instanceof Element&&b("CSS").matchesSelector(a,"._4oep")){d=!0;break}a=b("getContextualParent")(a)}!d?this.isState("replayed")?e=b("collectDataAttributes")(window.event.target,["ft"]):e=b("collectDataAttributes")(this.getRootNode(),["ft"]):e={}}this.$VideoPlayerController48.setFTData(e)};d.$VideoPlayerController133=function(a,c){c.video_player_debug_info=c.video_player_debug_info||{hardware:this.$VideoPlayerController136(),live_autoplay_bandwidth_restrain:b("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(!0),autoplay_bandwidth_restrain:b("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(!1)},c.video_player_debug_info[this.getVideoID()]=this.getDebugInfo()};d.$VideoPlayerController136=function(){try{var a=document.createElement("canvas");a=a.getContext("webgl")||a.getContext("experimental-webgl");var b=a.getExtension("WEBGL_debug_renderer_info");return b&&{vendor:a.getParameter(b.UNMASKED_VENDOR_WEBGL),renderer:a.getParameter(b.UNMASKED_RENDERER_WEBGL)}}catch(a){}return null};d.setStillFrameEnabled=function(a){var b=this.getVideoAPI();b.setStillFrameEnabled&&b.setStillFrameEnabled(a)};d.isFallbackRecoverable=function(){return!!this.$VideoPlayerController78};d.setFallbackSources=function(a){this.$VideoPlayerController78=a};d.setRelativeSphericalOrientation=function(a,c){this.emit(b("SphericalVideoPlayerEvents").SET_RELATIVE_SPHERICAL_ORIENTATION,a,c)};d.setSphericalOrientation=function(a,c){this.emit(b("SphericalVideoPlayerEvents").SET_ABSOLUTE_SPHERICAL_ORIENTATION,a,c)};d.setSphericalFieldOfView=function(a){this.emit(b("SphericalVideoPlayerEvents").SET_FIELD_OF_VIEW,a)};d.isSpherical=function(){return this.$VideoPlayerController36};d.getVideoPlayerID=function(){return this.$VideoPlayerController29};d.focusOnContainerNode=function(){this.$VideoPlayerController15&&this.$VideoPlayerController15.focus()};d.setLogEntryPropertyGetters=function(a){var b=this;Object.keys(a).forEach(function(c){var d=a[c];typeof d==="function"?b.$VideoPlayerController23.set(c,d):b.$VideoPlayerController79[c]=d})};d.removeLogEntryPropertyGetters=function(a){var b=this;typeof a==="string"&&(a=[a]);Array.isArray(a)||(a=Object.keys(a));a.forEach(function(a){b.$VideoPlayerController23["delete"](a),delete b.$VideoPlayerController79[a]})};d.$VideoPlayerController129=function(){var a=this;this.$VideoPlayerController5.onImplementationReady(this.getVideoNode(),function(){return a.onApiReady()})};d.isImplementationUnavailable=function(){return this.$VideoPlayerController5.isImplementationUnavailable(this.$VideoPlayerController83)&&!this.$VideoPlayerController83};d.getIsInChannel=function(){return this.$VideoPlayerController69==="channel"};d.updateSource=function(a){if(!this.$VideoPlayerController69)return;var c=b("VideoPlayerFormatsMap")[this.$VideoPlayerController69],d=b("VideoPlayerFormatsMap")[a];this.$VideoPlayerController48.updateSource(a);this.$VideoPlayerController14.setContext("player_format",this.$VideoPlayerController124(this.isFullscreen(),a)||"unknown");c&&c!==d&&this.$VideoPlayerController94&&(b("VideoPlayerExperiments").delayFormatChangeEvent?this.isState("playing")&&!this.$VideoPlayerController37?(this.logEvent("player_format_changed"),this.$VideoPlayerController45=d):this.$VideoPlayerController45=c:this.logEvent("player_format_changed"));this.$VideoPlayerController69=a};d.getSource=function(){return this.$VideoPlayerController48.getSource()};d.getPlayerOrigin=function(){return this.$VideoPlayerController54};d.getPlayerSuborigin=function(){return this.$VideoPlayerController55};d.getUpstreamPlayerSource=function(){return this.$VideoPlayerController82};d.hasLooped=function(){return this.$VideoPlayerController50>1};d.$VideoPlayerController128=function(){var a={error:"IMPLEMENTATION_NOT_SUPPORTED",state:b("VideoPlayerLoggerErrorStates").PLAYER_FAILURE,error_description:"Implementation unavailable",error_user_info:this.getDebugInfo()};this.logEvent("error",a);this.$VideoPlayerController67=!1};d.logError=function(a){__p&&__p();a=this.$VideoPlayerController44=a;var c=a.error,d=a.message,e=a.isPlayback,f=a.httpStatus,g=a.url;a=a.stack;var h=this.getDebugInfo();a&&(h.player.stack=a);delete h.player.loggedError;delete h.player.lastError;a={error:c,error_description:d,error_user_info:h,error_code:f,resource_url:g,state:e?b("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE:b("VideoPlayerLoggerErrorStates").PLAYER_FAILURE};this.$VideoPlayerController47=this.logEvent("error",a);this.$VideoPlayerController36&&Math.random()<.01&&b("FBLogger")("360video").warn("360 video player error: %s %s",c,d);e&&this.$VideoPlayerController53&&this.$VideoPlayerController126(!1)};d.setRotation=function(a){this.getVideoAPI().setRotation(a)};d.setDimensions=function(a,c){__p&&__p();var d=this.getContainerNode();d.style.width=a+"px";d.style.height=c+"px";d=this.getVideoNode();d.style.width=a+"px";d.style.height=c+"px";if(this.isState("loading"))this.$VideoPlayerController60={width:a,height:c};else{if(this.isPlayerVersion("silvercity")&&(this.$VideoPlayerController37||b("VideoPlayerResizeSettings").disable_flash_set_dimensions))return;this.setVideoPlayerAPIDimensions(a,c)}};d.isPlayRequestPending=function(){return this.$VideoPlayerController53};d.$VideoPlayerController126=function(a){if(this.$VideoPlayerController53===a)return;this.$VideoPlayerController53=a;this.emit("pendingPlayRequestChanged")};d.updateAutoplayRestrained=function(){var a=this;b("ifRequired")("VideoPlayerHTML5Shaka",function(b){b=b.isAutoplayBandwidthRestrained(a.$VideoPlayerController40);a.$VideoPlayerController137(b)})};d.$VideoPlayerController137=function(a){a?this.emit("turnOffAutoplay",{reason:"poor_network_quality"}):this.emit("resumeAutoplay",{reason:"poor_network_quality"});if(b("gkx")("678893")){var c=this.getVideoAPI();c&&c.setPreloadDisabled(a)}else this.getVideoAPI().setPreloadDisabled(a)};d.restoreStreamBufferSize=function(){if(b("gkx")("678893")){var a=this.getVideoAPI();a&&a.restoreStreamBufferSize()}else this.getVideoAPI().restoreStreamBufferSize()};d.getDataInsertionPosition=function(){return this.$VideoPlayerController25&&this.$VideoPlayerController25.getAttribute("data-insertion-position")};d.getDataFt=function(){return this.$VideoPlayerController25&&this.$VideoPlayerController25.getAttribute("data-ft")};d.play=function(a){__p&&__p();var c=this,d=null;a instanceof b("VideoPlayerReasonTransitionHelper")?d=a.getReason():d=a;a=this.getVideoNodeNullable();if(a&&a.scrollIntoView&&d==="user_initiated"&&!this.$VideoPlayerController20&&this.$VideoPlayerController14.getBool("enable_autoscroll_into_view",!1)){var e=this.getDOMPosition(),f=e.y>=0;e=e.y+e.height<=b("getViewportDimensions")().height;!f?a.scrollIntoView(!0):e||a.scrollIntoView(!1)}this.$VideoPlayerController138();this.$VideoPlayerController52||(this.$VideoPlayerController52=d);this.$VideoPlayerController108=this.getOption("VideoWithCommercialBreak","controller");if(this.$VideoPlayerController108&&this.$VideoPlayerController108.shouldPlayPreRollAds(d)){this.$VideoPlayerController108.schedulePreRollAds();return}if(!this.$VideoPlayerController53){this.$VideoPlayerController51=this.$VideoPlayerController139();var g=this.$VideoPlayerController140({debug_reason:d});f=this.$VideoPlayerController69;b("VideoPlayerExperiments").delayFormatChangeEvent&&f&&this.$VideoPlayerController94&&this.$VideoPlayerController45&&b("VideoPlayerFormatsMap")[f]!==this.$VideoPlayerController45&&!this.$VideoPlayerController37&&(this.logEvent("player_format_changed"),this.$VideoPlayerController45=b("VideoPlayerFormatsMap")[f]);b("VideoPlayerExperiments").logRequestedPlayingAsync?j(function(){c.logEvent("requested_playing",g)},["started_playing","unpaused"],this.$VideoPlayerController117):this.logEvent("requested_playing",g);this.$VideoPlayerController94=!0}this.$VideoPlayerController141(d);this.emit("playRequested",d);this.sendPlayRequest(d);d==="loop_initiated"&&(this.$VideoPlayerController50++,this.$VideoPlayerController50>10&&this.$VideoPlayerController14.getBool("disable_logging_for_long_loops",!1)&&(this.$VideoPlayerController95=!0))};d.sendPlayRequest=function(a){var c=this;if(this.isState("fallback")){this.emit("fallbackPlay");b("VideoPlayerExperiments").endBufferingOnFallbackPlay&&this.$VideoPlayerController48.endBuffering();return}this.$VideoPlayerController126(!0);this.isState("loading")?this.$VideoPlayerController61={reason:a}:(!this.getVideoAPI().isMuted()&&this.$VideoPlayerController49&&(b("VideoPlayerExperiments").logUnmutedAsync?j(function(){c.logEvent("unmuted")},["started_playing","unpaused"],this.$VideoPlayerController117):this.logEvent("unmuted")),this.$VideoPlayerController49=!1,this.$VideoPlayerController142(),this.getVideoAPI().play(a))};d.getOriginalPlayReason=function(){return this.$VideoPlayerController52};d.reset=function(){if(this.isState("loading")||this.isState("fallback")&&!this.isFallbackRecoverable())return;this.resetPositions();this.$VideoPlayerController143();this.$VideoPlayerController84&&this.$VideoPlayerController84.destroy&&this.$VideoPlayerController84.destroy();this.$VideoPlayerController84=null;this.setState("loading");this.$VideoPlayerController129()};d.detachRootNode=function(){var a=this;if(!this.$VideoPlayerController66)return;b("DOM").remove(this.$VideoPlayerController66);if(this.isState("fallback")||this.isState("loading"))return;this.setState("loading");this.$VideoPlayerController5.onImplementationReady(this.getVideoNode(),function(){return a.$VideoPlayerController144()})};d.getVideoAPI=function(){this.$VideoPlayerController84||i(0,3695);return this.$VideoPlayerController84};d.getVideoNodeNullable=function(){return this.$VideoPlayerController89};d.getVideoNode=function(){var a=this.getVideoNodeNullable();return a};d.getRootNodeNullable=function(){return this.$VideoPlayerController66};d.getRootNode=function(){var a=this.getRootNodeNullable();return a};d.getContainerNodeNullable=function(){return this.$VideoPlayerController15};d.getContainerNode=function(){var a=this.getContainerNodeNullable();return a};d.getVideoResolution=function(){var a=this.getVideoNode();return{height:a.videoHeight,width:a.videoWidth}};d.$VideoPlayerController144=function(){this.setState("ready"),this.$VideoPlayerController49=!this.getVideoAPI().isMuted(),this.$VideoPlayerController80=!this.$VideoPlayerController3,this.getVideoAPI().setSubtitlesStyle&&this.getVideoAPI().setSubtitlesStyle(this.$VideoPlayerController71,this.$VideoPlayerController72,this.$VideoPlayerController73,this.$VideoPlayerController74),this.$VideoPlayerController61&&(this.sendPlayRequest(this.$VideoPlayerController61.reason),this.$VideoPlayerController61=null),this.$VideoPlayerController60&&(this.setDimensions(this.$VideoPlayerController60.width,this.$VideoPlayerController60.height),this.$VideoPlayerController60=null),this.$VideoPlayerController62&&(this.getVideoAPI().unmute(),this.$VideoPlayerController62=null)};d.onApiReady=function(){__p&&__p();var a=this;this.$VideoPlayerController4&&(this.$VideoPlayerController4.id=this.$VideoPlayerController29,this.$VideoPlayerController78&&(this.$VideoPlayerController4.fallbackSources=this.$VideoPlayerController78),this.$VideoPlayerController4.playerOrigin=this.$VideoPlayerController54,this.$VideoPlayerController4.playerSuborigin=this.$VideoPlayerController55,this.$VideoPlayerController4.getSource=function(){return a.getSource()},this.$VideoPlayerController4.shakaConfig=this.$VideoPlayerController14,this.$VideoPlayerController4.playerInstanceKey=this.$VideoPlayerController113,this.$VideoPlayerController115&&(this.$VideoPlayerController4.videoLiveTrace=this.$VideoPlayerController115));this.$VideoPlayerController84=new this.$VideoPlayerController5(this.getVideoNode(),this.$VideoPlayerController4);this.$VideoPlayerController145();this.getVideoAPI().setup();this.$VideoPlayerController144();var c={is_auto_played:this.isAutoplayable()};this.logEvent("player_loaded",c);this.$VideoPlayerController84&&this.$VideoPlayerController48.setABRQualityTracker(new(b("VideoPlayerABRQualityTracker"))(this.$VideoPlayerController84.getLocalEstimator()));c=this.getVideoProjection();c&&(this.$VideoPlayerController57=c);this.emit("apiReady")};d.getLocalEstimator=function(){if(this.$VideoPlayerController84)return this.$VideoPlayerController84.getLocalEstimator();else return null};d.runOnApiReady=function(a){a===void 0&&(a=function(){}),!this.isState("loading")?a():this.once("apiReady",a)};d.resetPositions=function(){this.$VideoPlayerController18=0};d.getCurrentTimePosition=function(){if(this.isState("playing")){var a=this.getVideoAPI().getCurrentTimePosition();a!=null&&a!==void 0&&(this.$VideoPlayerController18=a)}return this.$VideoPlayerController18};d.getBufferEndPosition=function(){if(this.isState("loading"))return 0;var a=this.getVideoAPI().getBufferEndPosition();return a!==null&&a!==void 0?a:this.getCurrentTimePosition()};d.$VideoPlayerController138=function(){if(!this.$VideoPlayerController9){b("VideoChannelViewChainLengthManager").registerChainingInfos(this.getVideoID(),this.$VideoPlayerController11);var a=this.getVideoID();if(this.$VideoPlayerController11){var c=this.$VideoPlayerController11.decode();a=c.root_id}this.$VideoPlayerController9=b("VideoChannelViewChainLengthManager").getLoggingData(a)}};d.$VideoPlayerController146=function(a){this.$VideoPlayerController126(!1);a=a.position;a!==void 0&&(this.$VideoPlayerController18=a);this.setState("playing");this.areHLSActive()?this.$VideoPlayerController147():this.isRTMP_DEPRECATED()&&this.$VideoPlayerController148();this.startHeartbeat()};d.$VideoPlayerController149=function(a){var b=a.position;this.$VideoPlayerController115&&this.isState("playing")&&this.$VideoPlayerController115.onUpdateStatus(a);b!==void 0&&(this.$VideoPlayerController18=b);this.$VideoPlayerController17=this.getVideoAPI().getCurrentlyPlayingVideoStreamInfoID()};d.$VideoPlayerController150=function(a){return this.$VideoPlayerController96.has(a)};d.runOnceOnApiEventLogged=function(a,b){if(this.$VideoPlayerController150(a))b();else var c=this.addListener("apiEventLogged",function(d){d===a&&(b(),c.remove())})};d.$VideoPlayerController151=function(a){var b=a.event;this.$VideoPlayerController96.add(b);delete a.event;this.logEvent(b,a);this.emit("apiEventLogged",b)};d.$VideoPlayerController152=function(){this.isState("finished")||this.setState("paused"),this.stopHeartbeat()};d.$VideoPlayerController153=function(a){a=a.position;a!==void 0&&(this.$VideoPlayerController18=a)};d.$VideoPlayerController154=function(){this.setState("finished"),this.$VideoPlayerController65=!1,this.stopHeartbeat()};d.getVolume=function(){return this.getVideoAPI().getVolume()};d.$VideoPlayerController155=function(){__p&&__p();this.$VideoPlayerController38=!1;var a=this.getContainerNode(),c=this.isFullscreen();b("CSS").conditionClass(a,"_1hwh",c);c?a.style.paddingBottom="0":(a.removeAttribute("data-fullscreen"),a.style.paddingBottom=this.$VideoPlayerController101);!c&&this.$VideoPlayerController26&&(this.$VideoPlayerController26.unsubscribe(),this.$VideoPlayerController26=null);if(this.$VideoPlayerController37!=c){this.logFullscreenChanged(c);this.$VideoPlayerController14.setContext("player_format",this.$VideoPlayerController124(c,this.$VideoPlayerController69)||"unknown");a=b("DOMDimensions").getElementDimensions(a);this.isPlayerVersion("silvercity")||this.setVideoPlayerAPIDimensions(a.width,a.height);this.emit("toggleFullscreen");!c?(this.addOffsetStylings(),b("Arbiter").inform("video_fullscreen_change",{})):this.removeOffsetStylings()}this.$VideoPlayerController37=c};d.$VideoPlayerController124=function(a,c){return a?"full_screen":c?b("VideoPlayerFormatsMap")[c]:"inline"};d.logFullscreenChanged=function(a){var c={player_format:this.$VideoPlayerController124(a,this.$VideoPlayerController69)};b("VideoPlayerHTML5Experiments").enteredExitedFsLoggingFix?this.logEvent(a?"entered_fs":"exited_fs",c):this.logEvent(a?"entered_fs":"exited_fs")};d.setVideoPlayerAPIDimensions=function(a,b){this.getVideoAPI().setDimensions&&this.getVideoAPI().setDimensions(a,b)};d.removeOffsetStylings=function(){var a=this.$VideoPlayerController103;if(a===null||a===void 0)return;this.$VideoPlayerController102===1?(this.getVideoNode().style.setProperty("left","0"),b("CSS").removeClass(this.getVideoNode(),"_blh")):this.$VideoPlayerController102===0&&(this.getVideoNode().style.setProperty("top","0"),b("CSS").removeClass(this.getVideoNode(),"_bli"))};d.addOffsetStylings=function(){var a=this.$VideoPlayerController103;if(a===null||a===void 0)return;this.$VideoPlayerController102===1?(this.getVideoNode().style.setProperty("left",a+"px"),b("CSS").addClass(this.getVideoNode(),"_blh")):this.$VideoPlayerController102===0&&(this.getVideoNode().style.setProperty("top",a+"px"),b("CSS").addClass(this.getVideoNode(),"_bli"))};d.isFullscreen=function(){return this.$VideoPlayerController38||b("FullScreen").isFullScreen()&&this.$VideoPlayerController15===b("getFullScreenElement")()};d.toggleFullscreen=function(){var a=this.isFullscreen(),c=this.getContainerNode();b("FullScreen").toggleFullScreen(c)&&(a||(this.$VideoPlayerController38=!0,c.setAttribute("data-fullscreen","true")),b("CSS").addClass(c,"_1hwh"),this.$VideoPlayerController26=b("FullScreen").subscribe("changed",this.$VideoPlayerController155.bind(this)))};d.instreamVideoStart=function(){b("CSS").addClass(this.getContainerNode(),"_24pm")};d.instreamVideoEnd=function(){b("CSS").removeClass(this.getContainerNode(),"_24pm")};d.unmute=function(){if(!this.$VideoPlayerController32&&this.$VideoPlayerController30)return;!this.isState("loading")?(this.getVideoAPI().unmute(),b("VideoPlayerVolumeSettings").saveVolume(b("VideoPlayerVolumeSettings").getLastVolumeBeforeMute()),this.$VideoPlayerController80&&this.getVideoAPI().areSubtitlesActive()&&this.$VideoPlayerController156()):this.$VideoPlayerController62=!0};d.isAudioBlocked=function(){return this.$VideoPlayerController30};d.isMuted=function(){return this.$VideoPlayerController84?this.getVideoAPI().isMuted():this.$VideoPlayerController75};d.mute=function(){this.$VideoPlayerController80&&!this.getVideoAPI().areSubtitlesActive()&&this.$VideoPlayerController156(),this.getVideoAPI().mute(),b("VideoPlayerVolumeSettings").saveVolume(0)};d.getMediaID=function(){return this.getVideoID()};d.getPlaybackDuration=function(){return this.getVideoAPI().getPlaybackDuration()};d.getPlayerFormat=function(){return this.$VideoPlayerController124(this.isFullscreen(),this.$VideoPlayerController69)};d.getVideoID=function(){return this.$VideoPlayerController88};d.getVideoChannelID=function(){return this.$VideoPlayerController85};d.getVideoListID=function(){return this.$VideoPlayerController86};d.getVideoURL=function(){return this.$VideoPlayerController91};d.$VideoPlayerController145=function(){__p&&__p();var a=this,c=this.getVideoAPI(),d=new(b("SubscriptionsHandler"))();this.$VideoPlayerController6=d;var e={buffered:function(){return a.setBuffering(!1)},buffering:function(){return a.setBuffering(!0)},bufferingProgress:function(b){return a.$VideoPlayerController157(b)},streamInterrupted:function(){return a.$VideoPlayerController48.startInterrupt()},streamResumed:function(){return a.$VideoPlayerController48.endInterrupt()},beginPlayback:function(b){return a.$VideoPlayerController146(b)},updateStatus:function(b){return a.$VideoPlayerController149(b)},logEvent:function(b){return a.$VideoPlayerController151(b.logData)},pausePlayback:function(){return a.$VideoPlayerController152()},seekEnd:function(b){return a.$VideoPlayerController153(b)},clickForTracking:function(){return b("logVideosClickTracking")(a.getVideoNode())},error:function(b){return a.logError(b)},finishPlayback:function(){return a.$VideoPlayerController154()},networkInterrupted:function(){return a.$VideoPlayerController158()},networkResumed:function(){return a.$VideoPlayerController159()},replicaSwitch:function(b){return a.switchReplicaSet(b)}};d.addSubscriptions.apply(d,Object.keys(e).map(function(a){return c.addListener(a,e[a])}));d.addSubscriptions.apply(d,b("VideoPlayerApiEvents").map(function(d){return b("forwardEvent")(c,a,d)}))};d.$VideoPlayerController143=function(){this.$VideoPlayerController6&&this.$VideoPlayerController6.release()};d.seek=function(a,b){this.emit("seekRequested",a,b),this.getVideoAPI().seek(a)};d.pause=function(a){this.isState("loading")?this.$VideoPlayerController61=null:this.isState("playing")?this.getVideoAPI().pause(a):this.$VideoPlayerController53&&this.getVideoAPI().pause(a),this.$VideoPlayerController126(!1),this.$VideoPlayerController65=!1,this.$VideoPlayerController160(a),this.emit("pauseRequested",a)};d.stopHeartbeat=function(){b("clearInterval")(this.$VideoPlayerController28),this.$VideoPlayerController28=null};d.startHeartbeat=function(){if(this.$VideoPlayerController28||!b("VideoPlayerHTML5Experiments").heartbeatIntervalMS)return;this.$VideoPlayerController28=b("setInterval")(this.emitHeartbeat,b("VideoPlayerHTML5Experiments").heartbeatIntervalMS)};d.isPlayerVersion=function(a){return this.getPlayerVersion()===a||this.$VideoPlayerController100&&this.$VideoPlayerController161(a)===this.getPlayerVersion()};d.isHtml5Player=function(){return this.isPlayerVersion("pleasantville")||this.isPlayerVersion("oz")};d.isAutoplayable=function(){return this.$VideoPlayerController67};d.$VideoPlayerController162=function(){return b("ViewportTrackingHelper").isVisible(this.getVideoNode(),0)};d.$VideoPlayerController130=function(){var a=this;if(b("Visibility").isHidden()){var c=b("Visibility").once(b("Visibility").VISIBLE,function(){return a.$VideoPlayerController130()});b("VideoPlayerExperiments").unsubscribeImmediateplay&&this.$VideoPlayerController7.addSubscriptions(c)}else!this.$VideoPlayerController162()&&this.$VideoPlayerController68!=="watch_time_not_logged"&&b("FBLogger")("video").warn("immediateplay on a hidden video player: %s %s %s %s",this.getPlayerOrigin(),this.getPlayerSuborigin(),this.getSource(),b("ScriptPath").getScriptPath()),this.play("autoplay_initiated")};d.isBuffering=function(){return this.$VideoPlayerController33};d.$VideoPlayerController163=function(){var a=Math.floor(Date.now()/1e3);this.$VideoPlayerController109=this.$VideoPlayerController109.filter(function(b){return b.time+3>a});this.$VideoPlayerController109.some(function(b){if(b.time===a){b.count+=1;return!0}return!1})||this.$VideoPlayerController109.push({time:a,count:1})};d.$VideoPlayerController164=function(){var a=Math.floor(Date.now()/1e3);return this.$VideoPlayerController109.reduce(function(b,c){return(c.time+3>a?c.count:0)+b},0)};d.$VideoPlayerController157=function(a){this.emit("bufferingProgress",a)};d.setBuffering=function(a){__p&&__p();if(a!==this.$VideoPlayerController33){this.$VideoPlayerController33=a;if(this.$VideoPlayerController33){a=this.$VideoPlayerController14.getNumber("buffering_count_threshold",0);if(a){this.$VideoPlayerController163();if(this.$VideoPlayerController164()>=a){this.logError({error:"EXCEED_BUFFER_FREQUENCY_THRESHOLD",message:"video has entered buffering state "+a+" times in the last 3 seconds.",isPlayback:this.isPlayRequestPending()});return this.emit("error","EXCEED_BUFFER_FREQUENCY_THRESHOLD")}}this.$VideoPlayerController48.startBuffering(this.getCurrentTimePosition());this.$VideoPlayerController104&&(this.$VideoPlayerController165(),this.$VideoPlayerController98=b("setTimeout")(this.$VideoPlayerController166,this.$VideoPlayerController104));this.$VideoPlayerController167()}else this.$VideoPlayerController48.endBuffering(),this.$VideoPlayerController165(),this.isState("paused")&&this.$VideoPlayerController168();this.emit("bufferingChanged")}};d.setSmartBufferAdjustmentEnabled=function(a){var b=this.getVideoAPI();"setSmartBufferAdjustmentEnabled"in b&&b.setSmartBufferAdjustmentEnabled(a)};d.setVideoStreamOffset=function(a){var b=this.getVideoAPI();typeof b.setVideoStreamOffset==="function"&&b.setVideoStreamOffset(a)};d.$VideoPlayerController165=function(){this.$VideoPlayerController98&&(b("clearTimeout")(this.$VideoPlayerController98),this.$VideoPlayerController98=null)};d.$VideoPlayerController168=function(){this.$VideoPlayerController14.getBool("allow_infinite_retry_on_net_err",!0)&&this.$VideoPlayerController14.getBool("allow_autoplay_on_resume_from_sleep",!0)&&this.$VideoPlayerController106&&this.play("network_resumed")};d.$VideoPlayerController167=function(){this.$VideoPlayerController14.getBool("allow_infinite_retry_on_net_err",!0)&&this.$VideoPlayerController33&&this.$VideoPlayerController105&&this.isState("playing")&&this.pause("network_interrupted")};d.$VideoPlayerController141=function(a){this.$VideoPlayerController106=!1};d.$VideoPlayerController160=function(a){a==="network_interrupted"?this.$VideoPlayerController106=!0:this.$VideoPlayerController106=!1};d.$VideoPlayerController158=function(){this.$VideoPlayerController105=!0,this.$VideoPlayerController167()};d.$VideoPlayerController159=function(){this.$VideoPlayerController105=!1,this.$VideoPlayerController168()};d.isLiveVideo=function(){return this.$VideoPlayerController40};d.isGaming=function(){return this.$VideoPlayerController41};d.isVideo=function(){return!0};d.isBroadcast=function(){return!!this.$VideoPlayerController31};d.isInline=function(){return!!this.$VideoPlayerController69&&b("VideoPlayerFormatsMap")[this.$VideoPlayerController69]==="inline"&&!this.isFullscreen()};d.isFacecastAudio=function(){return this.$VideoPlayerController35};d.isStreamInterrupted=function(){var a=this.$VideoPlayerController84;return!!(a&&a.isStreamInterrupted&&a.isStreamInterrupted())};d.setVolume=function(a){if(!this.$VideoPlayerController32&&this.$VideoPlayerController30)return;b("VideoPlayerVolumeSettings").saveVolume(a);this.getVideoAPI().setVolume(a)};d.getDOMPosition=function(){var a=this.getRootNodeNullable();return a?b("getElementPosition")(a):{x:0,y:0,width:0,height:0}};d.clickVideo=function(){this.emit("clickVideo"),this.$VideoPlayerController27=!0};d.mouseMove=function(a){this.emit("mouseMove",a)};d.mouseUp=function(a){this.emit("mouseUp",a)};d.mouseLeave=function(a){this.emit("mouseLeave",a)};d.hasSeenClick=function(){return!!this.$VideoPlayerController27};d.isAd=function(){return!!this.$VideoPlayerController2};d.shouldCalculateViewability=function(){if(this.isAd())return!0;var a=this.$VideoPlayerController48.getFTdata();if(a==null)return!1;a=a.ft;return a==null?!1:!!a.ei};d.isInstreamAd=function(){return!!this.$VideoPlayerController39};d.getAdClientToken=function(){return this.$VideoPlayerController2};d.getLastScrollDirection=function(){return this.getOption("VideoAutoplayControllerBase/VideoScrollTracker","getLastScrollDirection")||null};d.$VideoPlayerController169=function(){__p&&__p();var a=this,c=null,d=null,e=!1,f=null,g=null,h=null,i=null,j=null;if(!this.isState("loading")&&!this.isState("fallback")){this.$VideoPlayerController17===null&&(this.$VideoPlayerController17=this.getVideoAPI().getCurrentlyPlayingVideoStreamInfoID());c=this.getVideoAPI().getEstimatedBandwidth();d=this.getVideoAPI().getAvailableVideoQualities().length;e=this.getVideoAPI().getIsAbrEnabled();f=this.getPlaybackDuration();j=this.getAudioStreamId();if(this.$VideoPlayerController14.getBool("log_player_dimensions",!1)){var k=this.getVideoAPI().getDimensionsForDevice();h=k&&k.height;g=k&&k.width}this.$VideoPlayerController14.getBool("log_connection_quality",!1)&&(i=b("VideoPlayerConnectionQuality").evaluate(function(){return a.getVideoAPI().getEstimatedBandwidth()}))}var l=babelHelpers["extends"]({},this.$VideoPlayerController79);this.$VideoPlayerController23.forEach(function(b,c){l[c]=b(c,a)});k={};this.getOption("SphericalVideoSpatialAudioController","hasSpatialAudio")&&(k.audio_ch_conf=this.getOption("SphericalVideoSpatialAudioController","getSpatialAudioChannelLayout"));var n=this.isLiveVideo()&&!!m&&m.getIsRewound(this.getVideoPlayerID());return babelHelpers["extends"]({ad_client_token:this.$VideoPlayerController2,available_qualities:d,access_token:this.$VideoPlayerController1,autoplay_eligible:this.isAutoplayable(),autoplay_setting:this.$VideoPlayerController8,broadcaster_origin:this.$VideoPlayerController97,projection:this.$VideoPlayerController57,player_version:this.getPlayerVersion(),flash_version:b("ifRequired")("Flash",function(a){return a.getVersionString()}),video_id:this.getVideoID(),player_state:this.$VideoPlayerController70,player_origin:this.$VideoPlayerController54,player_suborigin:this.$VideoPlayerController55,playback_is_broadcast:this.$VideoPlayerController31,player_instance_key:this.$VideoPlayerController113,playback_duration:f,referrer:document.referrer,streaming_format:this.getStreamingFormat(),video_time_position:this.getCurrentTimePosition(),video_buffer_end_position:b("gkx")("678893")?this.$VideoPlayerController84?this.getBufferEndPosition():0:this.getBufferEndPosition(),is_servable_via_fbms:this.$VideoPlayerController42,playback_is_live_streaming:this.$VideoPlayerController40,playback_is_drm:this.isDrm(),is_templated_manifest:this.isFBIsLiveTemplated()||this.isFBWasLive(),is_fbms:this.isFBMS(),is_live_video_rewound:n,last_scroll_direction:this.getLastScrollDirection(),video_channel_id:this.$VideoPlayerController85,video_list_id:this.$VideoPlayerController86,reaction_video_channel_type:this.$VideoPlayerController63,reaction_video_channel_subtype:this.$VideoPlayerController64,fbcdn_pop:this.$VideoPlayerController51,representation_id:this.$VideoPlayerController17,audio_representation_id:j,video_bandwidth:c,video_player_height:h,video_player_width:g,data_connection_quality:i,is_abr_enabled:e,feed_position:this.getDataInsertionPosition(),upstream_player_source:this.$VideoPlayerController82,should_log_video_viewability:this.$VideoPlayerController111,living_room_session_id:this.$VideoPlayerController112,detectionID:this.$VideoPlayerController114,is_ads_preview:this.$VideoPlayerController118,is_injected_ads:this.$VideoPlayerController119,is_chained_living_room:this.$VideoPlayerController121,is_replay_living_room:this.$VideoPlayerController123,live_linear_channel_id:this.$VideoPlayerController122},this.$VideoPlayerController87,this.$VideoPlayerController9,l,k)};d.$VideoPlayerController139=function(){var a=this.getVideoInfo_DEPRECATED();if(!a)return null;a=a.resourceUrl;a=/scontent-([a-z]+)\./.exec(a);return!a?null:a[1]};d.getVideoInfo_DEPRECATED=function(){return this.isState("loading")||this.isState("fallback")?null:this.getVideoAPI().getVideoInfo()};d.getDebugInfo=function(){var a=this.getVideoInfo_DEPRECATED(),c={initializationTime:this.$VideoPlayerController58,initializationTimestamp:this.$VideoPlayerController59,version:this.getPlayerVersion(),stallCount:this.$VideoPlayerController48.getCumulativeStallCount(),stallTime:this.$VideoPlayerController48.getCumulativeStallTime(),inPlayStallCount:this.$VideoPlayerController48.getCumulativeInPlayStallCount(),inPlayStallTime:this.$VideoPlayerController48.getCumulativeInPlayStallTime(),interruptCount:this.$VideoPlayerController48.getCumulativeInterruptCount(),interruptTime:this.$VideoPlayerController48.getCumulativeInterruptTime(),state:this.$VideoPlayerController70,canPlayType:b("mapObject")(b("VideoMimeTypes"),b("canVideoPlayType")),loggedError:this.$VideoPlayerController47,lastError:this.$VideoPlayerController44,droppedFrames:!!this.$VideoPlayerController84&&this.$VideoPlayerController84.getDroppedFrames(),totalFrames:!!this.$VideoPlayerController84&&this.$VideoPlayerController84.getTotalFrames(),videoSource:!!this.$VideoPlayerController84&&this.$VideoPlayerController84.getVideoNodeSource(),viewabilityPercentage:!!this.$VideoPlayerController93&&this.$VideoPlayerController93.getViewability(),stack:void 0},d={videoID:this.getVideoID(),isDrm:this.$VideoPlayerController84&&this.$VideoPlayerController84.isDrm()};if(!a)return{player:c,currentVideo:d};var e=this.getVideoAPI().getDimensionsForDevice();return{currentVideo:babelHelpers["extends"]({},d,{streamType:a.streamType,isLiveStream:a.isLiveStream,liveManifestUrl:a.liveManifestUrl,isHD:a.isHD,hasHD:a.hasHD,resourceUrl:a.resourceUrl,hasSubtitles:a.hasSubtitles,hasRateLimit:!!a.hasUnlimitedSrc,isRateLimited:a.hasUnlimitedSrc&&!a.useUnlimitedSrc,tagHD:a.tagHD,tagSD:a.tagSD,projection:this.$VideoPlayerController57,streamId:this.$VideoPlayerController17,audioStreamId:this.getVideoAPI().getAudioStreamInfoIDDebug(),dashAudioFormat:this.getVideoAPI().getDashAudioConfiguration()}),player:babelHelpers["extends"]({},c,{dimensions:e})}};d.getLastError=function(){return this.$VideoPlayerController44};d.isAkamai=function(){var a=this.getVideoInfo_DEPRECATED();return a?a.liveManifestUrl&&a.liveManifestUrl.includes("akamaihd"):!1};d.getLoggedError=function(){return this.$VideoPlayerController47};d.getTotalFrames=function(){return this.$VideoPlayerController84?this.$VideoPlayerController84.getTotalFrames():0};d.getDroppedFrames=function(){return this.$VideoPlayerController84?this.$VideoPlayerController84.getDroppedFrames():0};d.getInterruptCount=function(){return this.$VideoPlayerController48.getCumulativeInterruptCount()};d.getInterruptTime=function(){return this.$VideoPlayerController48.getCumulativeInterruptTime()};d.getVideoStreamId=function(){return this.getVideoAPI().getCurrentlyPlayingVideoStreamInfoID()};d.getAudioStreamId=function(){return this.getVideoAPI().getCurrentlyPlayingAudioStreamInfoID()||this.getVideoAPI().getAudioStreamInfoIDDebug()};d.getVideoTracks=function(){return this.getVideoAPI().getVideoTracksDebug()};d.getAudioDashFormat=function(){return this.getVideoAPI().getDashAudioConfigurationDebug()};d.getCumulativeStallCount=function(){return this.$VideoPlayerController48.getCumulativeStallCount()};d.getCumulativeStallTime=function(){return this.$VideoPlayerController48.getCumulativeStallTime()};d.getStallCount=function(){return this.$VideoPlayerController48.getStallCount()};d.getStreamType=function(){var a=this.getVideoInfo_DEPRECATED();return a?a.streamType:"n/a"};d.hasSubtitles=function(){return this.getVideoAPI().hasSubtitles()};d.getVideoState=function(){return this.$VideoPlayerController70};d.areSubtitlesActive=function(){return this.getVideoAPI().areSubtitlesActive()};d.areSubtitlesAutogenerated=function(){return this.getVideoAPI().areSubtitlesAutogenerated()};d.areHLSActive=function(){return this.getVideoAPI().areHLSActive()};d.isRTMP_DEPRECATED=function(){return this.getVideoAPI().isRTMP()};d.toggleSubtitles=function(){this.$VideoPlayerController156(),this.logEvent("caption_change"),this.$VideoPlayerController80=!1};d.$VideoPlayerController156=function(){this.getVideoAPI().toggleSubtitles(),this.$VideoPlayerController142()};d.$VideoPlayerController142=function(){this.hasSubtitles()&&this.areSubtitlesActive()?this.$VideoPlayerController10="on":this.$VideoPlayerController10="off"};d.isHD=function(){return this.getSelectedVideoQuality()==this.getAvailableVideoQualities().pop()};d.hasHD=function(){return this.getAvailableVideoQualities().length>1};d.toggleHD=function(){this.isHD()?this.setPreferredVideoQuality(this.getAvailableVideoQualities()[0]):this.setPreferredVideoQuality(this.getAvailableVideoQualities().pop())};d.setPreferredVideoQuality=function(a){this.getVideoAPI().setPreferredVideoQuality(a)};d.unsetPreferredVideoQuality=function(){this.getVideoAPI().unsetPreferredVideoQuality()};d.getPreferredVideoQuality=function(){return this.getVideoAPI().getPreferredVideoQuality()};d.getSelectedVideoQuality=function(){return this.getVideoAPI().getSelectedVideoQuality()};d.getAvailableVideoQualities=function(){return this.getVideoAPI().getAvailableVideoQualities()};d.getVideoProjection=function(){return this.getVideoAPI().getVideoProjection()};d.canAutoSelectVideoQuality=function(){return this.getVideoAPI().canAutoSelectVideoQuality()};d.switchToStreamType=function(a){this.getVideoAPI().switchToStreamType(a)};d.$VideoPlayerController148=function(){this.getVideoAPI().replaceVideoDataFromURL(b("XVideoDataController").getURIBuilder().setString("video_id",this.getVideoID()).setInt("scrubbing_preference",n).setString("source",this.$VideoPlayerController69).getURI().toString())};d.$VideoPlayerController147=function(){this.getVideoAPI().replaceVideoDataFromURL(b("XVideoDataController").getURIBuilder().setString("video_id",this.getVideoID()).setInt("scrubbing_preference",o).setString("source",this.$VideoPlayerController69).getURI().toString())};d.$VideoPlayerController140=function(a){var b=this.getVideoInfo_DEPRECATED();return b!=null?Object.assign({resource_url:b.resourceUrl,liveStream:b.isLiveStream,hd:b.isHD},a):a};d.$VideoPlayerController170=function(){var a=this.getDOMPosition(),c=b("getViewportDimensions")().height,d;a.y<=0?d=a.y:a.y+a.height<c?d=0:d=a.y+a.height-c;return d};d.logEvent=function(a,c){__p&&__p();this.$VideoPlayerController46++;if(this.$VideoPlayerController95)return void 0;this.$VideoPlayerController117.emit(a);var d=this.$VideoPlayerController14.getNumber("logging_log_event_limit",0);d&&this.$VideoPlayerController46>d&&(this.$VideoPlayerController95=!0);d=++this.$VideoPlayerController24;c=Object.assign(this.$VideoPlayerController169(),c);var e=this.getOriginalPlayReason();e&&a!=="displayed"&&(c.video_play_reason=e);a==="finished_playing"&&(c.viewport_distance=this.$VideoPlayerController170());(a==="muted"||a==="unmuted"||a==="started_playing"||a==="caption_change"||a==="unpaused")&&(c.caption_state=this.$VideoPlayerController10);this.$VideoPlayerController92&&b("VideoViewabilityKeyEvents").Events.includes(a)&&(c.current_viewability_percentage=this.$VideoPlayerController93.getViewability(),this.$VideoPlayerController93.setLastLoggedViewability(c.current_viewability_percentage));c.event_seq_num=d;b("VideoPlayerExperiments").correctedSBLEventSequence?this.$VideoPlayerController76.has(a)&&(b("VideoPlayerExperiments").logSBLVpts&&(c.vpts=b("performanceAbsoluteNow")()),c.seq_num=++this.$VideoPlayerController77):c.seq_num=d;a==="played_for_three_seconds"&&(c.detection_id=this.$VideoPlayerController114,this.emit("videoView/runFraudDetector"));if(a==="requested_playing"&&this.$VideoPlayerController115){e=this.$VideoPlayerController115.getLiveTraceContext();c.live_trace_stream_id=e.streamId;c.live_trace_stream_type=e.streamType;c.live_trace_source_id=e.sourceId}d=this.$VideoPlayerController48.logEvent(a,c);this.emit("debug/vpcLogEvent",d);return d};d.getState=function(){return this.$VideoPlayerController70};d.getStreamingFormat=function(){var a=this.getVideoInfo_DEPRECATED()||{};return a.streamType||this.$VideoPlayerController43};d.setPlaybackRate=function(a){this.getVideoAPI().setPlaybackRate&&this.getVideoAPI().setPlaybackRate(a)};d.getPlaybackRate=function(){return this.getVideoAPI().getPlaybackRate?this.getVideoAPI().getPlaybackRate():1};d.setState=function(a){if(this.isState("destroyed")||this.isState("fallback")&&!this.isFallbackRecoverable())return;this.$VideoPlayerController70=a;this.$VideoPlayerController70==="fallback"&&(b("CSS").addClass(this.getRootNode(),"_3-n5"),this.$VideoPlayerController143());this.emit("stateChange")};d.isState=function(a){return this.$VideoPlayerController70===a};d.isIntentionallyViewing=function(){return this.isState("playing")&&!this.isMuted()};d.abortLoading=function(a){if(this.isState("loading")||this.isState("fallback"))return;b("VideoPlayerExperiments").seekZeroWhenAbortLoadingFinishedVideos&&!(b("VideoPlayerExperiments").seekZeroOnlyVodVideo&&this.$VideoPlayerController40)&&this.isState("finished")&&this.seek(0);this.getVideoAPI().abortLoading(a||{});this.stopHeartbeat()};d.preload=function(){if(this.isState("loading")||this.isState("fallback"))return;this.getVideoAPI().preload()};d.getPlayerVersion=function(){var a;this.$VideoPlayerController84&&(a=this.getVideoAPI());var b=a&&a.getUpdatedPlayerVersion?a.getUpdatedPlayerVersion.bind(a):this.$VideoPlayerController5.getPlayerVersion;b=b?b():this.$VideoPlayerController56;return this.$VideoPlayerController100?this.$VideoPlayerController161(b):b};d.$VideoPlayerController161=function(a){switch(a){case"silvercity":return"react_silvercity";case"pleasantville":return"react_pleasantville";case"oz":return"react_oz";default:return"react"}};d.registerOption=function(a,b,c,d){var e=this.$VideoPlayerController13.get(a);e||(e=new Map(),this.$VideoPlayerController13.set(a,e));if(e.has(b))throw new Error("An option can only be registered once for each component");e.set(b,{getter:c,setter:d});this.emit("optionsChange")};d.unregisterOption=function(a,b){var c=this.$VideoPlayerController13.get(a);if(!c)throw new Error('The component "'+a+'" has no options registered');if(!c.has(b))throw new Error('The component "'+a+'" has no option "'+b+'" registered');c["delete"](b);c.size||this.$VideoPlayerController13["delete"](a);this.emit("optionsChange")};d.getComponents=function(){return this.$VideoPlayerController13.keys()};d.getOptions=function(a){a=this.$VideoPlayerController13.get(a);return a?a.keys():b("enumerate")([])};d.hasOption=function(a,b){a=this.$VideoPlayerController13.get(a);return!!a&&a.has(b)};d.getOption=function(a,b){a=this.$VideoPlayerController13.get(a);if(!a)return void 0;a=a.get(b);return!a?void 0:a.getter()};d.setOption=function(a,b,c){__p&&__p();a=this.$VideoPlayerController13.get(a);if(!a)throw new Error("Component not registered");a=a.get(b);if(!a)throw new Error("Option not registered");b=a.setter;if(b)return b(c);throw new Error("Read-only option")};d.showDebugOverlayView=function(a){this.emit("showDebugOverlay",a)};d.$VideoPlayerController131=function(){var a=b("DOMQuery").scry(this.$VideoPlayerController66,"^._5pat");return a.length?a[0]:null};d.registerDrawer=function(a,b){return this.$VideoPlayerController22.register(a,b)};d.getVideoPath=function(){return this.$VideoPlayerController90};d.setAllowCrossPageTransition=function(a){this.$VideoPlayerController99=a};d.cleanOnLeave=function(){this.pause("unloaded"),this.destroy()};d.switchReplicaSet=function(a){var b=this.isState("playing");this.getVideoAPI().switchReplicaSet(a.replica,{url:a.url,status:a.status,timestamp:a.timestamp});b&&this.play("autoplay_initiated")};d.switchToFullVideo=function(){var a=this;this.pause("unloaded");this.getVideoAPI().reloadDashManifest().done(function(){a.play(new(b("VideoPlayerReasonTransitionHelper"))("user_initiated")),a.emit("switchedToFullVideo")})};d.$VideoPlayerController132=function(){return this.getIsInChannel()||this.$VideoPlayerController69==="living_room"||this.$VideoPlayerController69==="topic_channel_living_room"||this.$VideoPlayerController54==="intern_curation"||this.$VideoPlayerController54==="games_video_hub"};d.getDashAudioConfiguration=function(){return this.getVideoAPI().getDashAudioConfiguration()};d.setEnableLiveheadCatchup=function(a){var b=this.getVideoAPI();b&&b.setEnableLiveheadCatchup(a)};d.isFBWasLive=function(){var a=this.$VideoPlayerController84&&this.getVideoAPI();return!!(a&&a.isFBWasLive())};d.isFBIsLiveTemplated=function(){var a=this.$VideoPlayerController84&&this.getVideoAPI();return!!(a&&a.isFBIsLiveTemplated())};d.isDrm=function(){var a=this.$VideoPlayerController84&&this.getVideoAPI();return a&&a.isDrm()};d.isFBMS=function(){var a=this.$VideoPlayerController84&&this.getVideoAPI();return!!(a&&a.isFBMS())};d.isLiveheadCatchupEnabled=function(){var a=this.getVideoAPI();return a?a.isLiveheadCatchupEnabled():!1};d.getSeekableRanges=function(){var a=this.getVideoAPI();return a?a.getSeekableRanges():null};d.isBroadcaster=function(){return this.$VideoPlayerController32||!1};d.isWatchAndScroll=function(){return this.$VideoPlayerController69==="watch_scroll"};d.$VideoPlayerController134=function(a,c){var d=b("CurrentUser").getAccountID();d=d+"_0_"+this.$VideoPlayerController88+"_"+c+"_"+a+"_secret_www";d=b("SparkMD5").hash(d);c={input:{video_id:this.$VideoPlayerController88,timestamp:c,live_copyright_action:a,signature:d}};a=b("WebGraphQL").exec(new(b("LiveVideoCopyrightActionQueryWebGraphQLQuery"))(c));b("promiseDone")(a,function(a){},function(a){})};return c}(b("MediaController"));e.exports=a}),null);
__d("VideoCover",["invariant","Promise","Animation","Bootloader","CSS","EventListener","SubscriptionsHandler","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c,d,e,f,h){__p&&__p();var i=this;e===void 0&&(e=null);f===void 0&&(f=!1);h===void 0&&(h=0);this.$7=new(b("SubscriptionsHandler"))();this.$15=function(){i.$5&&b("CSS").show(i.$1)};this.$16=function(){i.$5&&b("CSS").hide(i.$1)};this.$11=function(){i.$3!=null&&i.$3.length>0?b("Bootloader").loadModules(["PhotoSnowlift"],function(a){return a.bootstrap(i.$3)},"VideoCover"):i.$8&&i.$8.clickVideo()};this.$12=function(){i.$9&&i.$8&&!i.$8.hasSeenClick()?b("promiseDone")(new(b("Promise"))(function(a){return b("setTimeout")(a,i.$10)}),function(a){return i.$17()},function(a){return i.$17()}):b("CSS").hide(i.$1)};this.$14=function(){if(i.$8){var a=i.$8.getOption("Looping","isLooping");if(i.$4||a)return;b("CSS").show(i.$1)}};this.$13=function(){i.$8&&i.$8.isState("fallback")&&i.$6&&b("CSS").show(i.$1)};a instanceof Element||g(0,4829);this.$1=a;c[0]instanceof Element||g(0,4830);this.$2=c[0];this.$3=d;this.$9=f;this.$10=h;e&&(this.$4=e.hiddenAfterFinish,this.$5=e.showWhileBuffering,this.$6=e.showAfterFallback);b("EventListener").listen(this.$1,"click",this.$11)}var c=a.prototype;c.disable=function(){this.$7.release(),this.$8&&this.$8.unregisterOption("VideoCover","coverElement"),this.$8=null};c.enable=function(a){var b=this;this.$8=a;a.getState()==="playing"&&this.$12();this.$7.addSubscriptions(a.addListener("stateChange",this.$13),a.addListener("beginPlayback",this.$12),a.addListener("finishPlayback",this.$14),a.addListener("buffering",this.$15),a.addListener("buffered",this.$16));a.registerOption("VideoCover","coverElement",function(){return b.$1})};c.getCurrentCover=function(){return this.$2};c.setSnowLiftURI=function(a){this.$3=a};c.$17=function(){new(b("Animation"))(this.$1).from("opacity",1).to("opacity",0).duration(1e3).hide().go()};return a}();e.exports=a}),null);
__d("VideoNodeStaledScreen",["CSS","EventListener","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){var c=this;this.$3=new(b("SubscriptionsHandler"))();this.$5=function(){b("CSS").show(c.$1)};this.$4=function(){b("CSS").hide(c.$1)};this.$1=a;this.$2=null;b("EventListener").listen(this.$1,"click",this.$4)}var c=a.prototype;c.enable=function(a){this.$2=a,this.$3.addSubscriptions(this.$2.addListener("videoNodeStaled",this.$5))};c.disable=function(){this.$3.release(),this.$2=null};return a}();e.exports=a}),null);
__d("VideoStateDirectory",["EventEmitter","VideoPlayerExperiments"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$VideoStateDirectory1=new Map();return b}var d=c.prototype;d.setPlaybackState=function(a,c,d){var e=this.$VideoStateDirectory1.get(a)||{};e.currentTimePosition=c;e.playbackDuration=d;e.watched=e.currentTimePosition/e.playbackDuration>=b("VideoPlayerExperiments").watchedPercentage/100||!!e.watched;this.$VideoStateDirectory1.set(a,e);this.emit(a,e)};d.setSaveState=function(a,b){var c=this.$VideoStateDirectory1.get(a)||{};c.saved=b;this.emit(a,c)};d.setSubscriptionState=function(a,b){var c=this.$VideoStateDirectory1.get(a)||{};c.subscribed=b;this.emit(a,c)};d.getState=function(a){return this.$VideoStateDirectory1.get(a)};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("VideoUpdateStateDirectory",["VideoStateDirectory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){var a=this;this.$2=function(){var c=a.$1,d=c.getVideoID(),e=c.getCurrentTimePosition();c=c.getPlaybackDuration();b("VideoStateDirectory").setPlaybackState(d,e,c)}}var c=a.prototype;c.enable=function(a){this.$1=a,a.addListener("finishPlayback",this.$2),a.addListener("pausePlayback",this.$2)};c.disable=function(){};return a}();e.exports=a}),null);
__d("getBufferedAheadOf",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){var b=1/60,c=a.currentTime;a=a.buffered;for(var d=0;d<a.length;d++){var e=a.start(d)-b,f=a.end(d)+b;if(c>=e&&c<=f)return Math.max(a.end(d)-c,0)}return 0}e.exports=a}),null);
__d("CEA608ExtractorWebWorker",["CEA608ExtractorWorkerResource","WebWorker","WebWorkerTransferPromise"],(function(a,b,c,d,e,f){__p&&__p();var g=null;function h(){g||(g=new(b("WebWorker"))(b("CEA608ExtractorWorkerResource")).setAllowCrossPageTransition(!0).execute());return g}a={isSupported:function(){return b("WebWorker").isMessageChannelSupported()},extract:function(a){var c=h().createMessageChannel(a);return b("WebWorkerTransferPromise").expectPromise(c)["finally"](function(){return c.close()})},prepare:function(){h()}};e.exports=a}),null);
__d("MediaBufferingDetector",["Event","EventEmitter","SubscriptionsHandler","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerShakaGlobalConfig","clearInterval","performanceNow","setInterval"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.$MediaBufferingDetector1=c;e.$MediaBufferingDetector2=new(b("SubscriptionsHandler"))();e.$MediaBufferingDetector1.paused||e.$MediaBufferingDetector8();e.$MediaBufferingDetector2.addSubscriptions(b("Event").listen(e.$MediaBufferingDetector1,"playing",function(){return e.$MediaBufferingDetector9()}),b("Event").listen(e.$MediaBufferingDetector1,"pause",function(){return e.$MediaBufferingDetector10()}),b("Event").listen(e.$MediaBufferingDetector1,"ended",function(){return e.$MediaBufferingDetector11()}),b("Event").listen(e.$MediaBufferingDetector1,"timeupdate",function(){return e.$MediaBufferingDetector12()}));e.$MediaBufferingDetector13("drop_buffering_detection_from_html5_api",!1)&&e.$MediaBufferingDetector2.addSubscriptions(b("Event").listen(e.$MediaBufferingDetector1,"waiting",function(){return e.$MediaBufferingDetector14()}));return e}var d=c.prototype;d.$MediaBufferingDetector15=function(){var a=b("performanceNow")(),c=this.$MediaBufferingDetector1.currentTime;a=a-this.$MediaBufferingDetector5;c=c-this.$MediaBufferingDetector6;c=c*1e3;c=a-c;var d=b("VideoPlayerHTML5Experiments").disableBufferAtEndOfPlayback&&this.$MediaBufferingDetector1.currentTime===this.$MediaBufferingDetector1.duration;a*.2<Math.abs(c)&&!d?this.$MediaBufferingDetector16():this.$MediaBufferingDetector17();this.$MediaBufferingDetector18()};d.$MediaBufferingDetector18=function(){this.$MediaBufferingDetector5=b("performanceNow")(),this.$MediaBufferingDetector6=this.$MediaBufferingDetector1.currentTime};d.$MediaBufferingDetector8=function(){var a=this;if(this.$MediaBufferingDetector4)return;this.$MediaBufferingDetector18();this.$MediaBufferingDetector4=b("setInterval")(function(){return a.$MediaBufferingDetector15()},500)};d.$MediaBufferingDetector19=function(){b("clearInterval")(this.$MediaBufferingDetector4),this.$MediaBufferingDetector4=null};d.$MediaBufferingDetector16=function(){if(this.$MediaBufferingDetector3)return;this.$MediaBufferingDetector3=!0;this.emit("bufferingStart")};d.$MediaBufferingDetector17=function(){if(!this.$MediaBufferingDetector3)return;this.$MediaBufferingDetector3=!1;this.emit("bufferingEnd")};d.$MediaBufferingDetector9=function(){this.$MediaBufferingDetector17(),this.$MediaBufferingDetector8()};d.$MediaBufferingDetector10=function(){this.$MediaBufferingDetector17(),this.$MediaBufferingDetector19()};d.$MediaBufferingDetector11=function(){this.$MediaBufferingDetector17(),this.$MediaBufferingDetector19()};d.$MediaBufferingDetector12=function(){this.$MediaBufferingDetector1.paused||(this.$MediaBufferingDetector17(),this.$MediaBufferingDetector19(),this.$MediaBufferingDetector8())};d.$MediaBufferingDetector14=function(){this.$MediaBufferingDetector19(),this.$MediaBufferingDetector16()};d.$MediaBufferingDetector13=function(a,c){return this.$MediaBufferingDetector7?this.$MediaBufferingDetector7.getBool(a,c):b("VideoPlayerShakaGlobalConfig").getBool(a,c)};d.destroy=function(){b("VideoPlayerExperiments").fireBufferingEndEventOnDestroy&&this.$MediaBufferingDetector17(),this.$MediaBufferingDetector19(),this.$MediaBufferingDetector2.release()};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoFrameBuffer",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c,d,e,f,g){d===void 0&&(d=null),e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),this.$2=b,this.$1=a,this.$3=c||"contain",this.$6=d,this.$7=e,this.$8=f,this.$9=g}var c=a.prototype;c.updateFrameBuffer=function(){__p&&__p();this.$4&&(this.$1.width=this.$4,this.$4=null);this.$5&&(this.$1.height=this.$5,this.$5=null);if(this.$2.readyState<b("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)return;var a=this.$1.clientWidth||this.$1.width,c=this.$1.clientHeight||this.$1.height,d=a,e=c,f=this.$2.videoWidth/this.$2.videoHeight,g=d/e;this.$3==="cover"&&(g*=-1,f*=-1);g>f?d=e*f:g<f&&(e=d/f);g=this.$1.getContext("2d");if(!(g instanceof window.CanvasRenderingContext2D))return;try{if(this.$6||this.$7){g.drawImage(this.$2,(f=this.$8)!=null?f:0,(f=this.$9)!=null?f:0,(f=this.$6)!=null?f:a,(f=this.$7)!=null?f:c,0,0,a,c)}else g.drawImage(this.$2,(a-d)/2,(c-e)/2,d,e)}catch(a){if(a.name!=="NS_ERROR_NOT_AVAILABLE")throw a}};c.getDOMNode=function(){return this.$1};c.updateDimensions=function(a,b){this.$4=a,this.$5=b};return a}();e.exports=a}),null);
__d("VideoPlayerMainThreadAvailability",["VideoPlayerShakaGlobalConfig","Visibility","nativeRequestAnimationFrame","performanceNow","requestAnimationFrame","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=window.__fbNativeSetTimeout,h=a.__fbNativeClearTimeout,i=window.requestIdleCallback,j=window.cancelIdleCallback,k=function(a){var b=function b(){a(b)};return b},l=function(a,b){var c=function c(){a(c,b)};return c},m=function(a,b){var c=function c(){a(c,b)};return c};c=function(){__p&&__p();function a(){this.$1=!1,this.$2=null,this.$3=null,this.$4=null}var c=a.prototype;c.enable=function(){if(this.$1||!this.$5())return;this.$6();this.$7();this.$1=!0};c.getTimeSinceMainThreadAvailable=function(){return this.$2!=null?b("performanceNow")()-Number(this.$2):null};c.$8=function(){this.$2=b("Visibility").isHidden()?null:b("performanceNow")()};c.$9=function(){this.$2=null,typeof this.$4==="number"&&(j(this.$4),this.$4=null),typeof this.$3==="number"&&(h(this.$3),this.$3=null)};c.$7=function(){b("VideoPlayerShakaGlobalConfig").getBool("use_settimeout_for_main_thread_available",!1)?this.$10():this.$11()};c.$6=function(){var a=this;b("Visibility").addListener(b("Visibility").VISIBLE,function(){a.$9(),a.$7()});b("Visibility").addListener(b("Visibility").HIDDEN,function(){a.$9()})};c.$10=function(){var a=this,c=b("VideoPlayerShakaGlobalConfig").getNumber("settimeout_polling_delay",-1);if(c>-1){var d=function b(){a.$8(),a.$3=g(b,c)};g(d,c)}};c.$11=function(){var a=this,c=b("VideoPlayerShakaGlobalConfig").getNumber("recursive_ric_timeout",-1),d;c>-1&&(d={timeout:c});c=function c(e){a.$8(),a.$4=b("requestIdleCallback")(c,d)};b("requestIdleCallback")(c,d)};c.$5=function(){return b("Visibility").isSupported()&&typeof i==="function"&&typeof j==="function"&&typeof g==="function"&&typeof h==="function"};c.maybeEnablePerformanceTest=function(){var a,c,d=b("VideoPlayerShakaGlobalConfig").getNumber("recursive_ric_timeout",-1);d>-1&&(c={timeout:d});b("VideoPlayerShakaGlobalConfig").getBool("enable_recursive_raf",!1)&&(a=k(b("requestAnimationFrame")));b("VideoPlayerShakaGlobalConfig").getBool("enable_recursive_ric",!1)&&(a=l(b("requestIdleCallback"),c));b("VideoPlayerShakaGlobalConfig").getBool("enable_recursive_native_raf",!1)&&typeof b("nativeRequestAnimationFrame")==="function"&&(a=k(b("nativeRequestAnimationFrame")));b("VideoPlayerShakaGlobalConfig").getBool("enable_recursive_native_ric",!1)&&typeof i==="function"&&(a=l(i,c));d=b("VideoPlayerShakaGlobalConfig").getNumber("recursive_native_settimeout_delay",-1);d>-1&&typeof g==="function"&&(a=m(g,d));a&&a()};return a}();e.exports=new c()}),null);
__d("VideoPlayerPlayLogger",["EventListener","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c){var d=this;this.$3=new(b("SubscriptionsHandler"))();this.$1=a;this.$2=c;this.$3.addSubscriptions(b("EventListener").listen(this.$1,"playing",function(){return d.$5()}),b("EventListener").listen(this.$1,"pause",function(){return d.$6()}))}var c=a.prototype;c.playStarted=function(){(this.$1.paused||this.$1.ended)&&(this.$4=this.$2.getOperationLogger("play").setState("pending_play").start())};c.$6=function(){this.$4&&(this.$4.setResult("aborted").log(),this.$4=null)};c.$5=function(){this.$4&&(this.$4.log(),this.$4=null)};c.unload=function(){this.$3.release()};return a}();e.exports=a}),null);
__d("concatArrayBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer};e.exports=a}),null);
__d("extractCEA608",["CEA608ExtractorWebWorker","JSResource","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=b("gkx")("678908");function a(a){if(h&&b("CEA608ExtractorWebWorker").isSupported())return b("CEA608ExtractorWebWorker").extract(a);g||(g=b("JSResource")("CEA608Extractor").__setRef("extractCEA608").load());return g.then(function(b){return b.extract(a)})}a.prepare=function(){if(!h||!b("CEA608ExtractorWebWorker").isSupported())return;b("CEA608ExtractorWebWorker").prepare()};e.exports=a}),null);
__d("isHTML5VideoImplementationUnavailable",["VideoMimeTypes","canVideoPlayType","supportsHTML5Video"],(function(a,b,c,d,e,f){a=function(a){if(a){a=b("canVideoPlayType")(b("VideoMimeTypes").h264main30avc);return a!=="probably"}return!b("supportsHTML5Video")()};e.exports=a}),null);
__d("onCanPlayHTMLMediaElement",["invariant","EventListener","HTMLMediaElementReadyStates","setImmediate"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){return a>=b("HTMLMediaElementReadyStates").HAVE_FUTURE_DATA}function i(a,c){a instanceof window.HTMLMediaElement||g(0,4493);h(a.readyState)&&b("setImmediate")(c);return b("EventListener").listen(a,"canplay",c)}i.once=function(a,b){var c=this,d=i(a,function(){if(!d)return;d.remove();d=null;for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];b.apply(c,e)})};e.exports=i}),null);
__d("onLoadedMetadataHTMLMediaElement",["EventListener","HTMLMediaElementReadyStates","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();function g(a){return a>=b("HTMLMediaElementReadyStates").HAVE_METADATA}function h(a,c){g(a.readyState)&&b("setImmediate")(c);return b("EventListener").listen(a,"loadedmetadata",c)}h.once=function(a,b){var c=this,d=h(a,function(){d.remove();for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];b.apply(c,e)})};e.exports=h}),null);
__d("seekHTMLMediaElementTo",["EventListener","onLoadedMetadataHTMLMediaElement","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d){__p&&__p();if(a.currentTime==c)return d&&b("setImmediate")(d);try{a.currentTime=c}catch(a){}if(a.currentTime)var e=b("EventListener").listen(a,"seeked",function(){e.remove(),d&&d()});else b("onLoadedMetadataHTMLMediaElement")(a,function(){a.currentTime=c;var e=b("EventListener").listen(a,"seeked",function(){e.remove(),d&&d()})})}e.exports=a}),null);
__d("BufferReplacementHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b,c,d){return a.startTime>b-c&&a.endTime<b+d}function h(a,b,c,d){d=d.get(a.startTime);return!!d&&c(b,d.id)>0}function i(a,b,c,d,e,f,i){__p&&__p();var j=i.thresholdBefore,k=i.thresholdAfter;i=i.wrapReplacementPastEnd;var l=[],m=!1;for(var c=c;c<a.length;c++){g(a[c],b,j,k)&&h(a[c],d,e,f)&&l.push(a[c]);if(a[c].endTime>b+k){m=!0;break}}if(!m&&i){c=b+k-a[a.length-1].endTime;for(var j=0;j<a.length;j++){c-=a[j].endTime-a[j].startTime;c>=0&&h(a[j],d,e,f)&&l.push(a[j]);if(a[j].endTime>b+k)break}}return l}function j(a,b,c,d,e,f,i){var j=i.thresholdBefore,k=i.thresholdAfter;i.wrapReplacementPastEnd;i=[];for(var c=c-1;c>=0;c--){g(a[c],b,j,k)&&h(a[c],d,e,f)&&i.push(a[c]);if(a[c].startTime<b-j)break}return i}function a(a,b,c,d,e,f,g){a=[a,b,c,d,e,f,g];return i.apply(void 0,a).concat(j.apply(void 0,a))}e.exports={getSegmentsToReplaceLowerQuality:a}}),null);
__d("BufferVelocity",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=[],this.$2=a*1e3}var b=a.prototype;b.recordBufferAhead=function(a){this.$1.push({bufferAhead:a,timestamp:Date.now()})};b.getVelocity=function(){if(this.$1.length<2)return null;var a=this.$1[this.$1.length-1],b=this.$3(),c=b.oldestValidEntry;b=b.oldestValidEntryIndex;b!=null&&b>0&&this.$1.splice(0,b);return c!=null?(a.bufferAhead-c.bufferAhead)/((a.timestamp-c.timestamp)/1e3):null};b.$3=function(){var a=null,b=null;for(var c=0;c<this.$1.length-1;c++){a=this.$1[c];if(this.$1[c].timestamp>=Date.now()-this.$2)break;b=c}return{oldestValidEntry:a,oldestValidEntryIndex:b}};b.reset=function(){this.$1=[]};return a}();e.exports=a}),null);
__d("FixedSizeTransform",["invariant","Deferred","DeferredBuffer","MaybeNativePromise","ProducerInterruptedError","ReadableStream","WritableStream","pipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();a===void 0&&(a={});this.$1=0;this.$4=0;this.$5=b("MaybeNativePromise").resolve();this.$8=[];a=a;var c=a.disableDeferredBufferArrayShift,d=a.useNativePromiseInDeferredBuffer;a=a.fixFixedSizeTransformOnNullEndByte;this.$12=a||!1;this.$3=new(b("DeferredBuffer"))({disableArrayShift:!!c,useNativePromise:!!d})}var c=a.prototype;c.cancel=function(a){this.$13(a),this.$7&&b("pipeErrorTo")(this.$7,a)};c.cancelAfterBytes=function(a,b){a<=this.$1?this.cancel(b):(this.$10=a,this.$11=b)};c.$13=function(a){this.$9=a,this.$6&&this.$6.reject(this.$9)};c.getSink=function(){var a=this;this.$2||(this.$2=new(b("WritableStream"))({start:function(b){a.$7=b},write:function(b){b instanceof Uint8Array||g(0,3834),a.$3.produce(b),a.$1+=b.length,a.$10!=null&&a.$10<=a.$1&&a.cancel(a.$11)},close:function(){a.$3.signalProducerInterruption(),a.$2=null},abort:function(b){a.$3.produce(b)}}));return this.$2};c.getNextFixedSizeStream=function(a){__p&&__p();var c=this,d=a===void 0,e=0;if(this.$9)return b("MaybeNativePromise").reject(this.$9);this.$6=new(b("Deferred"))(b("MaybeNativePromise"));var f=this.$6.getPromise(),g=this.$5;this.$5=f;return g.then(function(){__p&&__p();return new(b("ReadableStream"))({start:function(a){c.$8.push(a)},pull:function(f){__p&&__p();if(!d&&c.$4===a)return c.$14(f);var g=d?void 0:(a||0)-c.$4;return c.$3.consume(g).then(function(a){f.enqueue(a),c.$4+=a.length})["catch"](function(a){if(a instanceof b("ProducerInterruptedError"))if(c.$12)return d&&(c.$4>0||e>0)?c.$14(f):e++;else return d?c.$14(f):b("MaybeNativePromise").resolve();c.$13(a);c.$8.forEach(function(c){b("pipeErrorTo")(c,a)})})},cancel:function(a){c.$13(a),b("pipeErrorTo")(c.$7,a)}})})};c.$14=function(a){a.close();this.$4=0;this.$6.resolve();return b("MaybeNativePromise").resolve()};return a}();e.exports=a}),null);
__d("ChunkableContinuousRangeStream",["ByteRange","Deferred","FixedSizeTransform","MaybeNativePromise","PausableRangeStream","ReadableStream","WritableStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ByteRange").disjoinAfter,h=b("ByteRange").getLength,i=b("ByteRange").startsAtSame,j=b("ByteRange").startsDuring,k=b("ByteRange").startsImmediateAfter,l=b("ByteRange").union;a=function(){__p&&__p();function a(a,c){__p&&__p();this.$1=b("MaybeNativePromise").resolve(null);this.$2=null;this.$3=null;this.$5=[];this.$7=null;this.$9=!1;this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$16=!1;this.$17=!1;this.$18=!1;this.$19=!1;this.$20=!1;this.$4=a;c=c||{};a=c;c=a.disableStreamAutoStart;var d=a.enableStreamRangeConcat,e=a.disableDeferredBufferArrayShift,f=a.useNativePromiseInDeferredBuffer,g=a.fixFixedSizeTransformOnNullEndByte,h=a.fixStreamingUndefinedEndByte,i=a.enablePausableStreamResumeFromStart,j=a.fixPausePreReadableStream;a=a.enableFactoryDestroy;this.$12=!!c;this.$13=!!d;this.$14=!!e;this.$16=!!g;this.$15=!!f;this.$8=new(b("FixedSizeTransform"))({disableDeferredBufferArrayShift:this.$14,useNativePromiseInDeferredBuffer:this.$15,fixFixedSizeTransformOnNullEndByte:this.$16});this.$17=!!h;this.$18=!!i;this.$19=!!j;this.$20=!!a}var c=a.prototype;c.$21=function(){__p&&__p();var a=this;this.$6&&(this.$6.resolve(null),this.$6=null);this.$3=null;this.$9=!0;if(this.$20){var b=[];this.$5.map(function(c){var d=a.$7;if(!d)return;i(c.getByteRange(),d)&&b.push(c)});this.$5=b}};c.isClosed=function(){return this.$9};c.getReservedChunkStream=function(a){__p&&__p();if(this.isClosed())return b("MaybeNativePromise").reject();this.updateRangeStream(a);if(this.$7&&!k(a,this.$7)){this.destroy();return b("MaybeNativePromise").reject(new Error("Bad Range Request"))}this.$7=a;a=h(a);return this.$8.getNextFixedSizeStream(a===null?void 0:a)};c.$22=function(){var a="close stream";this.$7!=null&&this.$7.endByte!=null&&this.$11!=null?this.$8.cancelAfterBytes(this.$7.endByte-this.$11+1,a):this.$7||this.$8.cancel(a)};c.updateRangeStream=function(a){__p&&__p();var b=this;if(this.isClosed())return"closed";if(!this.$23(a)){this.$1.then(function(){b.$22()});this.$21();return"closed"}if(!this.$2)this.$24(a);else{this.$3=this.$25(a);a=this.$5[this.$5.length-1];this.$13&&this.$3!=null&&a&&a.tryConcatByteRange(this.$3)?this.$3=null:!this.$10&&this.$3!=null&&this.$24(this.$3)}return"streaming"};c.getCurrentStreamRange=function(){return this.$2};c.removeQueuedRange=function(){this.$3=null};c.$24=function(a){__p&&__p();var b=this;this.$10=!0;this.$26(a).then(function(){b.$10=!1;if(b.$3){var a=b.$3;b.$3=null;b.$24(a)}})["catch"](function(a){b.$10=!1})};c.getPausableStreamFactory=function(){var a=this;return function(){if(a.$5.length)return b("MaybeNativePromise").resolve(a.$5[0]);return a.$6?a.$6.getPromise():b("MaybeNativePromise").resolve(null)}};c.$26=function(a){__p&&__p();var c=this;this.$2=a;this.$11==null&&(this.$11=a.startByte);var d=new(b("Deferred"))(b("MaybeNativePromise"));this.$1=d.getPromise();a=new(b("PausableRangeStream"))(b("ReadableStream"),b("WritableStream"),a,this.$4,{disableDeferredBufferArrayShift:this.$14,useNativePromiseInDeferredBuffer:this.$15,fixStreamingUndefinedEndByte:this.$17,enablePausableStreamResumeFromStartDangerously:this.$18,fixPausePreReadableStream:this.$19});this.$12?(a=this.$27(a,d),this.$5.push(a)):a.startStream().then(function(){d.resolve()});a=a.getStream();return a.pipeTo(this.$8.getSink())["catch"](function(a){c.$21();throw a})};c.$27=function(a,c){__p&&__p();var d=a.startStream;a.startStream=function(){__p&&__p();var e=this;return d.call(a).then(function(d){__p&&__p();d=d.statusPromise;c.resolve();d=d.then(function(c){if(c!=="stream_paused"){var d=e.$5.indexOf(a);d>-1&&e.$5.splice(d,1)}e.$3&&(e.$6=new(b("Deferred"))(b("MaybeNativePromise")));return c});return{statusPromise:d}})}.bind(this);this.$6&&(this.$6.resolve(a),this.$6=null);return a};c.destroy=function(){this.$22(),this.$21()};c.$25=function(a){a=a;this.$3&&(a=l(this.$3,a));a!=null&&this.$2&&(a=g(a,this.$2));return a};c.$23=function(a){if(!this.$2)return!0;return!this.$7?i(a,this.$2):j(a,this.$7)||k(a,this.$7)};return a}();e.exports=a}),null);
__d("ContinuousPausableStreamTask",["VideoPriorityCalculator","clearInterval","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d,e){__p&&__p();c===void 0&&(c=0);d===void 0&&(d=null);e===void 0&&(e={});this.$3=!1;this.$9=!1;this.$10=!1;this.$11=!1;this.$12=!1;this.$13=0;this.$14=0;this.$15=1;this.$1=a;this.$4=b;this.$7=c;this.$5=d;a=e;b=a.uncancellablePriority;c=a.disableAudioStreamPause;d=a.yieldOnLowPriStream;e=a.lowPriTaskYieldCheckInterval;var f=a.lowPriTaskMinBytesToYield;a=a.lowPriTaskYieldsPerTask;this.$8=b==null?Infinity:b;this.$11=!!c;this.$12=!!d;this.$13=e||0;this.$14=f||0;this.$15=a||1}var c=a.prototype;c.run=function(){__p&&__p();var a=this;if(this.$5){var c=this.$5.getOperationLogger("streaming_task").start();c.setType(this.$4);this.$6=c}c=function c(){__p&&__p();a.$2=null;return a.$1().then(function(d){__p&&__p();a.$2=d;a.$3&&a.$16();if(!d){a.$6&&a.$6.setResult("done").log();return}var e=d.getBytesStreamed(),f=d.getByteRange(),g=f.endByte?(f.endByte-f.startByte)/a.$15:0;return d.startStream().then(function(f){__p&&__p();f=f.statusPromise;var h,i=d;a.$13&&i&&(h=b("setInterval")(function(){var c=i.getBytesStreamed()-e;a.$7<b("VideoPriorityCalculator").getMaxPriority()&&c>a.$14&&c>g&&(i.pauseStream(),b("clearInterval")(h))},a.$13));return f.then(function(d){b("clearInterval")(h);if(d==="stream_paused")a.$16();else if(d==="stream_aborted"){a.$6&&a.$6.setResult("failed").log();throw new Error("failed")}(a.$12&&a.$7<b("VideoPriorityCalculator").getMaxPriority()||a.$10)&&(a.$10=!1,a.$16());return c()})["catch"](function(a){b("clearInterval")(h);throw a})})})};return c()};c.updatePriority=function(a){this.$7=a,this.$9&&this.cancel()};c.cancel=function(){if(this.$11&&this.$4==="audio")return;if(this.$7>=this.$8){this.$9=!0;return}this.$2&&this.$2.pauseStream();this.$3=!0};c.cancelOnCurrentStreamDone=function(){this.$10=!0};c.$16=function(){this.$6&&this.$6.setResult("cancelled").log();throw new Error("cancelled")};return a}();e.exports=a}),null);
__d("RlAbrModel",["regeneratorRuntime","RlAbrUtils","RlAlgebra"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=[],this.$3=0,this.$4=0}var c=a.prototype;c.$5=function(a,b){var c=b[3],d=b[4],e=b[5];b=b[6];d=this.$3*d*this.$1.getNumber("rl_bitrate_reward",1)+c*this.$1.getNumber("rl_watch_time_reward",0)-e*this.$1.getNumber("rl_stall_count_penalty",30)-b*this.$1.getNumber("rl_stall_time_penalty",0);this.$3=a;return d};c.fetchIfNotExist=function(a,c,d){__p&&__p();return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:if(!(this.$2.length==0)){e.next=4;break}e.next=3;return b("regeneratorRuntime").awrap(b("RlAbrUtils").fetchRlAbrModel(a,c,d));case 3:this.$2=e.sent;case 4:case"end":return e.stop()}},null,this)};c.getPolicyReportExperience=function(a,c,d,e,f,g){__p&&__p();var h=[].concat(d[0]/this.$1.getNumber("rl_bandwidth_scale",1e6),d[1]/this.$1.getNumber("rl_buffer_scale",10),d[2]/this.$1.getNumber("rl_playback_scale",2e5)),i=[];for(var j=0;j<e.length;j++)i.push(e[j]/this.$1.getNumber("rl_bandwidth_scale",1e6));j=b("RlAlgebra").policyInference(this.$2[1],this.$2[2],h,i);h=b("RlAlgebra").vectorSample(j);if(h>=f.length)throw new Error("RL chooses unavailable bitrate.");f=this.$5(i[h],d);b("RlAbrUtils").putExperience(a,c,String(this.$2[0]),this.$4,d,e,f,h,j,g);this.$4+=1;return h};c.modelFetched=function(){return this.$2.length==3};return a}();e.exports=a}),null);
__d("FirstLoadedVideoPriorityAdjuster",["EventListener","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a=function(){__p&&__p();function a(a){var c=this;this.$1=function(){};this.$2=new(b("SubscriptionsHandler"))();this.$3=!1;this.$4=!1;g===null&&(g=a,this.$4=!0,this.$2.addSubscriptions(b("EventListener").listen(a,"playing",function(){c.$3=!0,c.$1&&c.$1(c.getPriorityAdjustment()),c.cleanup()})))}var c=a.prototype;c.setOnPriorityChanged=function(a){this.$1=a};c.getPriorityAdjustment=function(){return this.$4&&!this.$3?.5:0};c.cleanup=function(){this.$2.release(),this.$1=function(){}};return a}();e.exports=a}),null);
__d("LocalBitrateHelper",["UnitConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UnitConstants").BITS_IN_BYTE;function a(a,b,c){__p&&__p();if(!a[b])return null;if(a[b].startTime>c)return b;while(b<a.length){if(a[b].startTime>c)return b;b++}return null}function c(a,b,c){if(b>=a.length||b<0)return null;c=b+c>=a.length?a.length-b-1:c;var d=a[b];a=a[b+c];b=d.url.startByte;c=a.url.endByte;return b===void 0||c===void 0?null:Math.round((c-b)/(a.endTime-d.startTime)*g)}e.exports={getBufferEndSegmentIndex:a,getLocalBitrate:c}}),null);
__d("ShakaSegmentReferenceHelper",["BinarySearch","FBLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.001;function h(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(Math.abs(b-d.startTime)<g)return c}return-1}function i(a,c){__p&&__p();var d=h(a,c);if(d>-1)return d;for(var d=a.length-1;d>=0;--d){var e=a[d];if(c>=e.startTime&&c<e.endTime){b("FBLogger")("shaka").warn("Segment reference have no matching start time %s, %d",JSON.stringify(e),c);return d}}return-1}function a(a,b){var c=i(a,b.startTime);if(c>=0){a.splice(c,0,b);return c+1}else{a.push(b);return a.length}}function c(a,c){var d=a.startByte;d=b("BinarySearch").leastUpperBound(function(a){a=c[a];return a.url.startByte},d,0,c.length,function(a,b){return a-b});var e=c[d];return e&&e.url.baseUrl===a.baseUrl&&e.url.startByte===a.startByte&&e.url.endByte===a.endByte?d:-1}e.exports={findIndexByStartTime:i,insertReference:a,findIndexByRequestInfo:c,findIndexByStartTimeExact:h}}),null);
__d("MultipleSegmentsProvider",["invariant","ShakaSegmentReferenceHelper","VideoPlayerShakaGlobalConfig","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=[],this.$3=[],this.$4=0,this.$5=b("emptyFunction"),this.$1=a}var c=a.prototype;c.getNumberOfSegments=function(){var a=this.$1;this.$1=Math.max(this.$1-b("VideoPlayerShakaGlobalConfig").getNumber("multi_segment_decay",0),1);return Math.ceil(a)};c.setFutureSegments=function(a){this.$2=a};c.setOnSegmentsUpdated=function(a){this.$5=a};c.clearOnSegmentsUpdated=function(){this.setOnSegmentsUpdated(b("emptyFunction"))};c.setSegments=function(a){var b=this.$3;this.$3=a;this.$5(b,a)};c.isRequestInBufferTarget=function(a,c){a=b("ShakaSegmentReferenceHelper").findIndexByRequestInfo(a,this.$3);if(a<0)return!1;a=this.$3[a];return a.startTime<c.bufferStart+c.bufferingGoal};c.setBufferingGoal=function(a){this.$4=a};c.$6=function(a){__p&&__p();var c=[],d=b("ShakaSegmentReferenceHelper").findIndexByRequestInfo(a,this.$3);if(d>=0){var e=Math.min(this.$3.length,d+this.$1);for(var d=d;d<e;d++)c.push(this.$3[d])}if(!c.length)return[{startByte:a.startByte,endByte:a.endByte}];d=c[0];e=c[c.length-1];return[{startByte:d.url.startByte||0,endByte:e.url.endByte}]};c.getFetchRanges=function(a){if(b("VideoPlayerShakaGlobalConfig").getBool("enable_fixed_segment_boundary",!1))return this.$7(a);var c=this.$2;if(c.length===0||b("VideoPlayerShakaGlobalConfig").getBool("enable_streaming_authentic_fetch_range_query",!1))return this.$6(a);c.length>0||g(0,1467);a=c[0];c=c[c.length-1];return c.url.baseUrl!==a.url.baseUrl?[{startByte:a.url.startByte,endByte:a.url.endByte}]:[{startByte:a.url.startByte||0,endByte:c.url.endByte}]};c.getNextRequestInfo=function(a){var b=this.$3.findIndex(function(b){return b.url.baseUrl===a.baseUrl&&b.url.startByte===a.startByte});b=this.$3[b+1];return!b?null:{baseUrl:b.url.baseUrl,startByte:b.url.startByte,endByte:b.url.endByte}};c.$7=function(a){__p&&__p();var c=a.startByte;a=b("ShakaSegmentReferenceHelper").findIndexByRequestInfo(a,this.$3);if(a<0)return[];var d=[],e=this.$3[a];if(!e)return[];var f=e.startTime;for(var a=a;a<this.$3.length;a++){e=this.$3[a];if((a+1)%this.$1===0){d.push({startByte:c,endByte:e.url.endByte});var g=e.endTime;e=null;if(g-f>=this.$4)break}}e&&d.push({startByte:c,endByte:e.url.endByte});return d};c.getSegmentsBoundaries=function(a){if(this.$2.length===0)return[{startByte:a.startByte,endByte:a.endByte}];this.$2.length>0||g(0,1467);return this.$2.map(function(a){a=a.url;var b=a.startByte;a=a.endByte;return{startByte:b||0,endByte:a}})};c.getTimeRange=function(a){var b={startTime:null,endTime:null};this.$2.forEach(function(c){var d=c.url;if(!d)return;d.startByte===a.startByte&&(b.startTime=c.startTime);d.endByte===a.endByte&&(b.endTime=c.endTime)});return b};return a}();e.exports=a}),null);
__d("SegmentsUpdateHelper",["BanzaiODS","VideoPlayerShakaGlobalConfig","VideoSegmentInfoHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.updateSegments=function(b,c){__p&&__p();var d=this;if(!c.length)return;var e=this.$2.get(b)||[],f=e[e.length-1];f=f?f.startTime:-1;var g=c.length;while(g>0){var h=c[g-1];if(h.startTime<=f)break;g--}h=c.slice(g);f=c.slice(0,g);this.$3(e,f);c=h.map(function(b){return a.createSegmentInfo(b)});c.forEach(function(a){d.$4(a),e.push(a)});this.$2.set(b,e)};a.createSegmentInfo=function(a){var b=a.startTime,c=a.endTime,d=a.url,e=a.unscaledStartTime;a=a.unscaledDuration;var f=d.baseUrl,g=d.isPredictive,h=d.startByte;d=d.endByte;b={segmentID:0,startTime:b,endTime:c,requestInfo:{baseUrl:f,isPredictive:g,startByte:h,endByte:d||void 0},unscaledStartTime:e,unscaledDuration:a};return b};c.$5=function(a,b){__p&&__p();var c=b.startTime,d=b.endTime,e=b.url,f=b.unscaledStartTime;b=b.unscaledDuration;var g=e.baseUrl,h=e.startByte;e=e.endByte;a.segmentID=0;a.startTime=c;a.endTime=d;c=a.requestInfo;c.baseUrl=g;c.startByte=h;c.endByte=e||void 0;a.unscaledStartTime=f;a.unscaledDuration=b;return a};c.$3=function(c,d){__p&&__p();if(!d.length)return;var e=d.length,f=function(){var a=d[e-1]||null;e--;return a},g=f(),h=Number.POSITIVE_INFINITY;for(var i=0;i<=c.length&&g!=null;i++){var j=c.length-i,k=c[j-1],l=j>=1?k.startTime:Number.NEGATIVE_INFINITY,m=void 0;if(l<=g.startTime&&g.endTime<=h){if(l===g.startTime){var n=b("VideoSegmentInfoHelper").getRequestCacheKey(k.requestInfo);m=this.$5(k,g);k=b("VideoSegmentInfoHelper").getRequestCacheKey(m.requestInfo);k!==n&&(this.$1["delete"](n),this.$4(m))}else{m=a.createSegmentInfo(g);this.$4(m);c.splice(j,0,m);b("VideoPlayerShakaGlobalConfig").getBool("srm_fix_update_helper_insert_loop",!1)&&(l=m.startTime);k=b("VideoPlayerShakaGlobalConfig").getString("segment_update_helper_splice_path_entity_key","");if(k){n=g.unscaledStartTime;j=g.unscaledDuration;typeof n==="number"&&typeof j==="number"&&m.unscaledStartTime===n&&m.unscaledDuration===j&&b("BanzaiODS").bumpEntityKey(2966,"videos.www.shaka",k)}}g=f();b("VideoPlayerShakaGlobalConfig").getBool("srm_fix_update_helper_insert_loop",!1)&&g!=null&&i+1>c.length&&i--}h=l}};c.$4=function(a){var c=b("VideoSegmentInfoHelper").getRequestCacheKey(a.requestInfo);this.$1.set(c,a)};return a}();e.exports=a}),null);
__d("TrackedPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=window.Promise||b("Promise");b("Promise").resolve();a=function(){__p&&__p();function a(a,b){var c=this;this.$3=!1;this.$1="pending";this.$2=a.then(function(a){c.$1="fulfilled";return a},function(a){c.$1="rejected";if(!b.getBool("fix_uncaught_promise_error_message",!1)||c.$3)return g.reject(a)})}var b=a.prototype;b.getPromise=function(){this.$3=!0;return this.$2};b.isPending=function(){return this.$1==="pending"};b.getState=function(){return this.$1};return a}();e.exports=a}),null);
__d("NetworkRequestPipelineStats",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5,h=.5,i=30;a=function(){__p&&__p();function a(){this.$1={},this.$2={},this.$3=0,this.$4=new Set()}var b=a.prototype;b.addEntry=function(a,b){this.$3=Math.max(this.$3,a);if(!b)return;this.$1[a]=b;var c=this.$1[a-1];!this.$4.has(a-1)&&c&&this.$5(c,b,a);c=this.$1[a+1];!this.$4.has(a)&&c&&this.$5(b,c,a+1)};b.setNetworkIdle=function(){this.$4.add(this.$3)};b.$5=function(a,b,c){this.$2[c]=b.startTime+b.timeToFirstByte-(a.startTime+a.timeToLastByte)};b.getBandwidthAlignments=function(){return this.$2};b.getBandwidthUtilization=function(){var a=this,b=0,c=0;Object.keys(this.$2).forEach(function(d){d=Number.parseInt(d,10);var e=a.$2[d];d=a.$1[d];d=d.timeToLastByte-d.timeToFirstByte;b+=d;c+=Math.max(0,e)+d});return b/Math.max(1,c)};b.$6=function(a){__p&&__p();a=[];var b=0;while(!0){var c=this.$1[this.$3-b];if(!c)break;c.timeToLastByte-c.timeToFirstByte>=i&&a.push(c);b++}return a};b.getEstimatedDownloadTime=function(a){if(a){var b=this.$7();return!b?0:a/b}return this.$8(function(a){return a.timeToLastByte-a.timeToFirstByte},{lastN:g,defaultValue:0})};b.$7=function(){return this.$8(function(a){return a.transferSize/(a.timeToLastByte-a.timeToFirstByte||1)},{lastN:g,defaultValue:0})};b.$8=function(a,b){var c=b.lastN;b=b.defaultValue;c=this.$6(c);return!c.length?b:c.reverse().reduce(function(b,c){return h*a(c)+(1-h)*b},a(c[0]))};b.getEstimatedTimeToFirstByte=function(){return this.$8(function(a){return a.timeToFirstByte},{lastN:g,defaultValue:5e3})};b.getOptimisticTimeToFirstByte=function(){var a=this.$6(g);if(!a.length)return 0;a=Math.min.apply(Math,a.map(function(a){return a.timeToFirstByte}));var b=this.$8(function(a){return a.timeToFirstByte},{lastN:g,defaultValue:5e3});return(a+b)/2};return a}();e.exports=a}),null);
__d("NetworkRequestPipeline",["EventEmitter","NetworkRequestPipelineStats","VideoPlayerResourceTimer","VideoPlayerShakaGlobalConfig","getXHRRequestHandlerHelper","performanceNow","setTimeoutAcrossTransitions","setTimeout","clearTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerShakaGlobalConfig").getBool("timeouts_persist_on_page_transition",!0)?b("setTimeoutAcrossTransitions"):b("setTimeout"),h=2,i=1;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.$NetworkRequestPipeline1=h;e.$NetworkRequestPipeline2=i;e.$NetworkRequestPipeline3=0;e.$NetworkRequestPipeline4=new(b("NetworkRequestPipelineStats"))();e.$NetworkRequestPipeline5=0;e.$NetworkRequestPipeline9=null;e.$NetworkRequestPipeline10=null;e.$NetworkRequestPipeline11=0;e.$NetworkRequestPipeline13=function(){e.$NetworkRequestPipeline12||(e.$NetworkRequestPipeline12=e.$NetworkRequestPipeline14(),e.$NetworkRequestPipeline10=null,e.$NetworkRequestPipeline15())};e.$NetworkRequestPipeline6=c;c=d||{};d=c.xhrHandleNetworkFailure;var f=c.maxConcurrentRequests,g=c.soothingFactor,j=c.fixFinishRequest;c=c.requestTimeout;e.$NetworkRequestPipeline7=!!d;e.$NetworkRequestPipeline8=!!j;e.$NetworkRequestPipeline6.setOnItemAdded(e.$NetworkRequestPipeline13);f!==void 0&&(e.$NetworkRequestPipeline1=f);g!==void 0&&(e.$NetworkRequestPipeline2=g);c!==void 0&&(e.$NetworkRequestPipeline11=c);e.$NetworkRequestPipeline13();return e}var d=c.prototype;d.$NetworkRequestPipeline16=function(){var a=this.$NetworkRequestPipeline3;this.$NetworkRequestPipeline3++;return a};d.$NetworkRequestPipeline15=function(){if(this.$NetworkRequestPipeline12&&this.$NetworkRequestPipeline5<this.$NetworkRequestPipeline1){var a=this.$NetworkRequestPipeline17(this.$NetworkRequestPipeline12);a||(this.$NetworkRequestPipeline12=null)}};d.$NetworkRequestPipeline18=function(a){if(a.hasEnded)return!1;b("clearTimeout")(a.timeout);a.hasEnded=!0;this.$NetworkRequestPipeline12=this.$NetworkRequestPipeline14();this.$NetworkRequestPipeline15();return!0};d.$NetworkRequestPipeline17=function(a){__p&&__p();var c=this;if(a.xhrRequest)return!0;var d=b("performanceNow")(),e=this.$NetworkRequestPipeline6.dequeue();if(!e){this.$NetworkRequestPipeline4.setNetworkIdle();return!1}var f=e.xhrRequest;e=e.estimatedSize;var h=!1,i=function(){if(!c.$NetworkRequestPipeline8)return!1;if(h)return!0;h=!0;return!1},j,k=function(e){if(!i()){e=b("VideoPlayerResourceTimer").getResourceTimingEntry(f.getURI().toString(),d,b("performanceNow")());c.$NetworkRequestPipeline4.addEntry(a.id,e);c.$NetworkRequestPipeline5--;c.$NetworkRequestPipeline18(a)||c.$NetworkRequestPipeline15()}j&&j.remove()},l=function(){i()||(c.$NetworkRequestPipeline5--,c.$NetworkRequestPipeline18(a)||c.$NetworkRequestPipeline15()),j&&j.remove()};h||(j=this.addListener("evict",function(a){f===a.xhrRequest&&l()}));k=b("getXHRRequestHandlerHelper")(f).addResponseHandler(k).addAbortHandler(l).addErrorHandler(l).addNetworkFailureHandler(function(){c.$NetworkRequestPipeline7&&l()});this.$NetworkRequestPipeline11&&k.addTimeoutHandler(l);a.xhrRequest=f;this.$NetworkRequestPipeline5++;a.timeout=g(function(){c.$NetworkRequestPipeline18(a)},this.$NetworkRequestPipeline19(f,e||void 0));this.$NetworkRequestPipeline9=this.$NetworkRequestPipeline10;this.$NetworkRequestPipeline10=f.getURI().toString();this.$NetworkRequestPipeline11&&f.setTimeout(this.$NetworkRequestPipeline11);f.send();return!0};d.evictRequest=function(a){this.emit("evict",{xhrRequest:a})};d.getRecentBlockingRequestUrl=function(){return this.$NetworkRequestPipeline9};d.$NetworkRequestPipeline14=function(){var a=this.$NetworkRequestPipeline16();a={id:a,hasEnded:!1,xhrRequest:null,timeout:null};return a};d.$NetworkRequestPipeline19=function(a,b){a=this.$NetworkRequestPipeline4.getEstimatedDownloadTime(b);b=this.$NetworkRequestPipeline4.getEstimatedTimeToFirstByte();var c=this.$NetworkRequestPipeline4.getOptimisticTimeToFirstByte();return(a+b-c)*this.$NetworkRequestPipeline2};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoClientEdgeCooperation",["clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=b("gkx")("678909"),h="X-FB-CEC-Video-Limit".toLowerCase(),i=1e3*60*2,j=/[\r\n]+/,k=null,l=null;function m(){k=null,b("clearTimeout")(l),l=null}var n={updateFromXHR:function(a){this.updateFromHeaders(a.getAllResponseHeaders())},updateFromHeaders:function(a){if(!g)return;a=a.trim().split(j);a.forEach(function(a){a=a.split(": ");var b=a.shift().toLowerCase();a=a.shift();b===h&&n._updateFromLimitHeader(a)})},updateFromResponse:function(a){if(!g)return;a=a.headers;if(!a.has(h))return;a=a.get(h);a&&n._updateFromLimitHeader(a)},_updateFromLimitHeader:function(a){a=a.match("s:([\\.0-9]+)");if(!a)return;a=Number(a[1]);k===null&&(k=a);a<=k&&(k=a,b("clearTimeout")(l),l=b("setTimeoutAcrossTransitions")(m,i))},applyBandwidthLimit:function(a,b){if(!g)return a;return k!==null?Math.min(a,b)*k:a}};e.exports=n}),null);
__d("PriorityRequestQueue",["invariant","EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$PriorityRequestQueue1=new Map(),c.$PriorityRequestQueue2=new Map(),c.$PriorityRequestQueue3=function(){},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.dequeue=function(){return this.$PriorityRequestQueue4(Infinity)};c.setOnItemAdded=function(a){this.$PriorityRequestQueue3=a};c.$PriorityRequestQueue4=function(a){var b=-Infinity;Array.from(this.$PriorityRequestQueue1.keys()).forEach(function(c){c<a&&(b=Math.max(b,c))});if(b===-Infinity)return null;var c=this.$PriorityRequestQueue1.get(b);c||g(0,2413);c=this.$PriorityRequestQueue5(c);return c?c:this.$PriorityRequestQueue4(b)};c.$PriorityRequestQueue5=function(a){__p&&__p();var b=a.queues,c=a.lastDequeued;if(!b.size)return null;var d=Array.from(b),e=c?d.findIndex(function(a){return a===c}):-1;for(var f=e+1;f<=e+b.size;f++){var g=f%b.size;g=d[g];var h=g.dequeue();if(h){a.lastDequeued=g;return h}}return null};c.setQueue=function(a,b){__p&&__p();var c=this,d=this.$PriorityRequestQueue2.get(a);if(d===b)return;d||this.$PriorityRequestQueue3("append");this.removeQueue(a);d=this.$PriorityRequestQueue1.get(b);d||(d={lastDequeued:null,queues:new Set()});d.queues.add(a);a.setOnItemAdded(function(b){c.$PriorityRequestQueue6(a,b)});this.$PriorityRequestQueue2.set(a,b);this.$PriorityRequestQueue1.set(b,d)};c.removeQueue=function(a){var b=this.$PriorityRequestQueue7(a);a.setOnItemAdded(function(){});this.$PriorityRequestQueue2["delete"](a);b&&b.queues["delete"](a)};c.$PriorityRequestQueue6=function(a,b){this.$PriorityRequestQueue3(b),b==="prepend"&&this.$PriorityRequestQueue7(a)};c.$PriorityRequestQueue7=function(a){__p&&__p();var b=this.$PriorityRequestQueue2.get(a);if(b!==void 0&&b!==null){b=this.$PriorityRequestQueue1.get(b);b||g(0,2414);var c=b.queues;if(b.lastDequeued===a){c=Array.from(c);var d=c.findIndex(function(b){return b===a});b.lastDequeued=c[d-1]||null}return b}return null};c.demandReschedule=function(){this.emit("demand_reschedule")};return b}(b("EventEmitter"));e.exports=a}),null);
__d("VideoPipelineProvider",["NetworkRequestPipeline","PriorityRequestQueue","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function a(a){var c=g.get(a);if(!c){var d=new(b("PriorityRequestQueue"))(),e=b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_soothing_factor",2),f=b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_max_concurrent_requests",2);a==="audio"&&(e=b("VideoPlayerShakaGlobalConfig").getNumber("audio_request_pipeline_soothing_factor",1),f=b("VideoPlayerShakaGlobalConfig").getNumber("audio_request_pipeline_max_concurrent_requests",1));f=new(b("NetworkRequestPipeline"))(d,{xhrHandleNetworkFailure:b("VideoPlayerShakaGlobalConfig").getBool("xhr_handle_network_failure",!0),maxConcurrentRequests:f,soothingFactor:e,fixFinishRequest:b("VideoPlayerShakaGlobalConfig").getBool("skip_old_handler_on_finished_requests",!1),requestTimeout:b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_timeout_ms",0)});c={requestQueue:d,pipeline:f};g.set(a,c)}return c}e.exports={getPriorityRequestQueueAndPipeline:a}}),null);
__d("SegmentRequestManager",["invariant","BinarySearch","SegmentsUpdateHelper","TrackedPromise","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentPromiseBuffer","VideoSegmentRequestPipeline"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=3;a=function(){__p&&__p();function a(a,c,d,e,f,g,h,i){this.$2=new Map(),this.$3=new Map(),this.$4=new Map(),this.$5=null,this.$7=new(b("VideoSegmentPromiseBuffer"))(),this.$8=!1,this.$10=0,this.$1=a,this.$6=new(b("VideoSegmentRequestPipeline"))(a,c,e,f,g,h,i),this.$11=d||b("VideoPriorityCalculator").calculate}var c=a.prototype;c.updateSegmentIndex=function(a,b){this.$2.set(a,b)};c.updateSegmentsByShakaReferences=function(a,c){new(b("SegmentsUpdateHelper"))(this.$4,this.$3).updateSegments(a,c)};c.updateSegments=function(a,c){var d=this,e=this.getSegments_INTERNAL_USE_ONLY(a);c.forEach(function(a){var c=b("VideoSegmentInfoHelper").getRequestCacheKey(a.requestInfo);d.$4.has(c)||(d.$4.set(c,a),d.$12(e,a))});this.$3.set(a,e)};c.getSegments_INTERNAL_USE_ONLY=function(a){a=this.$3.get(a);return a||[]};c.hasSegment_INTERNAL_USE_ONLY=function(a){a=b("VideoSegmentInfoHelper").getRequestCacheKey(a.requestInfo);return this.$4.has(a)};c.updatePriorityWithNewPlayhead=function(a){this.$9&&(this.$9.playhead=a);this.$13();return this};c.updatePriorityWithNewPlayingState=function(a){this.$9&&(this.$9.isPlaying=a);this.$13();return this};c.updatePriorityWithNewAdjustment=function(a){if(a===this.$10)return this;a<=0||g(0,4433);this.$10=a;this.$13();return this};c.updatePlayerState=function(a,b){__p&&__p();var c=this,d=this.$3.get(a);this.$9=b;if(!d)return this;var e=this.$5;this.$5=a;if(this.$8)return this;this.$13();d=this.$14(b,d);b=b.additionalSegmentsRequired;var f=[];b.length>0&&(f=this.$15(b),d=d.concat(f).sort(function(a,b){return a.startTime-b.startTime}));if(e!==a){this.$16();this.$17(d,f);return this}b=[];this.$7.hasOtherPendingSegments(d)?(this.$16(),b=d):(b=d.filter(function(a){return!c.$7.hasSegmentPromise(a)}),this.$7.removeSegmentPromisesOlderThan(d[0],this.$1));this.$17(b,f);return this};c.getPromise=function(a){a=b("VideoSegmentInfoHelper").getRequestCacheKey(a);a=this.$4.get(a);if(!a)throw new Error("the given request info is not found it segments cache ");var c=this.$7.getSegmentPromise(a),d;c&&(!c.isPending()||this.$7.isFirstPendingSegment(a))?d=c.getPromise():(this.$16(),d=this.$6.enqueue(a),c=new(b("TrackedPromise"))(d,this.$1),this.$7.appendSegmentPromise(a,c));this.$6.lockRequest(a);return d};c.getResourceTimingEntry=function(a){return this.$6.getResourceTimingEntry(a)};c.$15=function(a){var c=this,d=[];a.forEach(function(a){a=c.$4.get(b("VideoSegmentInfoHelper").getRequestCacheKey(b("SegmentsUpdateHelper").createSegmentInfo(a).requestInfo));a&&d.push(a)});return d};c.$12=function(a,b){var c=Number.POSITIVE_INFINITY;for(var d=0;d<=a.length;d++){var e=a.length-d,f=e>=1?a[e-1].startTime:Number.NEGATIVE_INFINITY;if(f<=b.startTime&&b.startTime<c){e===a.length?a.push(b):a.splice(e,0,b);return}c=f}};c.$13=function(){if(!this.$9)return;var a=this.$11(this.$9,this.$1.getNumber("global_scheduler_priority_threshold",6));a+=this.$10;this.$6.setPriority(a)};c.$16=function(){this.$6.cancelUnlockedRequests(),this.$7.clearAllSegmentPromises()};c.$17=function(a,c){__p&&__p();for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(b("VideoSegmentInfoHelper").isPrefetchedRequest(f))return;var g=c.includes(f)?"replacing_lower_quality_buffer":null;g=this.$6.enqueue(f,g);this.$7.appendSegmentPromise(f,new(b("TrackedPromise"))(g,this.$1))}};c.abortRequest=function(a){a=b("VideoSegmentInfoHelper").getRequestCacheKey(a);a=this.$4.get(a);a&&(this.$6.abortLockedRequest(a),this.$7.removeSegmentPromise(a))};c.disable=function(){if(this.$8)return;this.$6.cancelUnlockedRequests();this.$6.unload();this.$8=!0};c.enable=function(){this.$8=!1};c.isDisabled=function(){return this.$8};c.$14=function(a,b){__p&&__p();var c=a.playhead,d=a.bufferEnd;a=a.bufferingGoal;d=Math.max(d,c);var e=[];d=this.$18(d,b);for(var d=Math.max(d,0);d<b.length;d++){var f=b[d];if(f.startTime>c+a)break;e.push(f)}return e};c.$18=function(a,b){__p&&__p();var c=this.$1.getNumber("templated_chunked_segment_update_limit_int",0),d=b.length;if(!c)return this.$19(a,b);if(b.length>0){d=this.$19(a,b);if(d<b.length){var e=this.$20(b[d].startTime),f=this.$20(b[d].endTime),g=this.$20(a);if(e<=g&&f>g)return d}}e=this.$5||"";f=this.$2.get(e);if(!f)return d;d=f.findIndex(a);if(d<0)return b.length;g=Math.min(f.length(),d+c);c=[];for(var h=d;h<g;++h)c.push(f.get(h));d=b.length;this.updateSegmentsByShakaReferences(e,c);g=this.$3.get(e);return g?this.$19(a,g):d};c.$19=function(a,c){var d=this;return b("BinarySearch").leastUpperBound(function(b){var e=d.$20(c[b].startTime);b=d.$20(c[b].endTime);a=d.$20(a);return e<=a&&b>a?0:e-a},0,0,c.length,function(a,b){return a-b})};c.$20=function(a){return+a.toFixed(h)||0};return a}();e.exports=a}),null);
__d("ShakaTimelineSegmentIndexUtils",["BinarySearch","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b,c){return Math.abs(a-b)<c},h=function(a,b,c){return!g(a,b,c)&&a-b<0},i=function(a,b,c){return g(a,b,c)||a-b<0},j=function(a,b,c){return g(a,b,c)||a-b>0};function k(b){var a=0;for(var c=0;c<b.length;++c)b[c].startSegmentIndex=a,a+=b[c].repeat+1;return a}function l(b,c,a){__p&&__p();c=a-c;var d=0;if(a<1||c<0||b.length<1)throw new RangeError("Index out of range.");for(a=b.length-1;a>-1;--a){var e=b[a].repeat+1;d=e-c;if(d<0){c=Math.abs(d);continue}break}return{S:a,r:d}}function a(a,c,d,e){__p&&__p();if(b("VideoPlayerShakaGlobalConfig").getBool("non_iterative_segments_api_calls",!1))return v(a,c,d,e);var f=c.length-1,g=1e-7,k=function(a){return a/d+e};for(;f>-1;--f)if(i(k(c[f].startTime),a,g))break;if(f===-1)return f;var l=c[f],m=l.duration/d,n=0;for(var o=0;o<f;++o)n+=c[o].repeat+1;o=k(l.startTime);var p=o+m*(l.repeat+1);if(j(a,p,g)&&c[f+1]&&h(a,k(c[f+1].startTime),g))return n+l.repeat;else if(j(a,p,g)&&!c[f+1])return-1;k=n+Math.floor((a-o)/m);o+=m*(k-n);p=o+m;return j(a,o,g)&&h(a,p,g)?k:k+1}function c(a,c,d,e){__p&&__p();if(b("VideoPlayerShakaGlobalConfig").getBool("non_iterative_segments_api_calls",!1)){for(var f=a;f<c;++f){var g=u(d,f);e(g.unscaledStartTime,g.unscaledEndTime,g.segmentReplacement,g.delta,g.previousEndTime)}return}g=c-a;f=a;c=0;a=0;var h=!0;for(var i=0;i<d.length;++i){var j=d[i],k=j.repeat;k=k+1;var l=Math.min(a+k,f);l=l-a;var m=j.startTime,n=void 0;l&&(n=m+l*j.duration,d[i+1]&&n>d[i+1].startTime&&(n=d[i+1].startTime),m=n,c=n,h=!1);for(var j=l;j<k;++j){l=null;var o=b("VideoPlayerShakaGlobalConfig").getBool("fix_time_point_boundary_gap_expansion",!1);!o&&!h&&m!=c&&(l=m-c||null);n=m+d[i].duration;o=o?d[i+1]&&j+1>=k&&n!==d[i+1].startTime:d[i+1]&&n>d[i+1].startTime;o&&(l=d[i+1].startTime-n,c=n,n=d[i+1].startTime);o=a+j;e(m,n,o,l,l!==null?c:l);h=!1;if(--g<=0)return;f++;m=n;c=n}a+=k}}function d(a,b,c){__p&&__p();var d=[];if(a.length>1){var e=0;for(var f=0;f<a.length;++f){var g=a[f],h=g.startTime;g=h+(g.repeat+1)*g.duration;if(f&&h!==e){var i=h-e;i>0&&d.push({start:e/b+c,end:h/b+c})}e=g}}return d}function m(a){__p&&__p();var b=[];if(a.length===0)return b;b.push(a[0]);for(var c=1;c<a.length;++c){var d=b[b.length-1];if(d.duration!==a[c].duration){b.push(a[c]);continue}var e=d.startTime+d.duration*(d.repeat+1);if(e===a[c].startTime){d.repeat++;continue}b.push(a[c])}return b}function f(a,b){__p&&__p();a=a.slice();b=b.slice();if(b.length===0)return a;if(a.length===0){for(var c=0;c<b.length;++c)a.push(b[c]);return a}c=a[a.length-1];var d=c.startTime+c.duration*c.repeat;c=d+c.duration;var e=b[b.length-1];e=e.startTime+e.duration*(e.repeat+1);var f=k(b),g=[];if(c!==e){for(var c=f-1;c>-1;--c){e=l(b,c,f);var h=b[e.S],i=h.duration;h=h.startTime+i*e.r;if(d!==h)g.push({startTime:h,duration:i,repeat:0,startSegmentIndex:0});else break}while(g.length)a.push(g.pop())}e=m(a);return e}function n(b,c,a){__p&&__p();if(c+1>=a)return p(b,a);a=l(b,c+1,a);var d=a.S;a=a.r;var e=d,f=a;f===0?(d=e-1,a=b[d].repeat):(d=e,a=f-1);a=b[d].startTime+b[d].duration*a;d=a+b[d].duration;f=f!==0?null:b[e].startTime-d;var g=f?d:null;d=f?b[e].startTime:d;return{unscaledStartTime:a,unscaledEndTime:d,segmentReplacement:c,delta:f,previousEndTime:g}}function o(b,a){if(a<1||!b.length)throw new RangeError("Index out of range");return n(b,0,a)}function p(b,a){if(a<1||!b.length)throw new RangeError("Index out of range");var c=b.length-1,d=b[c].repeat;d=b[c].startTime+b[c].duration*d;b=d+b[c].duration;return{unscaledStartTime:d,unscaledEndTime:b,segmentReplacement:a-1,delta:null,previousEndTime:null}}function q(a,b,c){__p&&__p();var d=c-a.startSegmentIndex;d=a.startTime+a.duration*d;var e=d+a.duration,f=null,g=null;if(b&&a.startSegmentIndex+a.repeat===c){a=b.startTime;f=a-e;f&&(g=e,e=a)}b={unscaledStartTime:d,unscaledEndTime:e,segmentReplacement:c,delta:f,previousEndTime:g};return b}function r(a,b,c){var d=a.startTime;c=(c-d)/a.duration;d=Math.floor(c)+1;var e=1e-7;c=g(c,d,e)?d:Math.floor(c);c+=a.startSegmentIndex;e=a.startSegmentIndex+a.repeat;return c<=e?c:b?e:-1}function s(a,c){var d=a[a.length-1];if(b("VideoPlayerShakaGlobalConfig").getBool("templated_faster_start_index_finds",!1)&&c===0)return a.length?0:-1;return b("VideoPlayerShakaGlobalConfig").getBool("templated_test_last_time_point_first",!1)&&d&&d.startSegmentIndex<=c?a.length-1:b("BinarySearch").findBoundInArray(a,c,function(a,b){return a.startSegmentIndex-b},b("BinarySearch").GREATEST_LOWER_BOUND)}function t(a,c){var d=a[a.length-1],e=1e-7;if(b("VideoPlayerShakaGlobalConfig").getBool("templated_test_last_time_point_first",!1)&&d&&i(d.startTime,c,e))return a.length-1;d=function(a,b){return g(a.startTime,b,e)?0:a.startTime-b};return b("BinarySearch").findBoundInArray(a,c,b("VideoPlayerShakaGlobalConfig").getBool("use_float_epsilon_comparator_in_binary_search",!1)?d:function(a,b){return a.startTime-b},b("BinarySearch").GREATEST_LOWER_BOUND)}function u(a,b){var c=s(a,b),d=a[c];d=q(d,a[c+1]||null,b);return d}function v(a,b,c,d){a=(a-d)*c;d=t(b,a);c=b[d];if(!c)return-1;c=r(c,b[d+1]||null,a);return c}function w(a,b,c,d){__p&&__p();a=(a-d)*c;d=t(b,a);c=b[d];b=b[d+1]||null;if(!c)return null;d=r(c,b,a);if(d<0)return null;a=q(c,b,d);return a}e.exports={length:k,findIndex:a,find:w,findSTagAndRepeatValueByIndex:l,get:n,getSegments:c,getSeekRangeGaps:d,compressTimePoints:m,integrateTimePoints:f,first:o,last:p}}),null);
__d("ExtendableVideoPlayerShakaPerformanceTypedLogger",["VideoPlayerShakaPerformanceLoggerConfig","VideoPlayerShakaPerformanceTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){typeof a==="number"&&(a=Math.floor(a));return a}var h=!1;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.isEnabled=function(){return c.$ExtendableVideoPlayerShakaPerformanceTypedLogger3()||c.$ExtendableVideoPlayerShakaPerformanceTypedLogger4()};c.enable=function(){h=!0};c.$ExtendableVideoPlayerShakaPerformanceTypedLogger3=function(){return b("VideoPlayerShakaPerformanceLoggerConfig").isSampled};c.$ExtendableVideoPlayerShakaPerformanceTypedLogger4=function(){return h};var d=c.prototype;d.log=function(){c.isEnabled()&&a.prototype.log.call(this)};d.setState=function(b){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=b;return a.prototype.setState.call(this,b)};d.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1};d.setSequentialID=function(b){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=b;a.prototype.setSequentialID.call(this,b);return this};d.setParentLogger=function(a){this.setParentID(a.$ExtendableVideoPlayerShakaPerformanceTypedLogger2);return this};d.setSegmentEndTime=function(b){a.prototype.setSegmentEndTime.call(this,g(b));return this};d.setSegmentTimeGap=function(b){a.prototype.setSegmentTimeGap.call(this,g(b));return this};d.setSegmentStartTime=function(b){a.prototype.setSegmentStartTime.call(this,g(b));return this};return c}(b("VideoPlayerShakaPerformanceTypedLogger"));e.exports=a}),null);
__d("VideoPlayerArtilleryOperationMarker",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$6=!1}var b=a.prototype;b.markOperationStart=function(){return this.$7("Starting")};b.markOperationEnd=function(){return this.$7("Ending")};b.$7=function(a){var b=this.$4();b&&b.inform(a+" "+this.$2+" #"+this.$3,{pointGroup:this.$5.getGroupName(this.$2,this.$1),isPointOfInterest:!0,type:null}).addStringAnnotation("resource",this.$1||"").addStringAnnotation("wasPrefetchCacheHit",this.$6.toString());return this};b.setResource=function(a){this.$1=a;return this};b.setWasPrefetchCacheHit=function(a){this.$6=a;return this};return a}();e.exports=a}),null);
__d("VideoPlayerArtilleryPointGrouper",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=new Map(),this.$2=new Map()}var b=a.prototype;b.getGroupName=function(a,b){__p&&__p();if(!b){switch(a){case"start_streams":a="source_attach";break}return a}a=this.$1.get(b);if(a)return a;var c;if(b.indexOf("-init.m4v")!==-1)c="-init.m4v";else if(b.indexOf("-init.m4a")!==-1)c="-init.m4a";else if(b.indexOf(".mpd")!==-1)return"source_load";else b.indexOf(".m4v")!==-1?c=".m4v":b.indexOf(".m4a")!==-1?c=".m4a":c="unknown";var d=this.$2.get(c)+1||1;this.$2.set(c,d);a=c+" #"+d;this.$1.set(b,a);return a};return a}();e.exports=a}),null);
__d("FetchStreamStateTracker",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var b=a.prototype;b.setNextRequestInfo=function(a){this.$1=this.$2,this.$2=a};b.setFetchRange=function(a){this.$3=a};b.isNextRequestContinuous=function(){this.$2||g(0,3883);if(!this.$1)return!1;return this.$1.baseUrl!==this.$2.baseUrl||(this.$1.endByte||0)+1!==(this.$2.startByte||0)?!1:!0};b.isNextRequestInRange=function(){this.$2||g(0,3883);if(!this.$3)return!1;var a=Infinity,b=this.$3.endByte;b!==null&&b!==void 0&&(a=b);return(this.$2.endByte||0)<=a};return a}();e.exports=a}),null);
__d("NetworkErrorTransformStream",["ReadableStream","WritableStream","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();var a=c.prototype;a.$3=function(a){this.$1.enqueue(a)};function c(){__p&&__p();var a=this;this.writable=new(b("WritableStream"))({start:function(b){a.$2=b},write:function(b){a.$3(b)},close:function(){a.$1.close()},abort:function(c){var d=c;c instanceof TypeError&&(d={type:"net",status:0,message:"Network failure."});b("pipeErrorTo")(a.$1,d)}});this.readable=new(b("ReadableStream"))({start:function(b){a.$1=b},cancel:function(c){b("pipeErrorTo")(a.$2,c)}})}return c}();e.exports=a}),null);
__d("StreamBandwidthReporter",["EventEmitter","ReadableStream","WritableStream","performanceNow","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(d,a);var c=d.prototype;c.$StreamBandwidthReporter13=function(a){this.$StreamBandwidthReporter11.enqueue(a)};function d(c,d,e){__p&&__p();var f;f=a.call(this)||this;f.$StreamBandwidthReporter2=null;f.$StreamBandwidthReporter3=0;f.$StreamBandwidthReporter4=0;f.$StreamBandwidthReporter8=0;f.$StreamBandwidthReporter9=Infinity;f.$StreamBandwidthReporter1=c;f.$StreamBandwidthReporter2=f.$StreamBandwidthReporter1.getNumber("streaming_bandwidth_update_interval",18e4);f.$StreamBandwidthReporter7=e;f.$StreamBandwidthReporter9=d;f.$StreamBandwidthReporter2&&(f.$StreamBandwidthReporter10=f.$StreamBandwidthReporter9,f.$StreamBandwidthReporter14());f.writable=new(b("WritableStream"))({start:function(a){f.$StreamBandwidthReporter5=f.$StreamBandwidthReporter6=b("performanceNow")(),f.$StreamBandwidthReporter12=a},write:function(a){a.length!=void 0&&(f.$StreamBandwidthReporter3+=a.length),f.$StreamBandwidthReporter15(),f.$StreamBandwidthReporter13(a)},close:function(){f.$StreamBandwidthReporter11.close(),f.$StreamBandwidthReporter16()},abort:function(a){b("pipeErrorTo")(f.$StreamBandwidthReporter11,a)}});f.readable=new(b("ReadableStream"))({start:function(a){f.$StreamBandwidthReporter11=a},cancel:function(a){b("pipeErrorTo")(f.$StreamBandwidthReporter12,a)}});return f}c.$StreamBandwidthReporter17=function(){var a=this.$StreamBandwidthReporter1.getNumber("max_bandwidth_update_interval",0);return a>0?b("performanceNow")()>this.$StreamBandwidthReporter5+a:!1};c.$StreamBandwidthReporter15=function(){var a=this.$StreamBandwidthReporter9+this.$StreamBandwidthReporter3,b=this.$StreamBandwidthReporter18(),c=this.$StreamBandwidthReporter1.getBool("enable_segment_based_bandwidth_update",!0)||this.$StreamBandwidthReporter2;(this.$StreamBandwidthReporter17()||!c||b!=null&&a>=b)&&this.$StreamBandwidthReporter16()};c.$StreamBandwidthReporter16=function(){if(this.$StreamBandwidthReporter4===this.$StreamBandwidthReporter3)return;var a=b("performanceNow")();this.$StreamBandwidthReporter14();this.emit("bandwidthUpdate",{bytesRead:this.$StreamBandwidthReporter3-this.$StreamBandwidthReporter4,timeTaken:a-this.$StreamBandwidthReporter5});this.$StreamBandwidthReporter5=a;this.$StreamBandwidthReporter4=this.$StreamBandwidthReporter3};c.$StreamBandwidthReporter18=function(){return this.$StreamBandwidthReporter10!=null?this.$StreamBandwidthReporter10:this.$StreamBandwidthReporter7[this.$StreamBandwidthReporter8]};c.$StreamBandwidthReporter14=function(){this.$StreamBandwidthReporter17()?this.$StreamBandwidthReporter10=this.$StreamBandwidthReporter9+this.$StreamBandwidthReporter3+this.$StreamBandwidthReporter2:this.$StreamBandwidthReporter10!=null?this.$StreamBandwidthReporter10+=this.$StreamBandwidthReporter2:this.$StreamBandwidthReporter8++};return d}(b("EventEmitter"));e.exports=a}),null);
__d("StreamFetchRequestLogger",["PausableRangeStream","ReadableStream","VideoPlayerResourceTimer","WritableStream","performanceNow","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d,e,f,g,h){__p&&__p();var i=this;this.$6=0;this.$9=null;this.$10=0;this.$3=d;this.$2=g;this.$1=a;this.$4=c;this.$5=f;this.$11=e;this.$8=h;this.writable=new(b("WritableStream"))({start:function(a){i.$14(),i.$13=a},write:function(a){i.$6+=a.byteLength,i.$9&&(i.$10=Math.round(Math.max(i.$10,b("performanceNow")()-(i.$9||Infinity)))),i.$9=b("performanceNow")(),i.$15(a)},close:function(){i.$12.close(),i.$16()},abort:function(a){b("pipeErrorTo")(i.$12,a),i.$17(a)}});this.readable=new(b("ReadableStream"))({start:function(a){i.$12=a},cancel:function(a){b("pipeErrorTo")(i.$13,a);a={type:a===b("PausableRangeStream").STREAM_PAUSED?"paused":"aborted",status:0,url:i.$3};i.$17(a)}})}var c=a.prototype;c.$14=function(){this.$7=this.$1.getOperationLogger("fetch_stream").setSegmentStartTime(this.$11.startTime).setSegmentEndTime(this.$11.endTime).setResource(this.$3).start();this.$7.setPriorityFloat(this.$8);var a=this.$5,b=a.startByte;a=a.endByte;a=a===null?null:(a||0)+1-b;this.$7.setType(this.$4).setExpectedLength(a)};c.$17=function(a){this.$7.setError(a).setTimeBetweenBytesMax(this.$10).setLength(this.$6).log()};c.$16=function(){var a=b("VideoPlayerResourceTimer").getResourceTimingEntry(this.$3,this.$2,b("performanceNow")());if(a){var c=a.timeToFirstByte,d=a.timeToLastByte;a=a.timeToRequestStart;this.$7.setTimeToFirstByte(Math.round(c)).setTimeToLastByte(Math.round(d)).setTimeToRequestStart(Math.round(a)).setLength(this.$6)}this.$7.setTimeBetweenBytesMax(this.$10).log()};c.$15=function(a){this.$12.enqueue(a)};return a}();e.exports=a}),null);
__d("StreamProgress",["ReadableStream","VideoPlayerShakaBandwidthEstimator","WritableStream","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$1=0;this.$2=0;this.$4=!1;this.$3=a;this.writable=new(b("WritableStream"))({start:function(a){c.$6=a},write:function(a){a.length!=null&&(c.$1+=a.length),c.$5.enqueue(a)},close:function(){c.$5.close()},abort:function(a){c.$4=!0,b("pipeErrorTo")(c.$5,a)}});this.readable=new(b("ReadableStream"))({start:function(a){c.$5=a},cancel:function(a){c.$4=!0,b("pipeErrorTo")(c.$6,a)}})}var c=a.prototype;c.notifyBytesConsumed=function(a){this.$2+=a};c.getProgress=function(){return this.$7(this.$1)};c.getEstimatedTimeRemaining=function(){var a=this.$8(),c=b("VideoPlayerShakaBandwidthEstimator").getBandwidth();return a>-1?(a-this.$1)*8/c:null};c.getConsumptionProgress=function(){return this.$7(this.$2)};c.getBytesRemainingToConsume=function(){var a=this.$8();return a===-1?0:a-this.$2};c.hasAbortedOrCancelled=function(){return this.$4};c.$8=function(){return this.$3.endByte?this.$3.endByte-this.$3.startByte+1:-1};c.$7=function(a){var b=this.$8();return b===-1?0:a/b};return a}();e.exports=a}),null);
__d("StreamProgressTracker",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=null,this.$2=[]}var b=a.prototype;b.add=function(a){this.$2.push(a)};b.setOnStreamConsumed=function(a){this.$1=a};b.notifyBytesConsumed=function(a){__p&&__p();for(var b=0;b<this.$2.length;b++){if(this.$2[b].hasAbortedOrCancelled()){this.$2.splice(b,1);b--;continue}var c=this.$2[b].getBytesRemainingToConsume();this.$2[b].notifyBytesConsumed(c>=a?a:a-c);a-=c;if(a<0)break;else this.$2.splice(b,1),b--}this.$1&&this.$2.length===0&&(this.$1(),this.$1=null)};b.canTrackProgress=function(){return this.$2.length>0&&this.$2[0].getBytesRemainingToConsume()>-1};b.hasStarted=function(){return this.$2.length>0};b.getProgress=function(){return this.$2.length>0?this.$2[0].getProgress():null};b.getConsumptionProgress=function(){return this.$2.length>0?this.$2[0].getConsumptionProgress():null};b.getEstimatedTimeRemainingOfStream=function(){return this.$2.length>0?this.$2[0].getEstimatedTimeRemaining():null};b.destroy=function(){this.$2=[]};return a}();e.exports=a}),null);
__d("CustomAbrManager",["invariant","regeneratorRuntime","AbrEvaluationSignal","MosUtils","RlAbrModel","RlAbrUtils","Shaka","SubscriptionsHandler","VideoClientEdgeCooperation","VideoDashPrefetchCache","VideoPlaybackQuality","VideoPlayerConnectionQuality","VideoPlayerLocalBandwidthEstimator","VideoQualityClasses","getBandwidthUpgradeTargetFactor","getBufferedAheadOf","getVideoTracksWithoutSmoothPlayback"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("Shaka").player.VideoTrack,i=b("VideoPlaybackQuality").getDroppedFrames,j=b("VideoPlaybackQuality").getTotalFrames,k=window.devicePixelRatio||1;a=function(){"use strict";__p&&__p();function a(a){this.$39=!1,this.$2=null,this.$3=null,this.$4=a.shakaConfig,this.$5=a.performanceLogger,this.$7=new(b("SubscriptionsHandler"))(),this.$8=!0,this.$9=!1,this.$6=a.isSpherical,this.$10=a.width,this.$11=a.height,this.$13=a.resolutionConstraintMaxWidth,this.$12=a.resolutionConstraintMaxHeight,this.$14=a.minPlayQuality&&!this.$4.getBool("disable_min_quality",!1)?a.minPlayQuality:null,this.$15=a.maxPlayQuality?a.maxPlayQuality:null,this.$16=a.initiallyForcedRepresentations||b("VideoDashPrefetchCache").getCachedRepresentations(a.videoID),this.$17=a.video,this.$18=a.videoID,this.$30=null,this.$27=null,this.$29=null,this.$28=a.abrLogger,this.$41=!1,this.$31=a.getSource,this.$37=typeof a.useStrictTrackDimensionsExclusionLogic==="boolean"?a.useStrictTrackDimensionsExclusionLogic:this.$4.getBool("use_strict_track_dimensions_exclusion_logic",!1),a.enableAdaptation&&(this.$19=a.bandwidthModel,this.$20=a.bandwidthDowngradeTarget,this.$21=a.bandwidthUpgradeTarget,this.$22=a.useNewBandwidthBandLogic,this.$23=a.hvqUpgradeAggressiveness,this.$24=a.hvqInlineUpgradeAggressiveness,this.$25=a.preHvqUpgradeAggressiveness,this.$26=a.preHvqInlineUpgradeAggressiveness,this.$32=a.enableReinforcementLearning,this.$34=a.rlModelId,this.$33=a.rlUseShortFeatures,this.$40=a.videoWatchTimeTracker,this.$42=new(b("RlAbrModel"))(this.$4),this.$44=a.chosenVideoTrackChangedCallback)}var c=a.prototype;c.destroy=function(){this.$1&&(this.$1.destroy(),this.$1=null),this.$7.release(),this.$7.engage(),this.$2=null,this.$3=null,this.$8=!1};c.setDimensions=function(a,b){this.$10=a;this.$11=b;this.$2&&this.$2.setResolutionConstraint(this.$46(),this.$47());a=this.$17.paused?this.$4.getNumber("clear_buffer_on_constraint_change_paused_offset",5):this.$4.getNumber("clear_buffer_on_constraint_change_offset",5);this.$48({clearBufferIfUpgrading:this.$4.getBool("clear_buffer_on_constraint_change",!1),clearBufferOffset:a})};c.initialize=function(a,b){if(this.$2||this.$3)return;this.$2=a;this.$3=b;a.setResolutionConstraint(this.$46(),this.$47())};c.start=function(){if(!this.$2||!this.$3||this.$9)return;this.$2&&(this.$1=new(b("AbrEvaluationSignal"))(this.$17,this.$2,this.$3,{minEvalInterval:this.$4.getNumber("min_eval_interval",1e3),minSwitchInterval:this.$4.getNumber("min_switch_interval",5e3),ignoreTimeLimitForInitialSample:!0,useLowBufferVelocityInterval:this.$4.getBool("use_low_buffer_velocity_abr_interval",!1),lowBufferVelocityIntervalBufferThreshold:this.$4.getNumber("low_buffer_velocity_abr_interval_buffer_threshold",10),lowBufferVelocityAbrInterval:this.$4.getNumber("low_buffer_velocity_abr_interval",500),evaluateAbrOnFetchEnd:this.$4.getBool("evaluate_abr_on_fetch_end",!1),evaluateAbrOnTracksAndBandwidthChange:this.$4.getBool("evaluate_abr_on_tracks_and_bandwidth_change",!0),ignoreRecentBandwidthEvalOnFetchEnd:this.$4.getBool("ignore_recent_bandwidth_eval_on_fetch_end",!1)}),this.$1.addListener("evaluate",this.$49.bind(this)));this.$9=!0;this.$4.getBool("make_early_track_selection",!1)&&this.$29==="forced"&&this.$48()};c.$50=function(){this.$16||(this.$16=b("VideoDashPrefetchCache").getCachedRepresentations(this.$18));return this.$16};c.$49=function(a){this.$48(a)};c.$51=function(){var a=this.$4.getNumber("resolution_constraint_factor",2);return a*k};c.$46=function(){return this.$6||!this.$4.getBool("use_resolution_constraints",!0)?Infinity:Math.min(this.$10*this.$51(),this.$13)};c.$47=function(){return this.$6||!this.$4.getBool("use_resolution_constraints",!0)?Infinity:Math.min(this.$11*this.$51(),this.$12)};c.setPreferredVideoTrack=function(a){this.$30=a,this.$48({clearBufferIfUpgrading:!0,clearBufferOffset:0})};c.unsetPreferredVideoTrack=function(){this.$30=null,this.$48()};c.enable=function(a){this.$8=a};c.getInitialVideoTrackId=function(){if(!this.$2||!this.$3)return null;var a=this.$52();return a?a.id:null};c.getInitialSwitchReason=function(){return this.$29};c.getInitialAudioTrackId=function(){if(!this.$2||!this.$3)return null;var a=this.$53();return a?a.id:null};c.selectVideoTrack=function(c,d,e,f){__p&&__p();var g=this;if(!this.$9)return;var i=this.$4.getBool("abr_switch_after_stream_completes",!1),j=this.$4.getNumber("abr_abort_when_fetch_estimate_exceeds_buffer_factor",0),k=this.$4.getNumber("abr_abort_when_fetch_estimate_exceeds_time",0),l=this.$4.getNumber("abr_abort_on_zero_stream_progress_below_threshold",-1),m=this.$3.getVideoStreamProgressTracker(),n=a.$54(this.$3.getVideoTracks());n=n&&h.compare(n,c)<0?this.$4.getBool("abr_abort_only_on_downgrade",!1):!0;if(m&&m.canTrackProgress()&&m.hasStarted()){var o=b("getBufferedAheadOf")(this.$17),p=m.getEstimatedTimeRemainingOfStream();o=j>0&&p>o*j;j=k>0&&p>k;p=l>-1?m.getProgress()<=l:!1;if(n&&(o||j||p)){this.$3.selectVideoTrack(c.id,d,e,f,!0);return}else if(i){this.$3.stopUntilVideoStreamSwitch();m.setOnStreamConsumed(function(){g.$3.selectVideoTrack(c.id,d,e,f)});return}}this.$3.selectVideoTrack(c.id,d,e,f,this.$4.getBool("abr_abort_without_stream_progress",!1))};a.$54=function(a){for(var b=0;b<a.length;++b)if(a[b].active)return a[b];return null};c.$55=function(a){__p&&__p();var c=this.$4.getNumber("live_predictive_abr_up_buffer",9e3),d=this.$4.getNumber("live_predictive_abr_down_buffer",5e3),e=this.$4.getNumber("live_predictive_abr_up_retry_interval",3e4),f=this.$4.getNumber("live_predictive_abr_ttfb_ratio",1.8),g=this.$4.getNumber("live_predictive_abr_floor_ttfb_ratio",5),h=this.$4.getNumber("live_predictive_abr_floor_swich_lanes",-2),i=this.$4.getBool("live_predictive_abr_bandwidth_fallback",!1),j=this.$56();this.$57(j);j=this.$58(j);var k=b("getBufferedAheadOf")(this.$17),l=0;if(!this.$41)return this.$52(j);g>0&&a.streamFetchTimeMs>a.segmentLengthMs*g?(l=h<-100?-Infinity:h,this.$27="download_longer_than_duration"):f>0&&a.streamFetchTimeMs>a.segmentLengthMs*f?(l=-1,this.$27="download_longer_than_duration"):k<d/1e3?(l=-1,this.$27="low_buffer_availability"):k>=c/1e3&&this.$43+e<Date.now()&&(l=1,this.$27="high_buffer_availability");l<0&&(this.$43=Date.now());g=j[Math.max(Math.min(this.$36+l,j.length-1),0)];if(i&&l<0){h=this.$52(j);h&&h.bandwidth<g.bandwidth&&(g=h)}l!=0&&this.$59(this.$27,g,j);return g};c.$60=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:a=[];if(!this.$4.getBool("exclude_tracks_without_smooth_playback",!1)){d.next=5;break}d.next=4;return b("regeneratorRuntime").awrap(b("getVideoTracksWithoutSmoothPlayback")(this.$56(),this.$61()));case 4:a=d.sent;case 5:c=null;if(!(this.$32&&(!this.$17.paused||!this.$4.getBool("rl_use_fallback_evaluation_when_paused",!1)))){d.next=24;break}if(!(!this.$41&&this.$4.getBool("rl_use_fallback_for_first_evaluation",!1))){d.next=11;break}c=this.$52(a);d.next=22;break;case 11:if(!this.$4.getBool("rl_block_fetching",!1)){d.next=19;break}this.$3.stopUntilVideoStreamSwitch();d.next=15;return b("regeneratorRuntime").awrap(this.$62());case 15:c=d.sent;this.$3.resumeVideoFetching();d.next=22;break;case 19:d.next=21;return b("regeneratorRuntime").awrap(this.$62());case 21:c=d.sent;case 22:d.next=25;break;case 24:c=this.$52(a);case 25:return d.abrupt("return",c);case 26:case"end":return d.stop()}},null,this)};c.$48=function(c){__p&&__p();var d,e,f,g,i,j;return b("regeneratorRuntime").async(function(k){__p&&__p();while(1)switch(k.prev=k.next){case 0:c===void 0&&(c={clearBufferIfUpgrading:!1,clearBufferOffset:0});if(this.$8){k.next=3;break}return k.abrupt("return");case 3:d=c,e=d.clearBufferIfUpgrading,f=d.clearBufferOffset;g=null;if(!(c&&c.streamFetchTimeMs&&c.segmentLengthMs&&this.$4.getBool("shaka_buffer_abr",!1))){k.next=9;break}g=this.$55({streamFetchTimeMs:c.streamFetchTimeMs,segmentLengthMs:c.segmentLengthMs});k.next=12;break;case 9:k.next=11;return b("regeneratorRuntime").awrap(this.$60());case 11:g=k.sent;case 12:if(!g){k.next=19;break}if(!g.active){k.next=15;break}return k.abrupt("return");case 15:i=!1,e&&(j=a.$54(this.$3.getVideoTracks()),i=j?h.compare(j,g)<0:!1),this.$1&&this.$1.notifySwitch(),this.selectVideoTrack(g,i,f,this.$27);case 19:case"end":return k.stop()}},null,this)};c.$63=function(){var a=this;this.$39=this.$39||b("VideoPlayerConnectionQuality").evaluate(function(){return a.$64()})==="POOR";return this.$39};c.$65=function(){if(!this.$3)return!1;var a=this.$3.getBufferVelocity();return a!==null&&a<this.$4.getNumber("low_buffer_velocity_threshold",0)};c.$59=function(b,c,d){__p&&__p();if(!this.$28)return;var e=this.$35||a.$54(d);this.$5&&this.$5.getEventLogger("abr_evaluation").setDynamicBitrate(c.bandwidth).setStreamSwitchReason(b).setInitiator(e?e.streamInfoID:null).setConcluder(c.streamInfoID).setResult(c.active?"paused":"success").log();if(this.$28){var f=new Map();if(d)for(var g=0;g<d.length;g++)f.set(d[g].fbQualityLabel,d[g].bandwidth);this.$28.setEvent("track_selection").setReason(b).setRepresentationID(c.streamInfoID).setFbQualityLabel(c.fbQualityLabel).setIsHvq(c.isInlineHVQ||c.isHVQ).setActiveRepresentationID(e?e.streamInfoID:null).setActiveIsHvq(e?e.isInlineHVQ||e.isHVQ:null).setAvailableTracks(f).log()}};c.$61=function(){return this.$3.getAudioTracks().find(function(a){return a.active})};c.$56=function(){return this.$3.getVideoTracks({useLocalBitrate:this.$4.getBool("use_local_bitrate",!1)})};c.$57=function(b){this.$35=a.$54(b),this.$36=this.$35?b.indexOf(this.$35):-1};c.$58=function(a){__p&&__p();var c=this;if(a.length==0)return[];a=a.filter(function(a){return!(a.avoidOnPoorConnection&&c.$63())});var d=this.$50();if(!this.$9)for(var e=0;e<a.length;e++)if(d&&d.includes(a[e].streamInfoID)){this.$27="forced";this.$29="forced";this.$59(this.$27,a[e],[a[e]]);return[a[e]]}if(this.$30){var f=this.$30.id;e=a.find(function(a){return a.id===f});if(e){this.$27="user";this.$59(this.$27,e,[e]);return[e]}}a.sort(h.compare);if(this.$14!==null||this.$15!==null){var g=this.$14!==null?b("VideoQualityClasses").indexOf(this.$14):0,i=this.$15!==null?b("VideoQualityClasses").indexOf(this.$15):b("VideoQualityClasses").length-1;if(g<=i){d=a.filter(function(a){return b("VideoQualityClasses").indexOf(a.fbQualityClass)>=g&&b("VideoQualityClasses").indexOf(a.fbQualityClass)<=i});this.$27="prefer_quality_class";if(!d.length){this.$59(this.$27,a[a.length-1],[a[a.length-1]]);return[a[a.length-1]]}e=b("VideoQualityClasses").indexOf("sd");if(a.length==2&&d.length==2&&i<=e){this.$59(this.$27,a[0],[a[0]]);return[a[0]]}a=d}}return a};c.$66=function(a){var b=this,c=this.$47(),d=this.$46();a=a.filter(function(a){return b.$37?(a.width||0)<=d&&(a.height||0)<=c:(a.width||0)<=d||(a.height||0)<=c});return a};c.$67=function(a,b){return b.length===0?a:a.filter(function(a){return!b.find(function(b){return a.id===b.id})})};c.$68=function(){if(this.$3===null)return!1;var a=this.$4.getBool("use_buffer_target_only_after_buffering_goal_is_hit",!1);if(a&&!this.$3.hasHitBufferingGoal())return!0;a=this.$4.getNumber("buffer_velocity_time_in_past_to_consider",0)>0;return a&&!this.$65()?!0:!1};c.$69=function(a){if(!this.$44)return;(a==null&&this.$45!=null||a!=null&&this.$45==null||a!=null&&this.$45!=null&&this.$45.streamInfoID!=a.streamInfoID)&&this.$44(a);this.$45=a};c.$52=function(c){__p&&__p();c===void 0&&(c=[]);var d=this.$56();this.$57(d);d=this.$58(d);var e=this.$64();this.$4.getBool("exclude_tracks_with_expensive_mos",!1)&&(d=b("MosUtils").filterTracksWithExpensiveMos(d,this.$10*k,this.$11*k,e,this.$4.getNumber("maximum_mos_to_decrease",3),this.$4.getNumber("maximum_bandwidth_bitrate_ratio",1.5)));if(d.length==0){this.$69(null);return null}else if(d.length==1){this.$69(d[0]);return d[0]}this.$41=!0;var f=d[0];d=this.$67(d,c);c=d.reduce(function(a,b){return a>(b.bandwidth||0)?a:b.bandwidth||0},0);e=b("VideoClientEdgeCooperation").applyBandwidthLimit(e,c);d=this.$66(d);c=a.$54(this.$3.getAudioTracks());c=c?c.bandwidth:0;var g=b("getBufferedAheadOf")(this.$17);if(g<this.$4.getNumber("force_lowest_representation_threshold",0)&&!this.$68()){var h=0;this.$36>-1&&(h=Math.floor(this.$36*this.$4.getNumber("force_lower_representation_step_ratio",0)));h>=d.length&&(h=d.length-1);this.$27="low_buffer_availability";f=d[h]||f;this.$59(this.$27,f,d);this.$69(f);return f}else{h=0;for(var i=0;i<d.length;i++){var j=d[i],l=i+1<d.length?d[i+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!j.bandwidth)continue;var m=this.$70(j,l,g,this.$31&&this.$31()),n=this.$22?h:(j.bandwidth+c)/this.$20;l=(l.bandwidth+c)/m;h=l;m=this.$4.getBool("use_buffer_downgrade_threshold",!1);var o=this.$4.getNumber("buffer_downgrade_threshold",10);if(m&&g>o&&i<=this.$36){f=this.$35?this.$35:j;continue}if(e>=n&&e<=l){f=j;if(f.active)break}}this.$27="bandwidth"}this.$59(this.$27,f,d);this.$69(f);return f};c.$64=function(){this.$2 instanceof b("VideoPlayerLocalBandwidthEstimator")||g(0,2969);return this.$2.getBandwidth(this.$19)};c.$70=function(a,c,d,e){__p&&__p();var f=1;!a.isInlineHVQ&&c.isInlineHVQ?f=this.$26:a.isInlineHVQ&&e==="inline"?f=this.$24:a.isHVQ&&(f=this.$23);c=this.$4.getNumber("buffer_target",-1);e=!this.$4.getBool("use_buffer_target_only_after_buffering_goal_is_hit",!1)||this.$3&&this.$3.hasHitBufferingGoal();a=c>-1&&e;if(a){e=d>c;a=e?this.$4.getNumber("buffer_target_overflow_upgrade_aggressiveness",1):this.$4.getNumber("buffer_target_underflow_upgrade_aggressiveness",1);f*=a}d=this.$4.getNumber("frame_drop_penalty_minimum_frame_count",0);d>0&&(f*=b("getBandwidthUpgradeTargetFactor")(i(this.$17),j(this.$17),d,this.$4.getNumber("frame_drop_penalty_factor",0)));return this.$21*f};c.$53=function(){var a=this.$3.getAudioTracks();if(a.length==0)return null;var b=this.$50();if(!this.$9)for(var c=0;c<a.length;c++)if(b&&b.includes(a[c].streamInfoID))return a[c];return null};c.$62=function(){__p&&__p();var a=this,c,d,e,f,g,h,i,j,k,l,m,n;return b("regeneratorRuntime").async(function(o){__p&&__p();while(1)switch(o.prev=o.next){case 0:c=this.$56();this.$57(c);c=this.$58(c);if(!(c.length==0)){o.next=7;break}return o.abrupt("return",null);case 7:if(!(c.length==1)){o.next=9;break}return o.abrupt("return",c[0]);case 9:c=this.$66(c);if(!(c.length==0)){o.next=14;break}return o.abrupt("return",null);case 14:if(!(c.length==1)){o.next=16;break}return o.abrupt("return",c[0]);case 16:this.$27="forced";d=c[0];e=b("getBufferedAheadOf")(this.$17);f=this.$64();g=this.$33?b("RlAbrUtils").getRlAbrShortFeatures(this.$17,c,e,f):b("RlAbrUtils").getRlAbrFeatures(this.$17,c,e,f,this.$40);if(g){o.next=23;break}return o.abrupt("return",this.$52());case 23:h=this.$46();i=this.$47();o.prev=25;if(!this.$33){o.next=31;break}o.next=29;return b("regeneratorRuntime").awrap(function(){__p&&__p();var e,f,j,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(b("RlAbrUtils").genRlAbrShortFeaturesRecommendation(g,a.$4.getNumber("min_eval_interval",1e3),a.$34));case 2:e=l.sent;if(!(!e||e.length==0)){l.next=5;break}throw new Error("RL service not available.");case 5:f=function(f){var g=c.find(function(a){var c=b("RlAbrUtils").getQualityLabelBracket(a.fbQualityLabel,this.$33);return c===e[f]&&(a.width<=h||a.height<=i)});if(g){d=g;a.$27="rl_decision";return"break"}},j=0;case 7:if(!(j<e.length)){l.next=14;break}k=f(j);if(!(k==="break")){l.next=11;break}return l.abrupt("break",14);case 11:j++;l.next=7;break;case 14:case"end":return l.stop()}},null,this)}());case 29:o.next=51;break;case 31:j=this.$40?this.$40.getGuid():null;if(!(j===null)){o.next=34;break}return o.abrupt("return",this.$52());case 34:k=b("RlAbrUtils").getRlAbrAvailableBitrates(c);if(!(k.length>this.$4.getNumber("rl_max_number_of_bitrates",10))){o.next=37;break}return o.abrupt("return",this.$52());case 37:l=this.$4.getNumber("rl_request_timeout",1e3);if(!this.$4.getBool("rl_buffer_timeout",!0)){o.next=42;break}l=Math.min(l,(e-1)*1e3);if(!(l<0)){o.next=42;break}return o.abrupt("return",this.$52());case 42:m=this.$4.getString("rl_smc_tier","repomen_1");if(this.$42.modelFetched()){o.next=48;break}this.$42.fetchIfNotExist(j,m,l);return o.abrupt("return",this.$52());case 48:n=this.$42.getPolicyReportExperience(j,m,g,k,c,l),d=c[n],this.$27="rl_decision";case 51:o.next=56;break;case 53:o.prev=53;o.t0=o["catch"](25);return o.abrupt("return",this.$52());case 56:this.$38=g;this.$59(this.$27,d,c);return o.abrupt("return",d);case 59:case"end":return o.stop()}},null,this,[[25,53]])};return a}();e.exports=a}),null);
__d("LowLatencyPlayheadManager",["LowLatencyPlaybackTypedLogger","clearInterval","getBufferedAheadOf","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d,e,f){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$11=0,this.$9=0}var c=a.prototype;c.$12=function(a){var b=this.$4.getLowLatencyWorldTiming();this.$11=b.worldCurrentTimeMs;return a-b.worldCurrentTimeMs+b.worldLastVideoFrameMs};c.$13=function(a){a=this.$12(a);return a-this.$6.lowLatencyMs};c.getLowLatencyPlayheadMs=function(){var a=this.$5.currentTimeMillis();return this.$13(a)};c.startFixedLatencySync=function(){this.$7=b("setIntervalAcrossTransitions")(this.adjustPlaybackForLowLatency.bind(this),this.$6.lowLatencyAdjustPlaybackIntervalMs)};c.stopFixedLatencySync=function(){b("clearInterval")(this.$7)};c.setState=function(a){this.$10=a};c.state=function(){return this.$10};c.adjustPlaybackForLowLatency=function(){__p&&__p();if(!this.$4.isReady())return;if(!this.$4.isLive())return;if(!this.$5.isReady())return;var a=this.$5.currentTimeMillis(),c=this.$13(a);c=c/1e3;this.$10=="playing"&&this.$2.currentTime<c-this.$6.lowLatencyThresholdMs/1e3?(this.$2.currentTime=c+this.$6.lowLatencySeekForwardMs/1e3,this.$2.paused&&(this.$10="playing",this.$1.play()),this.$8=Date.now(),this.$9++):this.$10=="playing"&&this.$2.currentTime>c+this.$6.lowLatencyThresholdMs/1e3?(this.$1.pause(),this.$10="paused"):this.$10=="paused"&&(this.$10="playing",this.$1.play());new(b("LowLatencyPlaybackTypedLogger"))().setBehindByMs(a-this.$11).setBufferMs(b("getBufferedAheadOf")(this.$2)*1e3).setPlaybackDesiredTimeMs(this.$6.lowLatencyMs).setSeekCount(this.$9).setServerTimeMs(a).setTimeSinceLastSeekMs(Date.now()-this.$8).setVideoID(this.$3).setVideoTimeMs(this.$2.currentTime*1e3).log()};return a}();e.exports=a}),null);
__d("LowLatencyShakaTimingProvider",["Shaka"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("Shaka").player.Player;a=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.getLowLatencyWorldTiming=function(){var a=this.$1.getManifest();return{worldCurrentTimeMs:a.currentServerTimeMs,worldLastVideoFrameMs:a.lastVideoFrameTs}};b.isReady=function(){return this.$1.getManifest()!=null};b.isLive=function(){return this.$1.getManifest().type=="dynamic"};return a}();e.exports=a}),null);
__d("VideoPlayerAbrLogger",["ScriptPath","VideoPlayerAbrLoggerConfig","VideoPlayerAbrTypedLogger","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaGlobalConfig","getBufferedAheadOf"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;a.prototype.setSession.call(babelHelpers.assertThisInitialized(c),b.uniqueID);a.prototype.setVideoID.call(babelHelpers.assertThisInitialized(c),b.videoID);c.$VideoPlayerAbrLogger4=b.video;c.$VideoPlayerAbrLogger5=b.isLive;c.$VideoPlayerAbrLogger6=b.playerOrigin;c.$VideoPlayerAbrLogger7();return c}var d=c.prototype;d.setBytes=function(a){this.$VideoPlayerAbrLogger1.bytes=a;return this};d.setDelayMs=function(a){this.$VideoPlayerAbrLogger1.delayMs=a;return this};d.setEvent=function(a){this.$VideoPlayerAbrLogger1.event=a;return this};d.setUnsampledReason=function(a){this.$VideoPlayerAbrLogger1.unsampledReason=a;return this};d.setReason=function(a){this.$VideoPlayerAbrLogger1.reason=a;return this};d.setRepresentationID=function(a){this.$VideoPlayerAbrLogger2=a;return this};d.setFbQualityLabel=function(a){this.$VideoPlayerAbrLogger3=a;return this};d.setClientTimeBegin=function(a){this.$VideoPlayerAbrLogger1.clientTimeBegin=a;return this};d.setClientTimeEnd=function(a){this.$VideoPlayerAbrLogger1.clientTimeEnd=a;return this};d.setIsHvq=function(a){this.$VideoPlayerAbrLogger1.isHvq=a;return this};d.setActiveIsHvq=function(a){this.$VideoPlayerAbrLogger1.activeIsHvq=a;return this};d.setActiveRepresentationID=function(a){this.$VideoPlayerAbrLogger1.activeRepresentationID=a;return this};d.setAvailableTracks=function(a){this.$VideoPlayerAbrLogger1.availableTracks=a;return this};d.$VideoPlayerAbrLogger7=function(){this.$VideoPlayerAbrLogger1={bytes:null,delayMs:null,event:null,unsampledReason:null,reason:null,clientTimeBegin:null,clientTimeEnd:null,isHvq:null,activeIsHvq:null,activeRepresentationID:null,availableTracks:null}};d.$VideoPlayerAbrLogger8=function(){__p&&__p();if(this.$VideoPlayerAbrLogger1.event==null)return;else this.$VideoPlayerAbrLogger1.event=="track_selection"&&(a.prototype.setActiveIsHvq.call(this,this.$VideoPlayerAbrLogger1.activeIsHvq),a.prototype.setActiveRepresentationID.call(this,this.$VideoPlayerAbrLogger1.activeRepresentationID),a.prototype.setAvailableTracks.call(this,this.$VideoPlayerAbrLogger1.availableTracks),a.prototype.setIsHvq.call(this,this.$VideoPlayerAbrLogger1.isHvq));a.prototype.setBytes.call(this,this.$VideoPlayerAbrLogger1.bytes);a.prototype.setDelayMs.call(this,this.$VideoPlayerAbrLogger1.delayMs);a.prototype.setEvent.call(this,this.$VideoPlayerAbrLogger1.event);a.prototype.setUnsampledReason.call(this,this.$VideoPlayerAbrLogger1.unsampledReason);a.prototype.setReason.call(this,this.$VideoPlayerAbrLogger1.reason);var b=this.$VideoPlayerAbrLogger1.clientTimeBegin,c=this.$VideoPlayerAbrLogger1.clientTimeEnd;b==null?(b=Date.now(),c=b):c==null&&(c=b);a.prototype.setClientTimeBegin.call(this,b);a.prototype.setClientTimeEnd.call(this,c)};d.log=function(){__p&&__p();if(b("VideoPlayerShakaGlobalConfig").getBool("enable_client_side_abr_logger_sampling",!0)&&!b("VideoPlayerAbrLoggerConfig").isSampled)return;this.$VideoPlayerAbrLogger8();a.prototype.setBandwidthEstimate.call(this,parseInt(b("VideoPlayerShakaBandwidthEstimator").getBandwidth(),10));a.prototype.setRepresentationID.call(this,this.$VideoPlayerAbrLogger2);a.prototype.setFbQualityLabel.call(this,this.$VideoPlayerAbrLogger3);a.prototype.setPlayhead.call(this,Math.round(this.$VideoPlayerAbrLogger4.currentTime*1e3));a.prototype.setBufferedAhead.call(this,Math.round(b("getBufferedAheadOf")(this.$VideoPlayerAbrLogger4)));a.prototype.setVideoDuration.call(this,Math.round(this.$VideoPlayerAbrLogger4.duration*1e3));a.prototype.setIsLive.call(this,this.$VideoPlayerAbrLogger5);a.prototype.setPlayerOriginCallerSpecified.call(this,this.$VideoPlayerAbrLogger6);a.prototype.setScriptPath.call(this,b("ScriptPath").getScriptPath());a.prototype.log.call(this);this.$VideoPlayerAbrLogger7()};return c}(b("VideoPlayerAbrTypedLogger"));e.exports=a}),null);